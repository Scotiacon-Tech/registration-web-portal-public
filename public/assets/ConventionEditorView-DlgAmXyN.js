import{s as w}from"./index-fwfMqYug.js";import{i as O,M as q,N as M,r as C,k as H,n as f,q as b,v as l,f as e,x as E,F as y,A as R,c as ae,D as _,G as F,H as S,Q as K,y as $,P as B,z as ie,m as ge,w as Z,W as Ee,X as be,Y as Se,Z as Ie,O as _e,V as Ce,C as Ae,s as ne,_ as Ke,U as el,S as Le}from"./index-0re_Zbmz.js";import{m as Oe,a as Me,s as Ge,b as ll}from"./sorted-PYsDa1V2.js";import{_ as Q,I as tl,a as he,u as al}from"./useLinkedFields-D8LV2Rt-.js";import{_ as ee}from"./SaveButton.vue_vue_type_script_setup_true_lang-DY4gExo5.js";import{V as de,a as se}from"./VToolbar-c-wP2Opp.js";import{V as P,d as J,e as z,p as Be}from"./VContainer-B17A8qId.js";import{V as oe}from"./scopeId-1auahuEK.js";import{V as Ue}from"./VToolbarItems-D9iW5ysn.js";import{c as De,e as re}from"./VCard-CDMg_rZx.js";import{V as N}from"./VTextField-CWVRq-nm.js";import{_ as Ye}from"./SelectGroups.vue_vue_type_script_setup_true_lang-Bp-yjFjg.js";import{V as Fe,a as ue,d as te,b as xe}from"./VList-CDS3aYrf.js";import{V as x,a as T}from"./VRow-C2DvSiRz.js";import{V as Te}from"./VDialog-ZMshnenk.js";import{v as L}from"./v4-CtRu48qb.js";import{V as pe,a as fe,b as Ve,c as ce}from"./VExpansionPanels-C71J5or5.js";import{V as me}from"./VTextarea-DpQim3qS.js";import{T as G,a as ol}from"./ticket-DqurB3v3.js";import{V as nl}from"./VAutocomplete-BSLmRhnk.js";import{V as X}from"./VSelect-DmrQX81z.js";import{V as W}from"./VCheckbox-CNYaSwZ5.js";import{V as He,a as je}from"./VChip-jOO2MKox.js";import{V as ul}from"./VTable-kB6iI7Rr.js";import{V as le}from"./VSheet-Dh83TCqd.js";import{_ as we}from"./DeleteDialog.vue_vue_type_script_setup_true_lang-B00YvFXN.js";import{u as ve}from"./useModel-DYiFhw7K.js";import{_ as qe}from"./ModelDialog.vue_vue_type_script_setup_true_lang-Ds81YQPn.js";import{p as il,F as ze,a as Y,_ as Je,b as dl}from"./FormRenderer.vue_vue_type_style_index_0_lang-Bdd2-ePR.js";import{V as We}from"./VDivider-8-DG3C0k.js";import{V as Xe}from"./VDataTable-Bm0qtzqU.js";import{a as sl,F as rl}from"./form-Cqw16b_M.js";import{b as ml}from"./forwardRefs-oLBcdLdk.js";import{E as vl}from"./EditConventionDialog-CcA1jf2A.js";import{u as pl}from"./useConventionForms-CtE2yXfC.js";import{V as Ze}from"./VForm-DCJny9lx.js";import{u as fl}from"./useStripeConfig-CqDgf_6P.js";import{V as Vl}from"./VTooltip-Bd7py8Oo.js";import{a as cl,V as Ul}from"./VAlert-OhJKGGgg.js";import{V as Ne,a as Pe,b as Re,c as $e}from"./VTabs-CYKTOFag.js";import"./VOverlay-DpXReeUS.js";import"./layout-n1A8Ctyk.js";import"./createSimpleFunctional-wYAvOQTW.js";import"./form-B9XdIsvk.js";import"./filter-3qqYNki9.js";import"./VCheckboxBtn-CNJ4LOQ_.js";import"./submission-DAi9v6uc.js";import"./copyToClipboard-BtcEYe2-.js";import"./useStoreAPI-ziNtIWHM.js";import"./VFileInput-DadMNhwn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./userData-ZGBBaE7p.js";var ke=(g=>(g.PER_ROOM="PER_ROOM",g.PER_PERSON="PER_PERSON",g))(ke||{});const Dl=O({__name:"EditConventionExtraOptions",props:q({convention:{}},{modelValue:{},modelModifiers:{}}),emits:q(["close"],["update:modelValue"]),setup(g,{emit:v}){const u=v,s=M(g,"modelValue"),p=C(H(s.value)),d=()=>{s.value=p.value,u("close")};return(o,n)=>(f(),b(re,null,{default:l(()=>[e(de,{dark:"",color:"primary"},{default:l(()=>[e(P,{icon:"",dark:"",onClick:n[0]||(n[0]=t=>u("close"))},{default:l(()=>[e(J,null,{default:l(()=>n[6]||(n[6]=[E("mdi:mdi-close")])),_:1})]),_:1}),e(se,null,{default:l(()=>n[7]||(n[7]=[E("Edit Option Choice")])),_:1}),e(oe),e(Ue,null,{default:l(()=>[e(P,{variant:"text",onClick:d},{default:l(()=>n[8]||(n[8]=[E(" Apply ")])),_:1})]),_:1})]),_:1}),e(De,{class:"pa-0"},{default:l(()=>[e(z,null,{default:l(()=>[e(N,{label:y(w).formLabelName,type:"text",variant:"outlined",modelValue:p.value.Name,"onUpdate:modelValue":n[1]||(n[1]=t=>p.value.Name=t)},null,8,["label","modelValue"]),e(N,{label:y(w).formLabelDescription,type:"text",variant:"outlined",modelValue:p.value.Description,"onUpdate:modelValue":n[2]||(n[2]=t=>p.value.Description=t)},null,8,["label","modelValue"]),e(N,{label:y(w).formLabelPrice,type:"text",variant:"outlined","prepend-icon":y(w).currencyIcon,modelValue:p.value.Price,"onUpdate:modelValue":n[3]||(n[3]=t=>p.value.Price=t),modelModifiers:{number:!0},hint:"Adds additional charges for selecting this option"},null,8,["label","prepend-icon","modelValue"]),e(Q,{modelValue:p.value.Tags,"onUpdate:modelValue":n[4]||(n[4]=t=>p.value.Tags=t),convention:o.convention,hint:"Tags acquired by selecting this option & any choice within it."},null,8,["modelValue","convention"]),p.value.Choices?(f(),b(Q,{key:0,modelValue:p.value.Choices,"onUpdate:modelValue":n[5]||(n[5]=t=>p.value.Choices=t),convention:o.convention,hint:"Sub-options (tags) that a user may choose from."},null,8,["modelValue","convention"])):R("",!0)]),_:1})]),_:1})]),_:1}))}}),Tl=O({__name:"EditConventionExtra",props:q({convention:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(g){const v=M(g,"modelValue"),u=C(H(v.value)),s=C(!1),p=C(0),d=B(),o=C([""]),n=C([]),t=C([]);g.convention&&(d.getConventionTags(g.convention.ConventionUUID).then(i=>{t.value=i.sort((c,D)=>c.Title.localeCompare(D.Title))}),d.getOrganisationTags(g.convention.OrganisationUUID).then(i=>{n.value=i.sort((c,D)=>c.Title.localeCompare(D.Title))}));const a=ae(()=>[...n.value,...t.value]),m=({callback:i})=>{d.saveExtra(u.value).then(c=>{c?(v.value=c,i&&i("Extra Saved")):i&&i("Failed to Save Extra")}).catch(()=>{i&&i("Failed to Save Extra")})},V=i=>{var c;i.Options||(i.Options=[]),i.Options.push({ID:0,OptionUUID:L(),ExtraID:i.ID,ExtraUUID:i.ExtraUUID,Order:((c=i.Options)==null?void 0:c.length)+1,Name:"",Description:"",Price:0,Choices:[],Tags:[]})},U=(i,c)=>{i.Options&&i.Options.splice(c,1)},r=i=>{if(i.Choices&&i.Choices.length>0)return i.Choices.map(c=>{const D=a.value.find(A=>A.TagUUID===c.TagUUID);if(D)return D.Title}).join(", ")};return(i,c)=>(f(),_(S,null,[e(z,{class:"px-0"},{default:l(()=>[e(N,{label:y(w).formLabelName,type:"text",variant:"outlined",modelValue:u.value.Name,"onUpdate:modelValue":c[0]||(c[0]=D=>u.value.Name=D)},null,8,["label","modelValue"]),e(N,{label:y(w).formLabelDescription,type:"text",variant:"outlined",modelValue:u.value.Description,"onUpdate:modelValue":c[1]||(c[1]=D=>u.value.Description=D)},null,8,["label","modelValue"]),e(Q,{modelValue:u.value.AppliesTags,"onUpdate:modelValue":c[2]||(c[2]=D=>u.value.AppliesTags=D),convention:i.convention,organisation:i.convention.OrganisationUUID,hint:"Tags a user acquires by selecting any option within this addon purchase."},null,8,["modelValue","convention","organisation"]),e(Q,{label:"Required Tags",variant:"outlined",modelValue:u.value.RequiredTags,"onUpdate:modelValue":c[3]||(c[3]=D=>u.value.RequiredTags=D),convention:i.convention,organisation:i.convention.OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user must have to see this form. (Any one)"},null,8,["modelValue","convention","organisation"]),e(Ye,{label:"Required Groups",variant:"outlined",modelValue:u.value.RequiredGroupMemberships,"onUpdate:modelValue":c[4]||(c[4]=D=>u.value.RequiredGroupMemberships=D),convention:i.convention,organisation:i.convention.OrganisationUUID,chips:"",clearable:"",hint:"Groups that a user must be in to see this form. (Any one)"},null,8,["modelValue","convention","organisation"]),c[11]||(c[11]=F("h3",null,"Options",-1)),e(Fe,{opened:o.value,"onUpdate:opened":c[5]||(c[5]=D=>o.value=D)},{default:l(()=>[(f(!0),_(S,null,K(u.value.Options,(D,A)=>(f(),_(S,{key:D.ID},[D?(f(),b(ue,{key:0,"prepend-icon":"mdi:mdi-ticket-percent",title:`${D.Name} ${D.Price&&D.Price>0?`(${y(w).currencySymbol}${D.Price})`:""}`},{append:l(()=>[e(P,{color:"red",icon:"mdi:mdi-close",size:"x-small",class:"mr-1",onClick:I=>U(u.value,A)},null,8,["onClick"]),e(P,{color:"primary",icon:"mdi:mdi-pencil",size:"x-small",onClick:I=>{s.value=!0,p.value=A}},null,8,["onClick"])]),default:l(()=>[D.Choices&&D.Choices.length>0?(f(),b(te,{key:0},{default:l(()=>[E(" Options: "+$(r(D)),1)]),_:2},1024)):R("",!0)]),_:2},1032,["title"])):R("",!0)],64))),128))]),_:1},8,["opened"]),e(P,{color:"primary",onClick:c[6]||(c[6]=D=>V(u.value))},{default:l(()=>c[10]||(c[10]=[E("Add Option")])),_:1}),e(x,null,{default:l(()=>[e(T,{class:"text-right"},{default:l(()=>[e(ee,{onClick:m})]),_:1})]),_:1})]),_:1}),e(Te,{modelValue:s.value,"onUpdate:modelValue":c[9]||(c[9]=D=>s.value=D),scrollable:""},{default:l(()=>[e(Dl,{modelValue:u.value.Options[p.value],"onUpdate:modelValue":c[7]||(c[7]=D=>u.value.Options[p.value]=D),convention:i.convention,onClose:c[8]||(c[8]=D=>s.value=!1)},null,8,["modelValue","convention"])]),_:1},8,["modelValue"])],64))}}),yl=O({__name:"EditConventionExtras",props:q({convention:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:q(["close"],["update:modelValue"]),setup(g,{emit:v}){const u=v,s=M(g,"modelValue"),p=B(),d=()=>{const t={ID:0,ExtraUUID:L(),ConventionID:g.convention.ID,ConventionUUID:g.convention.ConventionUUID,Order:s.value.length+1,Name:"New Extra",Description:"",AppliesTags:[],RequiredTags:[],RequiredGroupMemberships:[],Options:[],Tags:[]};p.saveExtra(t).then(a=>{a&&s.value.push(a)})},o=t=>{p.deleteExtra(s.value[t].ExtraUUID).then(a=>{a&&s.value.splice(t,1)})},n=(...t)=>{t.forEach(a=>{a>=0&&a<s.value.length&&p.saveExtra(s.value[a])})};return(t,a)=>(f(),b(re,null,{default:l(()=>[e(de,{dark:"",color:"primary"},{default:l(()=>[e(se,null,{default:l(()=>a[1]||(a[1]=[E("Edit Extras")])),_:1}),e(oe),e(Ue,null,{default:l(()=>[e(P,{variant:"text",onClick:d},{default:l(()=>a[2]||(a[2]=[E(" Add ")])),_:1}),e(P,{icon:"",dark:"",onClick:a[0]||(a[0]=m=>u("close"))},{default:l(()=>[e(J,null,{default:l(()=>a[3]||(a[3]=[E("mdi:mdi-close")])),_:1})]),_:1})]),_:1})]),_:1}),e(De,{class:"pa-0"},{default:l(()=>[e(pe,null,{default:l(()=>[(f(!0),_(S,null,K(s.value,(m,V)=>(f(),b(fe,{key:m.ID,class:"mt-0"},{default:l(()=>[e(Ve,null,{actions:l(({expanded:U})=>[e(P,{icon:"mdi:mdi-close",size:"x-small",color:"red",class:"mr-1",onClick:r=>o(V)},null,8,["onClick"]),e(J,{class:"align-self-center text-h5",icon:U?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:l(()=>[e(P,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:ie(U=>{y(Oe)(m,s.value),n(V,V-1)},["stop"])},null,8,["onClick"]),e(P,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:ie(U=>{y(Me)(m,s.value),n(V,V+1)},["stop"])},null,8,["onClick"]),E(" "+$(m.Name)+" ",1)]),_:2},1024),e(ce,{class:"px-0"},{default:l(()=>[e(Tl,{convention:t.convention,modelValue:s.value[V],"onUpdate:modelValue":U=>s.value[V]=U},null,8,["convention","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Il=O({__name:"Extras",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(g){const v=M(g,"modelValue"),u=C([]),s=B(),p=C([""]),d=C(!1),o=t=>{if(t.Choices&&t.Choices.length>0)return t.Choices.map(a=>a.Title).join(", ")},n=()=>{d.value=!1};return s==null||s.getConventionExtras(v.value.ConventionUUID||"").then(t=>{t&&(u.value=t)}),(t,a)=>(f(),_(S,null,[e(z,{fluid:!0,class:"px-0"},{default:l(()=>[e(x,null,{default:l(()=>[e(T,null,{default:l(()=>a[4]||(a[4]=[F("h3",null,"Additional Purchases",-1)])),_:1}),e(T,{class:"text-right"},{default:l(()=>[e(P,{color:"primary",onClick:a[0]||(a[0]=m=>d.value=!0)},{default:l(()=>a[5]||(a[5]=[E("Edit")])),_:1})]),_:1})]),_:1})]),_:1}),a[6]||(a[6]=F("p",null,"These are global ticket addons that are not tied to any particular ticket type.",-1)),e(Fe,{opened:p.value,"onUpdate:opened":a[1]||(a[1]=m=>p.value=m)},{default:l(()=>[(f(!0),_(S,null,K(u.value,m=>(f(),b(xe,{key:m.ID,value:m.ID},{activator:l(({props:V})=>[e(ue,ge({ref_for:!0},V,{"prepend-icon":"mdi:mdi-group",title:m.Name}),null,16,["title"])]),default:l(()=>[m.Options?(f(!0),_(S,{key:0},K(m.Options,V=>(f(),b(ue,{key:V.ID,"prepend-icon":"mdi:mdi-ticket-percent",title:`${V.Name} ${V.Price&&V.Price>0?`(${y(w).currencySymbol}${V.Price})`:""}`},{default:l(()=>[V.Choices&&V.Choices.length>0?(f(),b(te,{key:0},{default:l(()=>[E(" Options: "+$(o(V)),1)]),_:2},1024)):R("",!0)]),_:2},1032,["title"]))),128)):R("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"]),e(Te,{modelValue:d.value,"onUpdate:modelValue":a[3]||(a[3]=m=>d.value=m),scrollable:!0,persistent:!0,fullscreen:!0},{default:l(()=>[e(yl,{modelValue:u.value,"onUpdate:modelValue":a[2]||(a[2]=m=>u.value=m),convention:v.value,onClose:n},null,8,["modelValue","convention"])]),_:1},8,["modelValue"])],64))}}),gl=O({__name:"EditConventionInterest",props:q({convention:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(g){const v=M(g,"modelValue"),u=C(H(v.value)),s=B(),p=({callback:d})=>{s.saveInterest(u.value).then(o=>{o?(v.value=o,d&&d("Interest Saved")):d&&d("Failed to Save Interest")}).catch(()=>{d&&d("Failed to Save Interest")})};return(d,o)=>(f(),b(z,{class:"px-0"},{default:l(()=>[e(N,{label:y(w).formLabelName,type:"text",variant:"outlined",modelValue:u.value.Name,"onUpdate:modelValue":o[0]||(o[0]=n=>u.value.Name=n)},null,8,["label","modelValue"]),e(me,{label:y(w).formLabelDescription,type:"text",variant:"outlined",modelValue:u.value.Description,"onUpdate:modelValue":o[1]||(o[1]=n=>u.value.Description=n)},null,8,["label","modelValue"]),R("",!0),e(Q,{modelValue:u.value.AppliesTags,"onUpdate:modelValue":o[3]||(o[3]=n=>u.value.AppliesTags=n),convention:d.convention,organisation:d.convention.OrganisationUUID,hint:"Tags that a user acquires by selecting this interest."},null,8,["modelValue","convention","organisation"]),e(x,null,{default:l(()=>[e(T,{class:"text-right"},{default:l(()=>[e(ee,{onClick:p})]),_:1})]),_:1})]),_:1}))}}),bl=O({__name:"EditConventionInterests",props:q({convention:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:q(["close"],["update:modelValue"]),setup(g,{emit:v}){const u=v,s=M(g,"modelValue"),p=B(),d=()=>{const t={ID:0,InterestUUID:L(),ConventionID:g.convention.ID,ConventionUUID:g.convention.ConventionUUID,Order:s.value.length+1,Name:"New Interest",Description:"",Price:0,AppliesTags:[]};p.saveInterest(t).then(a=>{a&&s.value.push(a)})},o=t=>{p.deleteInterest(s.value[t].InterestUUID).then(a=>{a&&s.value.splice(t,1)})},n=(...t)=>{t.forEach(a=>{a>=0&&a<s.value.length&&p.saveInterest(s.value[a])})};return(t,a)=>(f(),b(re,null,{default:l(()=>[e(de,{dark:"",color:"primary"},{default:l(()=>[e(se,null,{default:l(()=>a[1]||(a[1]=[E("Edit Interests")])),_:1}),e(oe),e(Ue,null,{default:l(()=>[e(P,{variant:"text",onClick:d},{default:l(()=>a[2]||(a[2]=[E(" Add ")])),_:1}),e(P,{icon:"",dark:"",onClick:a[0]||(a[0]=m=>u("close"))},{default:l(()=>[e(J,null,{default:l(()=>a[3]||(a[3]=[E("mdi:mdi-close")])),_:1})]),_:1})]),_:1})]),_:1}),e(De,{class:"pa-0"},{default:l(()=>[e(pe,null,{default:l(()=>[(f(!0),_(S,null,K(s.value,(m,V)=>(f(),b(fe,{key:m.ID,class:"mt-0"},{default:l(()=>[e(Ve,null,{actions:l(({expanded:U})=>[e(ee,{class:"mr-1",color:"red",icon:"mdi:mdi-close",size:"x-small",onClick:r=>o(V)},null,8,["onClick"]),e(J,{class:"align-self-center text-h5",icon:U?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:l(()=>[e(P,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:ie(U=>{y(Oe)(m,s.value),n(V,V-1)},["stop"])},null,8,["onClick"]),e(P,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:ie(U=>{y(Me)(m,s.value),n(V,V+1)},["stop"])},null,8,["onClick"]),E(" "+$(m.Name)+" ",1)]),_:2},1024),e(ce,{class:"px-0"},{default:l(()=>[e(gl,{convention:t.convention,modelValue:s.value[V],"onUpdate:modelValue":U=>s.value[V]=U},null,8,["convention","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Cl=O({__name:"Interests",props:{modelValue:{required:!0},modelModifiers:{}},emits:q(["refresh"],["update:modelValue"]),setup(g){const v=M(g,"modelValue"),u=B(),s=C([]);u.getConventionInterests(v.value.ConventionUUID).then(o=>{Ge(o),s.value=o});const p=C([""]),d=C(!1);return(o,n)=>(f(),_(S,null,[e(z,{fluid:!0,class:"px-0"},{default:l(()=>[e(x,null,{default:l(()=>[e(T,null,{default:l(()=>n[5]||(n[5]=[F("h3",null,"Interests",-1)])),_:1}),e(T,{class:"text-right"},{default:l(()=>[e(P,{color:"primary",onClick:n[0]||(n[0]=t=>d.value=!0)},{default:l(()=>n[6]||(n[6]=[E("Edit")])),_:1})]),_:1})]),_:1})]),_:1}),n[7]||(n[7]=F("p",null,"Attendees can tag themselves for particular things.",-1)),e(Fe,{opened:p.value,"onUpdate:opened":n[1]||(n[1]=t=>p.value=t)},{default:l(()=>[(f(!0),_(S,null,K(s.value,t=>(f(),b(ue,{key:t.ID,"prepend-icon":"mdi:mdi-checkbox-marked-outline",title:`${t.Name} ${t.Price&&t.Price>0?`(${y(w).currencySymbol}${t.Price})`:""}`},{default:l(()=>[t.Description?(f(),b(te,{key:0},{default:l(()=>[E($(t.Description),1)]),_:2},1024)):R("",!0)]),_:2},1032,["title"]))),128))]),_:1},8,["opened"]),e(Te,{modelValue:d.value,"onUpdate:modelValue":n[4]||(n[4]=t=>d.value=t),scrollable:!0,fullscreen:!0,persistent:!0},{default:l(()=>[e(bl,{onClose:n[2]||(n[2]=t=>d.value=!1),convention:v.value,modelValue:s.value,"onUpdate:modelValue":n[3]||(n[3]=t=>s.value=t)},null,8,["convention","modelValue"])]),_:1},8,["modelValue"])],64))}}),ye=O({__name:"SelectTickets",props:q({chips:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},hint:{default:"Tickets that belong to this group."},label:{default:"Tickets"},persistentHint:{type:Boolean,default:!1},tickets:{default:()=>[]},variant:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(g){const v=M(g,"modelValue"),u=p=>p.Type===G.TICKET_TYPE_GROUP?"mdi:mdi-group":p.Type===G.TICKET_TYPE_TICKET?p.RequiresAccommodation?"mdi:mdi-home":p.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket":p.Type===G.TICKET_TYPE_TICKET_COMPONENT?"mdi:mdi-cog-outline":p.Type===G.TICKET_TYPE_ADD_ON?"mdi:mdi-home-plus":"mdi:mdi-help",s=ae(()=>g.tickets.map(p=>({title:p.Name,value:v.value.find(d=>d&&d.TicketUUID===p.TicketUUID)||p,props:{appendIcon:u(p)}})));return(p,d)=>(f(),_("div",null,[e(nl,{label:p.label,variant:p.variant||"filled",items:s.value,"item-title":"title","item-value":"value","item-props":"props",modelValue:v.value,"onUpdate:modelValue":d[0]||(d[0]=o=>v.value=o),hint:p.hint,chips:p.chips,clearable:p.clearable,multiple:"","persistent-hint":p.persistentHint},null,8,["label","variant","items","modelValue","hint","chips","clearable","persistent-hint"])]))}}),kl=O({__name:"EditConventionTicket",props:q({accommodation:{default:()=>[]},convention:{},tickets:{default:()=>[]}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(g){const v=M(g,"modelValue"),u=C(H(v.value)),s=B(),p=ae(()=>g.tickets.filter(a=>a.Type===G.TICKET_TYPE_TICKET)),d=ae(()=>g.tickets.filter(a=>a.Type===G.TICKET_TYPE_ADD_ON)),o=ae(()=>g.tickets.filter(a=>a.Type===G.TICKET_TYPE_TICKET_COMPONENT)),n=a=>g.accommodation.filter(m=>m.Costs.find(V=>V.DateStart===a.DateStart&&V.DateEnd===a.DateEnd)),t=({callback:a})=>{s.saveTicket(u.value).then(m=>{m?(u.value.ID=m.ID,u.value.TicketUUID=m.TicketUUID,v.value=u.value,a&&a("Ticket Saved")):a&&a("Failed to Save Ticket")}).catch(()=>{a&&a("Failed to Save Ticket")})};return(a,m)=>(f(),b(z,{class:"px-0",fluid:""},{default:l(()=>[e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(X,{label:"Ticket Type",variant:"outlined",modelValue:u.value.Type,"onUpdate:modelValue":m[0]||(m[0]=V=>u.value.Type=V),items:y(ol),"item-title":"title","item-value":"value","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(N,{label:y(w).formLabelName,type:"text",variant:"outlined",modelValue:u.value.Name,"onUpdate:modelValue":m[1]||(m[1]=V=>u.value.Name=V),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(N,{label:y(w).formLabelDescription,type:"text",variant:"outlined",modelValue:u.value.Description,"onUpdate:modelValue":m[2]||(m[2]=V=>u.value.Description=V),"hide-details":""},null,8,["label","modelValue"])]),_:1}),u.value.Type!==y(G).TICKET_TYPE_GROUP?(f(),_(S,{key:0},[e(T,{cols:"12"},{default:l(()=>[e(W,{label:y(w).formLabelRequiresAccommodation,modelValue:u.value.RequiresAccommodation,"onUpdate:modelValue":m[3]||(m[3]=V=>u.value.RequiresAccommodation=V),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(N,{label:y(w).formLabelDateStart,type:"date",variant:"outlined",modelValue:u.value.DateStart,"onUpdate:modelValue":m[4]||(m[4]=V=>u.value.DateStart=V),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(N,{label:y(w).formLabelDateEnd,type:"date",variant:"outlined",modelValue:u.value.DateEnd,"onUpdate:modelValue":m[5]||(m[5]=V=>u.value.DateEnd=V),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(N,{label:y(w).formLabelPrice,type:"text",variant:"outlined","prepend-inner-icon":y(w).currencyIcon,modelValue:u.value.Price,"onUpdate:modelValue":m[6]||(m[6]=V=>u.value.Price=V),modelModifiers:{number:!0},"persistent-hint":"",hint:"Adds additional charges for selecting this ticket"},null,8,["label","prepend-inner-icon","modelValue"])]),_:1})],64)):(f(),b(T,{key:1,cols:"12"},{default:l(()=>[e(ye,{label:"Tickets",variant:"outlined",tickets:p.value,modelValue:u.value.Tickets,"onUpdate:modelValue":m[7]||(m[7]=V=>u.value.Tickets=V),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Tickets that belong to this group."},null,8,["tickets","modelValue"])]),_:1})),e(T,{cols:"12"},{default:l(()=>[e(Q,{label:"Applied Tags",variant:"outlined",modelValue:u.value.AppliesTags,"onUpdate:modelValue":m[8]||(m[8]=V=>u.value.AppliesTags=V),convention:a.convention,organisation:a.convention.OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user acquires by selecting this ticket."},null,8,["modelValue","convention","organisation"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(Q,{label:"Required Tags",variant:"outlined",modelValue:u.value.RequiredTags,"onUpdate:modelValue":m[9]||(m[9]=V=>u.value.RequiredTags=V),convention:a.convention,organisation:a.convention.OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user must have to see this ticket."},null,8,["modelValue","convention","organisation"])]),_:1}),u.value.Type===y(G).TICKET_TYPE_TICKET?(f(),_(S,{key:2},[e(T,{cols:"12"},{default:l(()=>[e(N,{label:"Components Required",type:"number",variant:"outlined",modelValue:u.value.ComponentsRequired,"onUpdate:modelValue":m[10]||(m[10]=V=>u.value.ComponentsRequired=V),modelModifiers:{number:!0},"persistent-hint":"",hint:"How many components must be selected."},null,8,["modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(ye,{label:"Components",variant:"outlined",tickets:o.value,modelValue:u.value.TicketComponents,"onUpdate:modelValue":m[11]||(m[11]=V=>u.value.TicketComponents=V),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Components that are part of this ticket (and others)."},null,8,["tickets","modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(ye,{label:"Addons",variant:"outlined",tickets:d.value,modelValue:u.value.AddonTickets,"onUpdate:modelValue":m[12]||(m[12]=V=>u.value.AddonTickets=V),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Optional ticket addons that apply for this ticket."},null,8,["tickets","modelValue"])]),_:1})],64)):R("",!0),e(T,{cols:"12"},{default:l(()=>[e(ye,{label:"Disables Tickets",variant:"outlined",tickets:a.tickets,modelValue:u.value.DisablesTickets,"onUpdate:modelValue":m[13]||(m[13]=V=>u.value.DisablesTickets=V),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Tickets that are mutually exclusive and can't be selected if this one is."},null,8,["tickets","modelValue"])]),_:1})]),_:1}),n(u.value).length?(f(),b(x,{key:0,class:"align-center",dense:!0},{default:l(()=>[e(T,{class:"flex-grow-0 flex-shrink-1 text-no-wrap font-italic"},{default:l(()=>m[14]||(m[14]=[F("p",{title:"Automatically calculated",class:"text-grey-lighten-1"},"Applicable Accommodation:",-1)])),_:1}),e(T,{class:"flex-grow-1"},{default:l(()=>[e(He,null,{default:l(()=>[(f(!0),_(S,null,K(n(u.value),V=>(f(),b(je,{key:V.ID,title:"Automatically calculated",disabled:!0},{default:l(()=>[E($(V.Name),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):R("",!0),e(x,null,{default:l(()=>[e(T,{class:"text-right"},{default:l(()=>[e(ee,{onClick:t})]),_:1})]),_:1})]),_:1}))}}),El={class:"pr-2"},_l={class:"mb-2"},Fl={key:0,class:"text-grey-darken-1 font-italic"},Sl={key:1,class:"text-red"},Al={key:0,class:"text-grey-darken-1 font-italic"},xl={key:1,class:"text-red"},Nl={key:0,class:"text-grey-darken-1 font-italic"},Pl={key:1,class:"text-red"},Rl={class:"text-grey-darken-1"},$l=O({__name:"EditConventionTickets",props:q({accommodation:{default:()=>[]},convention:{}},{modelValue:{default:[]},modelModifiers:{}}),emits:q(["close"],["update:modelValue"]),setup(g,{emit:v}){const u=M(g,"modelValue"),s=v,p=B(),d=()=>{u.value.push({ID:0,TicketUUID:L(),ConventionID:g.convention.ID,ConventionUUID:g.convention.ConventionUUID,Order:u.value.length+1,Name:"New Ticket",Type:G.TICKET_TYPE_GROUP,Description:"",DateStart:"",DateEnd:"",Price:0,Tickets:[],RequiresAccommodation:!1,AppliesTags:[],RequiredTags:[],RequiredGroupMemberships:[],TicketComponents:[],ComponentsRequired:0,AddonTickets:[],DisablesTickets:[]})},o=t=>{p.deleteTicket(u.value[t].TicketUUID).then(a=>{a&&u.value.splice(t,1)})},n=t=>t.Type===G.TICKET_TYPE_GROUP?"mdi:mdi-group":t.Type===G.TICKET_TYPE_TICKET?t.RequiresAccommodation?"mdi:mdi-home":t.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket":t.Type===G.TICKET_TYPE_TICKET_COMPONENT?"mdi:mdi-cog-outline":t.Type===G.TICKET_TYPE_ADD_ON?"mdi:mdi-home-plus":"mdi:mdi-help";return(t,a)=>(f(),b(re,null,{default:l(()=>[e(de,{dark:"",color:"primary"},{default:l(()=>[e(se,null,{default:l(()=>a[1]||(a[1]=[E("Edit Tickets")])),_:1}),e(oe),e(Ue,null,{default:l(()=>[e(P,{variant:"text",onClick:d},{default:l(()=>a[2]||(a[2]=[E(" Add Ticket ")])),_:1}),e(P,{icon:"",dark:"",onClick:a[0]||(a[0]=m=>s("close"))},{default:l(()=>[e(J,null,{default:l(()=>a[3]||(a[3]=[E("mdi:mdi-close")])),_:1})]),_:1})]),_:1})]),_:1}),e(De,{class:"pa-0"},{default:l(()=>[e(pe,null,{default:l(()=>[(f(!0),_(S,null,K(u.value,(m,V)=>(f(),b(fe,{key:m.ID,class:"mt-0"},{default:l(()=>[e(Ve,{class:"py-2"},{actions:l(({expanded:U})=>[e(ee,{class:"mr-1",color:"red",icon:"mdi:mdi-close",size:"x-small",onClick:r=>o(V)},null,8,["onClick"]),e(J,{class:"align-self-center text-h5",icon:U?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:l(()=>[e(P,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:ie(U=>y(Oe)(m,u.value),["stop"])},null,8,["onClick"]),e(P,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:ie(U=>y(Me)(m,u.value),["stop"])},null,8,["onClick"]),F("div",El,[e(J,{icon:n(m)},null,8,["icon"])]),F("div",null,[F("p",_l,[E($(m.Name)+" ",1),m.Type===y(G).TICKET_TYPE_TICKET?(f(),_(S,{key:0},[u.value.find(U=>U.Type===y(G).TICKET_TYPE_GROUP&&U.Tickets.find(r=>r&&r.TicketUUID===m.TicketUUID))?(f(),_("span",Fl," ("+$(u.value.filter(U=>U.Type===y(G).TICKET_TYPE_GROUP&&U.Tickets.find(r=>r&&r.TicketUUID===m.TicketUUID)).map(U=>U.Name).join(", "))+") ",1)):(f(),_("span",Sl," (Ticket does not belong to any categories.) "))],64)):R("",!0),m.Type===y(G).TICKET_TYPE_ADD_ON?(f(),_(S,{key:1},[u.value.find(U=>U.Type===y(G).TICKET_TYPE_TICKET&&U.AddonTickets.find(r=>r&&r.TicketUUID===m.TicketUUID))?(f(),_("span",Al," ("+$(u.value.filter(U=>U.Type===y(G).TICKET_TYPE_TICKET&&U.AddonTickets.find(r=>r&&r.TicketUUID===m.TicketUUID)).map(U=>U.Name).join(", "))+") ",1)):(f(),_("span",xl," (Ticket addon must be associated to at least one ticket.) "))],64)):R("",!0),m.Type===y(G).TICKET_TYPE_TICKET_COMPONENT?(f(),_(S,{key:2},[u.value.find(U=>U.Type===y(G).TICKET_TYPE_TICKET&&U.TicketComponents.find(r=>r&&r.TicketUUID===m.TicketUUID))?(f(),_("span",Nl," ("+$(u.value.filter(U=>U.Type===y(G).TICKET_TYPE_TICKET&&U.TicketComponents.find(r=>r&&r.TicketUUID===m.TicketUUID)).map(U=>U.Name).join(", "))+") ",1)):(f(),_("span",Pl," (Component has not been assigned to any tickets.) "))],64)):R("",!0)]),F("p",Rl,[m.Type===y(G).TICKET_TYPE_GROUP?(f(),_(S,{key:0},[E("Category")],64)):m.Type===y(G).TICKET_TYPE_TICKET?(f(),_(S,{key:1},[a[4]||(a[4]=E(" Ticket ")),m.ComponentsRequired>0?(f(),_(S,{key:0},[E(" ("+$(m.ComponentsRequired)+" component"+$(m.ComponentsRequired>1?"s":"")+" required) ",1)],64)):R("",!0)],64)):R("",!0),m.Type===y(G).TICKET_TYPE_TICKET_COMPONENT?(f(),_(S,{key:2},[E("Component")],64)):R("",!0),m.Type===y(G).TICKET_TYPE_ADD_ON?(f(),_(S,{key:3},[E("Addon")],64)):R("",!0)])])]),_:2},1024),e(ce,{class:"px-0"},{default:l(()=>[e(kl,{accommodation:t.accommodation,convention:t.convention,tickets:u.value,modelValue:u.value[V],"onUpdate:modelValue":U=>u.value[V]=U},null,8,["accommodation","convention","tickets","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Ol=O({__name:"Tickets",props:{modelValue:{required:!0},modelModifiers:{}},emits:q(["refresh"],["update:modelValue"]),setup(g){var V;const v=M(g,"modelValue"),u=B(),s=C([]),p=C([]);u.getConventionTickets(((V=v.value)==null?void 0:V.ConventionUUID)||"").then(U=>{Ge(U),s.value=U});const d=C([""]),o=C(!1),n=U=>U.AddonTickets&&U.AddonTickets.map(r=>s.value&&s.value.find(i=>i.ID===r.ID)),t=U=>U.TicketComponents&&U.TicketComponents.map(r=>s.value&&s.value.find(i=>i.ID===r.ID)),a=U=>"",m=U=>p.value.filter(r=>r.Costs.find(i=>i.DateStart===U.DateStart&&i.DateEnd===U.DateEnd)).map(r=>r.Name).join(", ");return(U,r)=>(f(),_(S,null,[e(z,{fluid:!0,class:"px-0"},{default:l(()=>[e(x,null,{default:l(()=>[e(T,null,{default:l(()=>r[5]||(r[5]=[F("h3",null,"Tickets",-1)])),_:1}),e(T,{class:"text-right"},{default:l(()=>[e(P,{color:"primary",onClick:r[0]||(r[0]=i=>o.value=!0)},{default:l(()=>r[6]||(r[6]=[E("Edit")])),_:1})]),_:1})]),_:1})]),_:1}),r[7]||(r[7]=F("p",null,"Ticket options, along with all sub-types and options applicable to them.",-1)),e(Fe,{opened:d.value,"onUpdate:opened":r[1]||(r[1]=i=>d.value=i)},{default:l(()=>[(f(!0),_(S,null,K(s.value.filter(i=>i.Type===y(G).TICKET_TYPE_GROUP),i=>(f(),b(xe,{key:i.ID,value:i.ID},{activator:l(({props:c})=>[e(ue,ge({ref_for:!0},c,{"prepend-icon":"mdi:mdi-group",title:i.Name}),null,16,["title"])]),default:l(()=>[(f(!0),_(S,null,K(s.value.filter(c=>i.Tickets.find(D=>D&&c&&D.TicketUUID===c.TicketUUID)),c=>(f(),_(S,{key:c.ID},[c.AddonTickets&&c.AddonTickets.length?(f(),b(xe,{key:0,value:c.ID},{activator:l(({props:D})=>[e(ue,ge({ref_for:!0},D,{"prepend-icon":c.RequiresAccommodation?"mdi:mdi-home":c.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",title:`${c.Name} ${c.Price>0?`(${y(w).currencySymbol}${c.Price})`:""}`}),{default:l(()=>[c.ComponentsRequired>0?(f(),b(te,{key:0},{default:l(()=>[E(" Options: "+$(t(c).map(A=>A&&A.Name).join(", ")),1)]),_:2},1024)):R("",!0),c.RequiresAccommodation&&m(c)?(f(),b(te,{key:1},{default:l(()=>[E(" Accommodation: "+$(m(c)),1)]),_:2},1024)):R("",!0)]),_:2},1040,["prepend-icon","title"])]),default:l(()=>[(f(!0),_(S,null,K(n(c),D=>(f(),_(S,{key:D},[D?(f(),b(ue,{key:0,title:`${D.Name} ${D.Price>0?`(${y(w).currencySymbol}${D.Price})`:""}`,"prepend-icon":"mdi:mdi-home-plus"},{default:l(()=>[D.RequiredTags&&D.RequiredTags.length>0?(f(),b(te,{key:0},{default:l(()=>[E(" Required Tags: "+$(D.RequiredTags.join(", ")),1)]),_:2},1024)):R("",!0),D.RequiredGroupMemberships&&D.RequiredGroupMemberships.length>0?(f(),b(te,{key:1},{default:l(()=>[E(" Required Groups: "+$(a(D.RequiredGroupMemberships)),1)]),_:2},1024)):R("",!0),m(D)?(f(),b(te,{key:2},{default:l(()=>[E(" Accommodation: "+$(m(D)),1)]),_:2},1024)):R("",!0)]),_:2},1032,["title"])):R("",!0)],64))),128))]),_:2},1032,["value"])):(f(),b(ue,{key:1,"prepend-icon":c.RequiresAccommodation?"mdi:mdi-home":c.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",title:`${c.Name} ${c.Price>0?`(${y(w).currencySymbol}${c.Price})`:""}`},{default:l(()=>[c.ComponentsRequired>0?(f(),b(te,{key:0},{default:l(()=>[E(" Options: "+$(t(c).map(D=>D&&D.Name).join(", ")),1)]),_:2},1024)):R("",!0)]),_:2},1032,["prepend-icon","title"]))],64))),128))]),_:2},1032,["value"]))),128))]),_:1},8,["opened"]),e(Te,{modelValue:o.value,"onUpdate:modelValue":r[4]||(r[4]=i=>o.value=i),scrollable:!0,fullscreen:!0,persistent:!0},{default:l(()=>[e($l,{onClose:r[2]||(r[2]=i=>o.value=!1),modelValue:s.value,"onUpdate:modelValue":r[3]||(r[3]=i=>s.value=i),accommodation:p.value,convention:v.value},null,8,["modelValue","accommodation","convention"])]),_:1},8,["modelValue"])],64))}}),Ml=O({__name:"VenueRoomCost",props:{modelValue:{required:!0},modelModifiers:{}},emits:q(["deleted"],["update:modelValue"]),setup(g,{emit:v}){const u=v,s=M(g,"modelValue"),p=[{title:"Per Room",value:"PER_ROOM"},{title:"Per Person",value:"PER_PERSON"}],d=()=>{u("deleted")};return(o,n)=>(f(),b(x,{dense:""},{default:l(()=>[e(T,{cols:"12",sm:"4",md:"2",lg:"2"},{default:l(()=>[e(N,{label:y(w).formLabelDateStart,type:"date",variant:"outlined",modelValue:s.value.DateStart,"onUpdate:modelValue":n[0]||(n[0]=t=>s.value.DateStart=t)},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"12",sm:"4",md:"2",lg:"2"},{default:l(()=>[e(N,{label:y(w).formLabelDateEnd,type:"date",variant:"outlined",modelValue:s.value.DateEnd,"onUpdate:modelValue":n[1]||(n[1]=t=>s.value.DateEnd=t)},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"6",sm:"4",md:"2",lg:"2"},{default:l(()=>[e(N,{label:y(w).formLabelAvailability,type:"number",variant:"outlined",modelValue:s.value.Availability,"onUpdate:modelValue":n[2]||(n[2]=t=>s.value.Availability=t),modelModifiers:{number:!0}},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"6",sm:"4",md:"2",lg:"2"},{default:l(()=>[e(N,{label:y(w).formLabelPrice,type:"number","prepend-inner-icon":"mdi:mdi-currency-gbp",variant:"outlined",modelValue:s.value.Price,"onUpdate:modelValue":n[3]||(n[3]=t=>s.value.Price=t),modelModifiers:{number:!0}},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"6",sm:"4",md:"3",lg:"3"},{default:l(()=>[e(X,{label:y(w).formLabelPriceType,variant:"outlined",modelValue:s.value.Type,"onUpdate:modelValue":n[4]||(n[4]=t=>s.value.Type=t),items:p,"item-value":"value","item-title":"title"},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"6",sm:"4",md:"1",class:"text-right"},{default:l(()=>[e(P,{color:"red",icon:"mdi:mdi-minus",onClick:d})]),_:1})]),_:1}))}}),wl={class:"d-flex flex-wrap justify-space-between",style:{gap:"1rem"}},ql=O({__name:"VenueRoom",props:{modelValue:{required:!0},modelModifiers:{}},emits:q(["deleted"],["update:modelValue"]),setup(g,{emit:v}){const u=B(),s=v,p=C(w),d=M(g,"modelValue"),o=C(H(d.value)),n=C(!1),t=r=>{switch(r.Type){case ke.PER_PERSON:return p.value.enumPER_PERSON;case ke.PER_ROOM:return p.value.enumPER_ROOM}return"Unknown"},a=()=>{o.value.Costs||(o.value.Costs=[]),o.value.Costs.push({ID:0,CostUUID:L(),Availability:0,DateStart:"",DateEnd:"",Price:0,Type:"PER_ROOM"})},m=r=>{o.value.Costs.splice(r,1)},V=({callback:r})=>{const i=()=>{r&&r("Failed to Delete Room")},c=()=>{r&&r("Room Deleted")};u.deleteRoom(o.value.RoomUUID).then(D=>{D?(c(),s("deleted",o.value)):i()}).catch(()=>{i()})},U=()=>{u.saveRoom(o.value).then(()=>{d.value=o.value,n.value=!1})};return(r,i)=>(f(),_(S,null,[e(z,{fluid:"",class:"pa-1 pa-sm-2"},{default:l(()=>[F("h4",null,$(o.value.Name),1),F("p",null,$(o.value.Notes),1),F("p",null,[i[7]||(i[7]=F("strong",null,"Capacity:",-1)),E(" "+$(o.value.MinimumCapacity)+" ",1),o.value.MinimumCapacity!=o.value.MaximumCapacity?(f(),_(S,{key:0},[E(" - "+$(o.value.MaximumCapacity),1)],64)):R("",!0)]),e(ul,{density:"compact"},{default:l(()=>[i[8]||(i[8]=F("thead",null,[F("tr",null,[F("th",null,"Date"),F("th",null,"Price"),F("th",null,"Availability")])],-1)),F("tbody",null,[(f(!0),_(S,null,K(o.value.Costs,c=>(f(),_("tr",{key:`venue-room-${o.value.ID}-cost-${c.ID}`},[F("td",null,$(c.DateStart)+" - "+$(c.DateEnd),1),F("td",null,$(p.value.currencySymbol)+$(c.Price)+" "+$(t(c)),1),F("td",null,$(c.Availability),1)]))),128))])]),_:1}),F("div",wl,[e(P,{color:"primary","prepend-icon":"mdi:mdi-playlist-edit",onClick:i[0]||(i[0]=c=>n.value=!0)},{default:l(()=>i[9]||(i[9]=[E("Edit Room")])),_:1}),e(ee,{color:"red-darken-3","prepend-icon":"mdi:mdi-minus",onClick:V},{default:l(()=>i[10]||(i[10]=[E("Delete Room")])),_:1})])]),_:1}),e(Te,{scrollable:"",modelValue:n.value,"onUpdate:modelValue":i[6]||(i[6]=c=>n.value=c),width:"auto"},{default:l(()=>[e(re,null,{default:l(()=>[e(de,{dark:"",color:"primary"},{default:l(()=>[e(P,{icon:"",dark:"",onClick:i[1]||(i[1]=c=>n.value=!1)},{default:l(()=>[e(J,null,{default:l(()=>i[11]||(i[11]=[E("mdi:mdi-close")])),_:1})]),_:1}),e(se,null,{default:l(()=>[E("Room Details ("+$(o.value.Name)+")",1)]),_:1}),e(oe),e(Ue,null,{default:l(()=>[e(P,{variant:"text",onClick:U},{default:l(()=>i[12]||(i[12]=[E(" Save ")])),_:1})]),_:1})]),_:1}),e(De,null,{default:l(()=>[e(le,null,{default:l(()=>[e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(N,{label:p.value.formLabelName,type:"text",variant:"outlined",modelValue:o.value.Name,"onUpdate:modelValue":i[2]||(i[2]=c=>o.value.Name=c)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(T,null,{default:l(()=>[e(me,{label:p.value.formLabelNotes,variant:"outlined",modelValue:o.value.Notes,"onUpdate:modelValue":i[3]||(i[3]=c=>o.value.Notes=c)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(T,{cols:"12",sm:"6"},{default:l(()=>[e(N,{type:"number",label:p.value.formLabelMinimumCapacity,variant:"outlined",modelValue:o.value.MinimumCapacity,"onUpdate:modelValue":i[4]||(i[4]=c=>o.value.MinimumCapacity=c),modelModifiers:{number:!0}},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"12",sm:"6"},{default:l(()=>[e(N,{type:"number",label:p.value.formLabelMaximumCapacity,variant:"outlined",modelValue:o.value.MaximumCapacity,"onUpdate:modelValue":i[5]||(i[5]=c=>o.value.MaximumCapacity=c),modelModifiers:{number:!0}},null,8,["label","modelValue"])]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(T,null,{default:l(()=>i[13]||(i[13]=[F("h4",null," Availability & Costs (To Organisation) ",-1)])),_:1})]),_:1}),(f(!0),_(S,null,K(o.value.Costs,(c,D)=>(f(),_(S,{key:`venue-room-${o.value.ID}-cost-${c.ID}`},[o.value.Costs&&o.value.Costs[D]?(f(),b(Ml,{key:0,modelValue:o.value.Costs[D],"onUpdate:modelValue":A=>o.value.Costs[D]=A,onDeleted:A=>m(D)},null,8,["modelValue","onUpdate:modelValue","onDeleted"])):R("",!0)],64))),128)),e(P,{color:"primary","prepend-icon":"mdi:mdi-plus",onClick:a},{default:l(()=>i[14]||(i[14]=[E("Add Row")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),Ll=O({__name:"Venue",props:{modelValue:{required:!0},modelModifiers:{}},emits:q(["deleted"],["update:modelValue"]),setup(g,{emit:v}){const u=B(),s=v,p=M(g,"modelValue"),d=C(H(p.value)),o=C([]),n=C(!1),t=C(!1);u.getVenueRooms(d.value.VenueUUID).then(r=>{o.value=r}),Z(d.value,()=>{t.value=!0});const a=({callback:r})=>{n.value=!0,u.saveVenue(d.value).then(()=>{n.value=!1,t.value=!1,p.value=d.value,r&&r("Venue Saved")}).catch(()=>{n.value=!1,r&&r("Failed to Saved Venue")})},m=({callback:r})=>{n.value=!0,u.deleteVenue(d.value.VenueUUID).then(i=>{n.value=!1,i?r&&(r("Venue Deleted"),s("deleted")):r&&r("Failed to Delete Venue")}).catch(()=>{r&&(r("Failed to Delete Venue"),n.value=!1)})},V=()=>{const r={ID:0,RoomUUID:L(),VenueID:d.value.ID,VenueUUID:d.value.VenueUUID,Order:o.value.length+1,Name:"New Room",Notes:"",MaximumCapacity:1,MinimumCapacity:1,Costs:[]};u.saveRoom(r).then(i=>{i&&o.value.push(i)})},U=(r,i)=>{u.deleteRoom(o.value[i].RoomUUID).then(c=>{c&&o.value.splice(i,1)})};return(r,i)=>(f(),b(fe,null,{default:l(()=>[e(Ve,null,{default:l(()=>[E($(d.value.Name),1)]),_:1}),e(ce,null,{default:l(()=>[e(x,{"no-gutters":""},{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(N,{label:y(w).formLabelName,name:"name",variant:"outlined",modelValue:d.value.Name,"onUpdate:modelValue":i[0]||(i[0]=c=>d.value.Name=c)},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(me,{label:y(w).formLabelDescription,name:"description",variant:"outlined",modelValue:d.value.Description,"onUpdate:modelValue":i[1]||(i[1]=c=>d.value.Description=c)},null,8,["label","modelValue"])]),_:1}),e(T,{class:"text-right",cols:"12"},{default:l(()=>[e(ee,{class:"mr-2",color:"red-darken-3",label:"Delete",onClick:m}),e(ee,{enabled:t.value,timeout:"7",onClick:a},null,8,["enabled"])]),_:1})]),_:1}),i[3]||(i[3]=F("h3",null,"Rooms",-1)),(f(!0),_(S,null,K(o.value,(c,D)=>(f(),b(le,{variant:"elevation",elevation:"6",key:`venue-room-${c.ID}`},{default:l(()=>[o.value&&o.value[D]?(f(),b(ql,{key:0,modelValue:o.value[D],"onUpdate:modelValue":A=>o.value[D]=A,onDeleted:A=>U(A,D)},null,8,["modelValue","onUpdate:modelValue","onDeleted"])):R("",!0)]),_:2},1024))),128)),e(le,{class:"ma-2"},{default:l(()=>[e(P,{color:"primary","prepend-icon":"mdi:mdi-plus",onClick:V},{default:l(()=>i[2]||(i[2]=[E("Add Room")])),_:1})]),_:1})]),_:1})]),_:1}))}}),Kl=O({__name:"VenuesEditorView",props:{modelValue:{required:!0},modelModifiers:{}},emits:q(["close","pageTitle","refresh"],["update:modelValue"]),setup(g,{emit:v}){const u=B(),s=v,p=M(g,"modelValue");s("pageTitle","Venues");const d=C([]);u.getConventionVenues(p.value.ConventionUUID).then(t=>{d.value=t});const o=()=>{const t={ID:0,VenueUUID:L(),ConventionID:p.value.ID,ConventionUUID:p.value.ConventionUUID,Order:d.value.length+1,Name:"New Venue",Description:"",Rooms:[]};u.saveVenue(t).then(a=>{a&&d.value.push(a)})},n=t=>{d.value.splice(t,1)};return(t,a)=>(f(),_(S,null,[e(z,{fluid:"",class:"px-0"},{default:l(()=>[e(x,null,{default:l(()=>[e(T,null,{default:l(()=>a[0]||(a[0]=[F("h3",null,"Venues",-1)])),_:1})]),_:1})]),_:1}),a[2]||(a[2]=F("p",null," Venues and the rooms they supply to the organisation, this is internal data not seen by attendees. ",-1)),a[3]||(a[3]=F("p",null," Attendee options are configured via the accommodation tab. ",-1)),e(le,null,{default:l(()=>[e(pe,{variant:"accordion"},{default:l(()=>[(f(!0),_(S,null,K(d.value,(m,V)=>(f(),b(Ll,{key:`venues-${m.ID}`,modelValue:d.value[V],"onUpdate:modelValue":U=>d.value[V]=U,onDeleted:U=>n(V)},null,8,["modelValue","onUpdate:modelValue","onDeleted"]))),128))]),_:1}),e(le,{class:"pa-2"},{default:l(()=>[e(P,{color:"primary",onClick:o},{default:l(()=>a[1]||(a[1]=[E("Add Venue")])),_:1})]),_:1})]),_:1})],64))}}),Gl=O({__name:"AccommodationCost",props:q({convention:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:q(["deleted"],["update:modelValue"]),setup(g,{emit:v}){const u=v,s=M(g,"modelValue"),p=C([]);B().getConventionTickets(g.convention.ConventionUUID).then(a=>{a&&(p.value=a)});const o=[{title:"Per Room",value:"PER_ROOM"},{title:"Per Person",value:"PER_PERSON"}],n=()=>{u("deleted")},t=ae(()=>p.value.filter(a=>(a.Type===G.TICKET_TYPE_TICKET||a.Type===G.TICKET_TYPE_ADD_ON)&&a.RequiresAccommodation&&a.DateStart===s.value.DateStart&&a.DateEnd===s.value.DateEnd));return(a,m)=>(f(),_(S,null,[e(x,{class:"align-center",dense:""},{default:l(()=>[e(T,{class:"flex-grow-0 flex-shrink-1 text-no-wrap font-italic"},{default:l(()=>m[4]||(m[4]=[F("p",{title:"Automatically calculated",class:"text-grey-lighten-1"},"Applicable Tickets:",-1)])),_:1}),e(T,{class:"flex-grow-1"},{default:l(()=>[e(He,null,{default:l(()=>[(f(!0),_(S,null,K(t.value,V=>(f(),b(je,{key:V.ID,title:"Automatically calculated",disabled:""},{default:l(()=>[E($(V.Name),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(x,{dense:""},{default:l(()=>[e(T,{cols:"12",sm:"6",md:"3"},{default:l(()=>[e(N,{label:y(w).formLabelDateStart,type:"date",variant:"outlined",modelValue:s.value.DateStart,"onUpdate:modelValue":m[0]||(m[0]=V=>s.value.DateStart=V)},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"12",sm:"6",md:"3"},{default:l(()=>[e(N,{label:y(w).formLabelDateEnd,type:"date",variant:"outlined",modelValue:s.value.DateEnd,"onUpdate:modelValue":m[1]||(m[1]=V=>s.value.DateEnd=V)},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"5",sm:"6",md:"3"},{default:l(()=>[e(N,{label:y(w).formLabelPrice,type:"number","prepend-inner-icon":"mdi:mdi-currency-gbp",variant:"outlined",modelValue:s.value.Price,"onUpdate:modelValue":m[2]||(m[2]=V=>s.value.Price=V),modelModifiers:{number:!0}},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"5",sm:"4",md:"2"},{default:l(()=>[e(X,{label:y(w).formLabelPriceType,variant:"outlined",modelValue:s.value.Type,"onUpdate:modelValue":m[3]||(m[3]=V=>s.value.Type=V),items:o,"item-value":"value","item-title":"title"},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"2",sm:"2",md:"1",class:"text-right"},{default:l(()=>[e(P,{color:"red",icon:"mdi:mdi-minus",onClick:n})]),_:1})]),_:1})],64))}}),hl=O({__name:"Accommodation",props:q({convention:{},venues:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:q(["deleted"],["update:modelValue"]),setup(g,{emit:v}){const u=B(),s=v,p=M(g,"modelValue"),d=C(H(p.value)),o=ae(()=>g.venues.map(V=>V.Rooms.map(U=>({title:` ${V.Name} - ${U.Name}`,value:U}))).flat()),n=()=>{d.value.Costs||(d.value.Costs=[]),d.value.Costs.push({ID:0,CostUUID:L(),Availability:0,DateStart:"",DateEnd:"",Price:0,Type:ke.PER_ROOM})},t=V=>{d.value.Costs.splice(V,1)},a=({callback:V})=>{u.deleteAccommodation(d.value.AccommodationUUID).then(U=>{U?V&&(V("Accommodation Deleted"),s("deleted")):V&&V("Failed to Delete Accommodation")}).catch(()=>{V&&V("Failed to Delete Accommodation")})},m=({callback:V})=>{u.saveAccommodation(d.value).then(U=>{U?(d.value.ID=U.ID,p.value=U,V&&V("Accommodation Saved")):V&&V("Failed to Save Accommodation")}).catch(()=>{V&&V("Failed to Save Accommodation")})};return(V,U)=>(f(),b(fe,null,{default:l(()=>[e(Ve,null,{default:l(()=>[E($(d.value.Name),1)]),_:1}),e(ce,null,{default:l(()=>[e(le,null,{default:l(()=>[e(x,null,{default:l(()=>[e(T,null,{default:l(()=>[e(N,{modelValue:d.value.Name,"onUpdate:modelValue":U[0]||(U[0]=r=>d.value.Name=r),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(T,null,{default:l(()=>[U[3]||(U[3]=F("h4",null," Room Pool ",-1)),U[4]||(U[4]=F("p",{class:"mb-4"}," Hotel rooms that can be used for this accommodation option. ",-1)),e(X,{clearable:!0,modelValue:d.value.Pool,"onUpdate:modelValue":U[1]||(U[1]=r=>d.value.Pool=r),items:o.value,label:"Select",multiple:"",hint:"Pick appropriate rooms","persistent-hint":"",variant:"outlined","item-title":"title","item-value":"value",eager:!0},null,8,["modelValue","items"]),U[5]||(U[5]=F("p",null," Pool total: ",-1)),F("p",null,[e(Q,{label:"Required Tags",variant:"outlined",modelValue:d.value.RequiredTags,"onUpdate:modelValue":U[2]||(U[2]=r=>d.value.RequiredTags=r),convention:V.convention,organisation:V.convention.OrganisationUUID,chips:!0,clearable:!0,hint:"Tags that a user must have to select this accommodation."},null,8,["modelValue","convention","organisation"])]),U[6]||(U[6]=F("h4",null," Accommodation Costs ",-1)),U[7]||(U[7]=F("p",{class:"mb-4"}," How much the attendee is charged by the convention for the accommodation. ",-1)),d.value.Costs?(f(!0),_(S,{key:0},K(d.value.Costs,(r,i)=>(f(),b(Gl,{key:`venue-room-${d.value.ID}-cost-${r.ID}`,convention:V.convention,modelValue:d.value.Costs[i],"onUpdate:modelValue":c=>d.value.Costs[i]=c,onDeleted:c=>t(i)},null,8,["convention","modelValue","onUpdate:modelValue","onDeleted"]))),128)):R("",!0)]),_:1})]),_:1}),e(x,{"no-gutters":""},{default:l(()=>[e(T,{class:"text-left"},{default:l(()=>[e(P,{color:"primary","prepend-icon":"mdi:mdi-plus",onClick:n},{default:l(()=>U[8]||(U[8]=[E("Add Row")])),_:1})]),_:1}),e(T,{class:"text-right"},{default:l(()=>[e(ee,{class:"mr-2",color:"red-darken-3",label:"Delete",onClick:a}),e(ee,{onClick:m})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),Bl=O({__name:"AccommodationEditorView",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(g){const v=B(),u=M(g,"modelValue"),s=C([]),p=C([]);v.getConventionAccommodation(u.value.ConventionUUID).then(n=>{n&&(s.value=n)}),v.getConventionVenues(u.value.ConventionUUID).then(n=>{n&&(p.value=n)});const d=()=>{const n={ID:0,AccommodationUUID:L(),ConventionID:u.value.ID,ConventionUUID:u.value.ConventionUUID,Order:s.value.length+1,Name:"New Accommodation Option",Pool:[],Costs:[],RequiredTags:[]};v.saveAccommodation(n).then(t=>{t&&s.value.push(t)})},o=n=>{s.value.splice(n,1)};return(n,t)=>(f(),_(S,null,[e(z,{fluid:!0,class:"px-0"},{default:l(()=>[e(x,null,{default:l(()=>[e(T,null,{default:l(()=>t[0]||(t[0]=[F("h3",null,"Accommodation",-1)])),_:1})]),_:1})]),_:1}),t[2]||(t[2]=F("p",null," Accommodation options presented to attendees, these are effectively virtual room types which are linked to the available room pools created in the venues tab. ",-1)),t[3]||(t[3]=F("p",null," Use the venues tab to configure internal data about the venues and room supply. ",-1)),e(le,null,{default:l(()=>[e(pe,{variant:"accordion"},{default:l(()=>[(f(!0),_(S,null,K(s.value,(a,m)=>(f(),b(hl,{key:a.AccommodationUUID,convention:u.value,venues:p.value,modelValue:s.value[m],"onUpdate:modelValue":V=>s.value[m]=V,onDeleted:V=>o(m)},null,8,["convention","venues","modelValue","onUpdate:modelValue","onDeleted"]))),128))]),_:1}),e(le,{class:"pa-2"},{default:l(()=>[e(P,{color:"primary",onClick:d},{default:l(()=>t[1]||(t[1]=[E("Add Accommodation")])),_:1})]),_:1})]),_:1})],64))}}),Yl=O({__name:"EditFieldDialogExtras",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(g){const v=M(g,"modelValue"),u=Ee.getInstance(),s=C([]),p=C([]);return u==null||u.getConventionExtras(v.value.ConventionUUID).then(d=>{s.value=d;const o=v.value.Values.find(n=>n.Title==="SelectedExtras");if(o)try{p.value=JSON.parse(o.Value)}catch{}}),Z(p,()=>{const d=v.value.Values.find(o=>o.Title==="SelectedExtras");if(d)d.Value=JSON.stringify(p.value);else{const o={ID:0,FieldValueUUID:L(),FieldID:v.value.ID,FieldUUID:v.value.FieldUUID,Title:"SelectedExtras",Value:JSON.stringify(p.value)};v.value.Values.push(o)}}),(d,o)=>(f(!0),_(S,null,K(s.value,n=>(f(),b(W,{key:n.ExtraUUID,modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=t=>p.value=t),label:n.Name,value:n.ExtraUUID,name:v.value.Name,"hide-details":""},null,8,["modelValue","label","value","name"]))),128))}}),Hl=O({__name:"EditFieldDialogInterests",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(g){const v=M(g,"modelValue"),u=Ee.getInstance(),s=C([]),p=C([]);return u==null||u.getConventionInterests(v.value.ConventionUUID).then(d=>{s.value=d;const o=v.value.Values.find(n=>n.Title==="SelectedInterests");if(o)try{p.value=JSON.parse(o.Value)}catch{}}),Z(p,()=>{const d=v.value.Values.find(o=>o.Title==="SelectedInterests");if(d)d.Value=JSON.stringify(p.value);else{const o={ID:0,FieldValueUUID:L(),FieldID:v.value.ID,FieldUUID:v.value.FieldUUID,Title:"SelectedInterests",Value:JSON.stringify(p.value)};v.value.Values.push(o)}}),(d,o)=>(f(!0),_(S,null,K(s.value,n=>(f(),b(W,{key:n.InterestUUID,modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=t=>p.value=t),label:n.Name,value:n.InterestUUID,name:v.value.Name,"hide-details":""},null,8,["modelValue","label","value","name"]))),128))}}),jl=O({__name:"EditFieldDialogTickets",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(g){const v=M(g,"modelValue"),u=Ee.getInstance(),s=C([]),p=C([]);return u==null||u.getConventionTickets(v.value.ConventionUUID).then(d=>{s.value=d;const o=v.value.Values.find(n=>n.Title==="SelectedTickets");if(o)try{p.value=JSON.parse(o.Value)}catch{}}),Z(p,()=>{const d=v.value.Values.find(o=>o.Title==="SelectedTickets");if(d)d.Value=JSON.stringify(p.value);else{const o={ID:0,FieldValueUUID:L(),FieldID:v.value.ID,FieldUUID:v.value.FieldUUID,Title:"SelectedTickets",Value:JSON.stringify(p.value)};v.value.Values.push(o)}}),(d,o)=>(f(!0),_(S,null,K(s.value.filter(n=>n&&n.Type===y(G).TICKET_TYPE_GROUP),n=>(f(),b(W,{key:n.TicketUUID,modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=t=>p.value=t),label:n.Name,value:n.TicketUUID,name:v.value.Name,"hide-details":""},null,8,["modelValue","label","value","name"]))),128))}}),zl=O({__name:"EditFieldDialogAccommodation",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(g){const v=M(g,"modelValue"),u=Ee.getInstance(),s=C([]),p=C(v.value.Values.map(n=>n.Value)),d=C({sharing:!1});try{const n=JSON.parse(v.value.Data);n&&(d.value=n)}catch{}const o=()=>{v.value.Data=JSON.stringify(d.value),v.value.Values=p.value.map(n=>{var t,a,m;return{ID:0,FieldValueUUID:L(),FieldID:((t=v.value)==null?void 0:t.ID)||0,FieldUUID:((a=v.value)==null?void 0:a.FieldUUID)||"",Title:((m=s.value.find(V=>V.AccommodationUUID==n))==null?void 0:m.Name)||"",Value:n}})};return u==null||u.getConventionAccommodation(v.value.ConventionUUID).then(n=>{n&&(s.value=n)}),(n,t)=>(f(),_(S,null,[t[2]||(t[2]=F("h5",null,"Display Options",-1)),e(W,{label:"Show Sharing Options",modelValue:d.value.sharing,"onUpdate:modelValue":t[0]||(t[0]=a=>d.value.sharing=a),"hide-details":"",onChange:o},null,8,["modelValue"]),t[3]||(t[3]=F("h5",null,"Accommodation Choices",-1)),(f(!0),_(S,null,K(s.value,a=>(f(),b(W,{key:a.ID,modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=m=>p.value=m),label:a.Name,value:a.AccommodationUUID,"hide-details":"",onChange:o},null,8,["modelValue","label","value"]))),128))],64))}}),Jl=O({__name:"EditFieldDialogAge",props:q({convention:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(g){var m,V,U;const v=M(g,"modelValue"),u=new Date,s=u.getFullYear(),p=(u.getMonth()+1).toLocaleString(navigator.language,{minimumIntegerDigits:2}),d=u.getDate().toLocaleString(navigator.language,{minimumIntegerDigits:2}),o=C(parseInt(((m=v.value.Values.find(r=>r.Title==="MIN_AGE"))==null?void 0:m.Value)||"18")),n=C(((V=v.value.Values.find(r=>r.Title==="BEFORE_DATE"))==null?void 0:V.Value)||`${s}-${p}-${d}`),t=C(((U=v.value.Values.find(r=>r.Title==="UNDER_AGE_APPLY_TAG"))==null?void 0:U.Value)||""),a=()=>{var r,i,c,D,A,I;v.value.Values=[{ID:0,FieldValueUUID:L(),FieldID:((r=v.value)==null?void 0:r.ID)||0,FieldUUID:((i=v.value)==null?void 0:i.FieldUUID)||"",Title:"MIN_AGE",Value:o.value.toString()},{ID:0,FieldValueUUID:L(),FieldID:((c=v.value)==null?void 0:c.ID)||0,FieldUUID:((D=v.value)==null?void 0:D.FieldUUID)||"",Title:"BEFORE_DATE",Value:n.value},{ID:0,FieldValueUUID:L(),FieldID:((A=v.value)==null?void 0:A.ID)||0,FieldUUID:((I=v.value)==null?void 0:I.FieldUUID)||"",Title:"UNDER_AGE_APPLY_TAG",Value:t.value}]};return a(),(r,i)=>(f(),b(z,{class:"pl-0 pr-0",fluid:!0},{default:l(()=>[e(x,null,{default:l(()=>[e(T,{cols:"12",sm:"6"},{default:l(()=>[e(N,{modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=c=>o.value=c),modelModifiers:{number:!0},type:"number",label:"Minimum Age",variant:"outlined",onChange:a},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"6"},{default:l(()=>[e(N,{modelValue:n.value,"onUpdate:modelValue":i[1]||(i[1]=c=>n.value=c),type:"date",label:"Date to attain minimum age by",variant:"outlined",onChange:a},null,8,["modelValue"])]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(T,null,{default:l(()=>[e(Q,{modelValue:t.value,"onUpdate:modelValue":i[2]||(i[2]=c=>t.value=c),convention:r.convention,chips:!0,clearable:!0,variant:"outlined",label:`Tags applied to users under ${o.value} at time of data entry`,onChange:a},null,8,["modelValue","convention","label"])]),_:1})]),_:1})]),_:1}))}}),Wl=O({__name:"EditFieldDialogHTML",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(g){const v=M(g,"modelValue"),u=C({html:""});try{const p=JSON.parse(v.value.Data);p&&(u.value=p)}catch{}const s=()=>{v.value.Data=JSON.stringify(u.value)};return(p,d)=>(f(),b(me,{variant:"outlined",label:"Raw HTML",modelValue:u.value.html,"onUpdate:modelValue":d[0]||(d[0]=o=>u.value.html=o),onKeydown:s,onChange:s},null,8,["modelValue"]))}}),Xl=O({__name:"EditFieldDialogBadgeImage",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(g){const v=M(g,"modelValue"),u=C({charge:0,free:0,height:0,label:!1,maximum:0,tags:[],width:0});try{u.value=il(v.value.Data)}catch{}const s=()=>{v.value.Data=JSON.stringify(u.value)};return(p,d)=>(f(),_(S,null,[d[7]||(d[7]=F("h5",{class:"my-2"},"Tags & Labels",-1)),e(x,null,{default:l(()=>[e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(Q,{label:"Badge Tags",variant:"outlined",modelValue:u.value.tags,"onUpdate:modelValue":d[0]||(d[0]=o=>u.value.tags=o),convention:v.value.ConventionUUID,chips:"",clearable:"",hint:"Tags that apply to this badge.","input-type":y(tl).UUID_ARRAY,onChange:s},null,8,["modelValue","convention","input-type"])]),_:1}),e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(W,{modelValue:u.value.label,"onUpdate:modelValue":d[1]||(d[1]=o=>u.value.label=o),label:"Allow Custom Label",variant:"outlined","hide-details":"",onChange:s},null,8,["modelValue"])]),_:1})]),_:1}),d[8]||(d[8]=F("h5",{class:"my-2"},"Dimensions",-1)),e(x,null,{default:l(()=>[e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(N,{modelValue:u.value.width,"onUpdate:modelValue":d[2]||(d[2]=o=>u.value.width=o),modelModifiers:{number:!0},label:"Width",variant:"outlined","hide-details":"",type:"number",step:"10",min:"0",onChange:s},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(N,{modelValue:u.value.height,"onUpdate:modelValue":d[3]||(d[3]=o=>u.value.height=o),modelModifiers:{number:!0},label:"Height",variant:"outlined","hide-details":"",type:"number",step:"10",min:"0",onChange:s},null,8,["modelValue"])]),_:1})]),_:1}),d[9]||(d[9]=F("h5",{class:"my-2"},"Limits",-1)),e(x,null,{default:l(()=>[e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(N,{modelValue:u.value.maximum,"onUpdate:modelValue":d[4]||(d[4]=o=>u.value.maximum=o),modelModifiers:{number:!0},label:"Maximum Badges",hint:"Zero = Unlimited",variant:"outlined",type:"number",min:"0",onChange:s},null,8,["modelValue"])]),_:1})]),_:1}),d[10]||(d[10]=F("h5",{class:"my-2"},"Costs",-1)),e(x,null,{default:l(()=>[e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(N,{modelValue:u.value.charge,"onUpdate:modelValue":d[5]||(d[5]=o=>u.value.charge=o),modelModifiers:{number:!0},label:"Charge Per Badge",prefix:y(w).currencySymbol,variant:"outlined","hide-details":"",type:"number",min:"0",onChange:s},null,8,["modelValue","prefix"])]),_:1}),e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(N,{modelValue:u.value.free,"onUpdate:modelValue":d[6]||(d[6]=o=>u.value.free=o),modelModifiers:{number:!0},label:"Free Badges",variant:"outlined","hide-details":"",type:"number",min:"0",onChange:s},null,8,["modelValue"])]),_:1})]),_:1})],64))}}),Zl={key:0},Ql={key:1},et=O({__name:"EditFieldDialog",props:q({convention:{},field:{},title:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:q(["update:field"],["update:modelValue"]),setup(g,{emit:v}){const u=g,{convention:s,title:p=""}=u,d=v,o=M(g,"modelValue"),n=ve(u,d,void 0,void 0,"field"),t=C(H(n.value)),a=C(""),m=C(t.value.Type);Z(n,()=>{t.value=H(n.value)});const V=()=>{o.value=!1},U=()=>{t.value=H(n.value)},r=()=>{n.value=t.value},i=()=>{t.value.Values.push({ID:0,FieldValueUUID:L(),FieldID:t.value.ID,FieldUUID:t.value.FieldUUID,Title:"",Value:""})},c=A=>{t.value.Values.splice(A,1)},D=()=>{a.value="",t.value.Values=[]};return Z(m,(A,I)=>{A!==I&&(t.value.Type=A,D())}),(A,I)=>(f(),b(qe,{modelValue:o.value,"onUpdate:modelValue":I[16]||(I[16]=k=>o.value=k),onReset:U,onSave:r,title:y(p),color:"primary",persistent:!0,fullscreen:!0},{default:l(()=>[e(z,{class:"pa-0",fluid:!0},{default:l(()=>[e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(z,{class:"pa-0",fluid:!0},{default:l(()=>[e(x,null,{default:l(()=>[e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(N,{modelValue:t.value.Name,"onUpdate:modelValue":I[0]||(I[0]=k=>t.value.Name=k),label:"Internal name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(N,{modelValue:t.value.Label,"onUpdate:modelValue":I[1]||(I[1]=k=>t.value.Label=k),label:"Label",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(N,{modelValue:t.value.Hint,"onUpdate:modelValue":I[2]||(I[2]=k=>t.value.Hint=k),label:"Hint",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(N,{modelValue:t.value.Placeholder,"onUpdate:modelValue":I[3]||(I[3]=k=>t.value.Placeholder=k),label:"Placeholder",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(X,{modelValue:m.value,"onUpdate:modelValue":I[4]||(I[4]=k=>m.value=k),label:"Type",variant:"outlined",items:y(ze),"hide-details":""},null,8,["modelValue","items"])]),_:1}),t.value.Type===y(Y).SELECT||t.value.Type===y(Y).CHECKBOX||t.value.Type===y(Y).BADGE_IMAGE?(f(),b(T,{key:0,cols:"12",sm:"6",md:"4",class:"py-0"},{default:l(()=>[t.value.Type===y(Y).SELECT||t.value.Type===y(Y).CHECKBOX?(f(),b(W,{key:0,modelValue:t.value.Multiple,"onUpdate:modelValue":I[5]||(I[5]=k=>t.value.Multiple=k),label:"Multiple Items",hint:"Can select multiple items from list","hide-details":"",density:"compact"},null,8,["modelValue"])):t.value.Type===y(Y).BADGE_IMAGE?(f(),b(W,{key:1,modelValue:t.value.Multiple,"onUpdate:modelValue":I[6]||(I[6]=k=>t.value.Multiple=k),label:"Custom Fields",hint:"Enable additional badge fields","hide-details":""},null,8,["modelValue"])):R("",!0),t.value.Type===y(Y).SELECT?(f(),b(W,{key:2,modelValue:t.value.Autofill,"onUpdate:modelValue":I[7]||(I[7]=k=>t.value.Autofill=k),label:"Searchable List","hide-details":"",density:"compact"},null,8,["modelValue"])):R("",!0)]),_:1})):R("",!0)]),_:1}),t.value.Type===y(Y).BADGE_IMAGE?(f(),b(x,{key:0},{default:l(()=>[e(T,null,{default:l(()=>[I[17]||(I[17]=F("h4",null,"Badge Image Options",-1)),e(Xl,{modelValue:t.value,"onUpdate:modelValue":I[8]||(I[8]=k=>t.value=k)},null,8,["modelValue"])]),_:1})]),_:1})):R("",!0),t.value.Type===y(Y).SELECT||t.value.Type===y(Y).CHECKBOX&&t.value.Multiple||t.value.Type===y(Y).RADIO||t.value.Type===y(Y).BADGE_IMAGE&&t.value.Multiple?(f(),b(x,{key:1},{default:l(()=>[e(T,null,{default:l(()=>[t.value.Type===y(Y).BADGE_IMAGE?(f(),_("h4",Zl,"Custom Fields")):(f(),_("h4",Ql,"Values")),e(z,{fluid:!0,class:"px-0"},{default:l(()=>[(f(!0),_(S,null,K(t.value.Values,(k,h)=>(f(),b(x,{key:k.ID},{default:l(()=>[e(T,{cols:"12",sm:"5",md:"6"},{default:l(()=>[e(N,{modelValue:k.Title,"onUpdate:modelValue":j=>k.Title=j,label:"Display",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(T,{cols:"9",sm:"5",md:"5"},{default:l(()=>[e(N,{modelValue:k.Value,"onUpdate:modelValue":j=>k.Value=j,label:"Internal Value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(T,{cols:"3",sm:"2",md:"1",class:"d-flex align-center"},{default:l(()=>[e(P,{icon:"mdi:mdi-window-close",size:"small",color:"red",onClick:j=>c(h)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),e(x,null,{default:l(()=>[e(T,null,{default:l(()=>[e(P,{"prepend-icon":"mdi:mdi-plus",color:"primary",onClick:i},{default:l(()=>I[18]||(I[18]=[E("Add Item")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):t.value.Type===y(Y).ACCOMMODATION?(f(),b(x,{key:2},{default:l(()=>[e(T,null,{default:l(()=>[I[19]||(I[19]=F("h4",null,"Accommodation",-1)),e(zl,{modelValue:t.value,"onUpdate:modelValue":I[9]||(I[9]=k=>t.value=k)},null,8,["modelValue"])]),_:1})]),_:1})):t.value.Type===y(Y).AGE?(f(),b(x,{key:3},{default:l(()=>[e(T,null,{default:l(()=>[I[20]||(I[20]=F("h4",null,"Age",-1)),e(Jl,{modelValue:t.value,"onUpdate:modelValue":I[10]||(I[10]=k=>t.value=k),convention:y(s)},null,8,["modelValue","convention"])]),_:1})]),_:1})):t.value.Type===y(Y).EXTRAS?(f(),b(x,{key:4},{default:l(()=>[e(T,null,{default:l(()=>[I[21]||(I[21]=F("h4",null,"Additional Purchases",-1)),e(Yl,{modelValue:t.value,"onUpdate:modelValue":I[11]||(I[11]=k=>t.value=k)},null,8,["modelValue"])]),_:1})]),_:1})):t.value.Type===y(Y).HTML?(f(),b(x,{key:5},{default:l(()=>[e(T,null,{default:l(()=>[e(Wl,{modelValue:t.value,"onUpdate:modelValue":I[12]||(I[12]=k=>t.value=k)},null,8,["modelValue"])]),_:1})]),_:1})):t.value.Type===y(Y).INTERESTS?(f(),b(x,{key:6},{default:l(()=>[e(T,null,{default:l(()=>[I[22]||(I[22]=F("h4",null,"Available Interests",-1)),e(Hl,{modelValue:t.value,"onUpdate:modelValue":I[13]||(I[13]=k=>t.value=k)},null,8,["modelValue"])]),_:1})]),_:1})):t.value.Type===y(Y).TICKET?(f(),b(x,{key:7},{default:l(()=>[e(T,null,{default:l(()=>[I[23]||(I[23]=F("h4",null,"Tickets",-1)),e(jl,{modelValue:t.value,"onUpdate:modelValue":I[14]||(I[14]=k=>t.value=k)},null,8,["modelValue"])]),_:1})]),_:1})):R("",!0)]),_:1})]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(le,{elevation:"5",class:"pa-2",color:"text-center"},{default:l(()=>[I[24]||(I[24]=F("h4",{class:"mb-3"},"Field Preview",-1)),e(Je,{admin:!0,field:t.value,convention:y(s),modelValue:a.value,"onUpdate:modelValue":I[15]||(I[15]=k=>a.value=k)},null,8,["field","convention","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),actions:l(()=>[e(P,{color:"blue-darken-1",variant:"text",onClick:V},{default:l(()=>I[25]||(I[25]=[E(" Cancel ")])),_:1}),e(P,{color:"blue-darken-1",variant:"text",onClick:U},{default:l(()=>I[26]||(I[26]=[E(" Reset ")])),_:1}),e(oe),e(P,{color:"blue-darken-1",variant:"text",onClick:r},{default:l(()=>I[27]||(I[27]=[E(" Save ")])),_:1})]),_:1},8,["modelValue","title"]))}}),lt=O({__name:"FieldEditor",props:{modelValue:{required:!0},modelModifiers:{}},emits:q(["refresh"],["update:modelValue"]),setup(g){const v=M(g,"modelValue"),u=B(),s=C(!1),p=C(!1),d=C([{key:"Label",title:"Label",align:"start",sortable:!0},{key:"Name",title:"Internal Name",align:"start",sortable:!0},{key:"Type",title:"Type",align:"start",sortable:!0},{key:"actions",title:"Actions",sortable:!1}]),o=C([]);u.getConventionFields(v.value.ConventionUUID).then(k=>{k&&(o.value=k)});const n=C(-1),t=C({ID:0,FieldUUID:L(),ConventionID:v.value.ID,ConventionUUID:v.value.ConventionUUID,Autofill:!1,Hint:"",Label:"",Multiple:!1,Name:"",Placeholder:"",Type:"TEXT",Values:[],Data:""}),a=ae(()=>n.value===-1?"New Field":"Edit Field"),m=()=>({ID:0,FieldUUID:L(),ConventionID:v.value.ID,ConventionUUID:v.value.ConventionUUID,Autofill:!1,Hint:"",Label:"",Multiple:!1,Name:"",Placeholder:"",Type:"TEXT",Values:[],Data:""}),V=C(m()),U=()=>{V.value.FieldUUID=L(),t.value=Object.assign({},m()),n.value=-1,s.value=!0},r=k=>{n.value=o.value.indexOf(k),t.value=Object.assign({},k),s.value=!0},i=k=>{n.value=o.value.indexOf(k),t.value=Object.assign({},k),p.value=!0},c=()=>{u.deleteField(t.value.FieldUUID).then(k=>{k&&(o.value.splice(n.value,1),A())})},D=()=>{s.value=!1,be(()=>{t.value=Object.assign({},V.value),n.value=-1})},A=()=>{p.value=!1,be(()=>{t.value=Object.assign({},V.value),n.value=-1})},I=()=>{u.saveField(t.value).then(k=>{k&&(n.value>-1?Object.assign(o.value[n.value],k):o.value.push(k),D())})};return(k,h)=>(f(),b(Xe,{headers:d.value,items:o.value,"sort-by":[{key:"calories",order:"asc"}],class:"elevation-1"},{top:l(()=>[e(de,{color:"primary"},{default:l(()=>[e(se,null,{default:l(()=>h[3]||(h[3]=[E("Field Editor")])),_:1}),e(We,{class:"mx-4",inset:!0,vertical:!0}),e(oe),e(P,{dark:"",class:"mb-2","prepend-icon":"mdi:mdi-pencil",onClick:U},{default:l(()=>h[4]||(h[4]=[E(" New Item ")])),_:1}),e(we,{modelValue:p.value,"onUpdate:modelValue":h[0]||(h[0]=j=>p.value=j),onDelete:c},null,8,["modelValue"])]),_:1}),s.value?(f(),b(et,{key:0,modelValue:s.value,"onUpdate:modelValue":h[1]||(h[1]=j=>s.value=j),field:t.value,"onUpdate:field":[h[2]||(h[2]=j=>t.value=j),I],title:a.value,convention:v.value},null,8,["modelValue","field","title","convention"])):R("",!0)]),"item.actions":l(({item:j})=>[e(J,{size:"small",class:"me-2",onClick:Qe=>r(j)},{default:l(()=>h[5]||(h[5]=[E(" mdi:mdi-pencil ")])),_:2},1032,["onClick"]),e(J,{size:"small",onClick:Qe=>i(j)},{default:l(()=>h[6]||(h[6]=[E(" mdi:mdi-delete ")])),_:2},1032,["onClick"])]),_:1},8,["headers","items"]))}}),tt=(g,v)=>{const u=ve(g,v),s=ve(g,v,void 0,void 0,"item"),p=C(H(s.value));return Z(s,()=>{p.value=H(s.value)}),{state:u,model:s,close:()=>{u.value=!1},reset:()=>{s.value=H(p.value)},save:()=>{v("save")}}},at=O({__name:"EditItemDialog",props:{item:{},modelValue:{type:Boolean},title:{},cardClass:{}},emits:["update:modelValue","update:item","save"],setup(g,{emit:v}){const u=g,s=v,{state:p,model:d,close:o,reset:n,save:t}=tt(u,s);return(a,m)=>(f(),b(qe,{modelValue:y(p),"onUpdate:modelValue":m[0]||(m[0]=V=>Ie(p)?p.value=V:null),onReset:y(n),onSave:y(t),title:a.title,color:"primary","card-class":a.cardClass,fullscreen:!0,persistent:!0},{toolbarButtons:l(()=>[Se(a.$slots,"toolbarButtons")]),actions:l(()=>[e(P,{color:"blue-darken-1",variant:"text",onClick:y(o)},{default:l(()=>m[1]||(m[1]=[E(" Cancel ")])),_:1},8,["onClick"]),e(P,{color:"blue-darken-1",variant:"text",onClick:y(n)},{default:l(()=>m[2]||(m[2]=[E(" Reset ")])),_:1},8,["onClick"]),e(oe),e(P,{color:"blue-darken-1",variant:"text",onClick:y(t)},{default:l(()=>m[3]||(m[3]=[E(" Save ")])),_:1},8,["onClick"])]),default:l(()=>[Se(a.$slots,"default")]),_:3},8,["modelValue","onReset","onSave","title","card-class"]))}}),ot={class:"pa-0 border-0 ma-0"},nt={class:"pa-0 border-0 ma-0"},ut=O({__name:"EditFormField",props:q({convention:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(g){const v=M(g,"modelValue"),u=B(),s=C([]),p=C([]),d=C(""),o=n=>{var t;v.value.Field=(t=p.value.find(a=>a.value===n))==null?void 0:t.field};return u.getConventionFields(g.convention.ConventionUUID).then(n=>{n&&(s.value=n,p.value=n.map(t=>({title:`${t.Label} (${(ze.find(a=>a.value===t.Type)||{title:""}).title})`,value:t.FieldUUID,field:t})),o(v.value.FieldUUID))}),(n,t)=>(f(),b(x,null,{default:l(()=>[e(T,{cols:"12",md:"6"},{default:l(()=>[F("fieldset",ot,[t[5]||(t[5]=F("legend",{class:"mb-2"},"Field Settings",-1)),e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(X,{modelValue:v.value.FieldUUID,"onUpdate:modelValue":[t[0]||(t[0]=a=>v.value.FieldUUID=a),o],items:p.value,"item-title":"title","item-value":"value",label:"Field",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(T,{cols:"6",sm:"4"},{default:l(()=>[e(N,{modelValue:v.value.MinLength,"onUpdate:modelValue":t[1]||(t[1]=a=>v.value.MinLength=a),modelModifiers:{number:!0},label:"Min Length",type:"number",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(T,{cols:"6",sm:"4"},{default:l(()=>[e(N,{modelValue:v.value.MaxLength,"onUpdate:modelValue":t[2]||(t[2]=a=>v.value.MaxLength=a),modelModifiers:{number:!0},label:"Max Length",type:"number",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"4"},{default:l(()=>[e(W,{modelValue:v.value.Required,"onUpdate:modelValue":t[3]||(t[3]=a=>v.value.Required=a),modelModifiers:{boolean:!0},label:"Required","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),v.value.FieldUUID&&v.value.Field?(f(),b(T,{key:0,cols:"12",md:"6"},{default:l(()=>[F("fieldset",nt,[t[6]||(t[6]=F("legend",{class:"text-blue-accent-2 mb-2"},"Field Preview",-1)),v.value.Field?(f(),b(Je,{key:0,admin:!0,field:v.value.Field,"persistent-hint":!0,required:v.value.Required,convention:n.convention,modelValue:d.value,"onUpdate:modelValue":t[4]||(t[4]=a=>d.value=a)},null,8,["field","required","convention","modelValue"])):R("",!0)])]),_:1})):R("",!0)]),_:1}))}}),it={class:"d-none d-sm-block"},dt=O({__name:"EditFormSectionFields",props:q({convention:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(g){const v=M(g,"modelValue"),u=()=>{var s;return{ID:0,SectionFieldUUID:L(),SectionID:v.value.ID,SectionUUID:v.value.SectionUUID,FieldID:0,FieldUUID:"",Order:(((s=v.value.Fields)==null?void 0:s.length)||0)+1,MinLength:0,MaxLength:0,Required:!1,Value:""}};return(s,p)=>v.value.Fields!==void 0?(f(),b(he,{key:0,modelValue:v.value.Fields,"onUpdate:modelValue":p[0]||(p[0]=d=>v.value.Fields=d),closeable:!1,title:"Fields","new-item":u,class:"mt-4",label:"name","label-parent":"Field","slot-name-prefix":"field"},_e({_:2},[K(v.value.Fields,(d,o)=>({name:`field_${o}_title`,fn:l(()=>[d.Field?(f(),_(S,{key:0},[E($(d.Field.Label)+" ("+$(d.Field.Name)+") ",1),F("template",it,[E("  ["+$(d.Field.Type)+"] ",1)])],64)):(f(),_(S,{key:1},[E("New Field")],64))])})),K(v.value.Fields,(d,o)=>({name:`field_${o}`,fn:l(()=>[e(ut,{modelValue:v.value.Fields[o],"onUpdate:modelValue":n=>v.value.Fields[o]=n,convention:s.convention,style:{margin:"0 -24px"}},null,8,["modelValue","onUpdate:modelValue","convention"])])}))]),1032,["modelValue"])):R("",!0)}}),st=O({__name:"EditFormSections",props:q({convention:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(g){const v=M(g,"modelValue"),u=()=>{const s={ID:0,SectionUUID:L(),FormID:v.value.ID,FormUUID:v.value.FormUUID,Order:0,Name:"New Section",Heading:"",Description:"",Fields:[],DefaultValue:"",State:{ID:0,SectionStateUUID:L(),SectionID:0,SectionUUID:"",Edit:!0}};return s.State.SectionID=s.ID,s.State.SectionUUID=s.SectionUUID,s};return(s,p)=>(f(),b(he,{modelValue:v.value.Sections,"onUpdate:modelValue":p[0]||(p[0]=d=>v.value.Sections=d),"new-item":u,closeable:!1,title:"Sections","slot-name-prefix":"section"},_e({_:2},[K(v.value.Sections,(d,o)=>({name:`section_${o}`,fn:l(()=>[e(x,null,{default:l(()=>[e(T,{cols:"12",sm:"6"},{default:l(()=>[e(N,{modelValue:d.Name,"onUpdate:modelValue":n=>d.Name=n,label:"Internal Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(T,{cols:"12",sm:"6"},{default:l(()=>[e(N,{modelValue:d.Heading,"onUpdate:modelValue":n=>d.Heading=n,label:"Section Heading",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(me,{modelValue:d.Description,"onUpdate:modelValue":n=>d.Description=n,label:"Section Text",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),d.Fields?(f(),b(dt,{key:0,modelValue:v.value.Sections[o],"onUpdate:modelValue":n=>v.value.Sections[o]=n,convention:s.convention},null,8,["modelValue","onUpdate:modelValue","convention"])):R("",!0)])}))]),1032,["modelValue"]))}}),rt=O({__name:"FormRendererPopup",props:q({admin:{type:Boolean},convention:{},form:{},title:{},cardClass:{},preview:{type:Boolean}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:q(["update:form"],["update:modelValue"]),setup(g,{emit:v}){const u=g,{admin:s=!1,convention:p,title:d="",cardClass:o=""}=u,n=v,t=M(g,"modelValue"),a=ve(u,n,void 0,void 0,"form"),m=C(H(a.value));Z(a,()=>{m.value=H(a.value)});const V=()=>{t.value=!1};return(U,r)=>(f(),b(qe,{modelValue:t.value,"onUpdate:modelValue":r[1]||(r[1]=i=>t.value=i),title:y(d),color:"primary","card-class":y(o),fullscreen:!0,scrollable:!0},{toolbarButtons:l(()=>[Se(U.$slots,"toolbarButtons")]),actions:l(()=>[e(P,{color:"blue-darken-1",variant:"text",onClick:V},{default:l(()=>r[2]||(r[2]=[E(" Close ")])),_:1})]),default:l(()=>[e(dl,{modelValue:m.value,"onUpdate:modelValue":r[0]||(r[0]=i=>m.value=i),admin:y(s),convention:y(p),preview:U.preview},null,8,["modelValue","admin","convention","preview"])]),_:3},8,["modelValue","title","card-class"]))}}),mt=O({__name:"EditFormDialog",props:q({convention:{},form:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:q(["update:form"],["update:modelValue"]),setup(g,{emit:v}){const u=g,{convention:s}=u,p=M(g,"modelValue"),d=v,o=B(),n=ve(u,d,void 0,void 0,"form"),t=C(!1),a=C(H(n.value));Z(n,()=>{a.value=H(n.value)});const m=()=>{o.saveForm(a.value).then(U=>{U&&(n.value=U,p.value=!1)})},V=()=>{t.value=!0};return(U,r)=>(f(),b(at,{modelValue:p.value,"onUpdate:modelValue":r[14]||(r[14]=i=>p.value=i),item:a.value,"onUpdate:item":r[15]||(r[15]=i=>a.value=i),onSave:m,"card-class":"pa-0"},{toolbarButtons:l(()=>[e(ml,null,{default:l(()=>[e(P,{"prepend-icon":"mdi:mdi-developer-board",onClick:V},{default:l(()=>r[16]||(r[16]=[F("template",{class:"d-none d-sm-inline"},[E("Preview")],-1)])),_:1})]),_:1})]),default:l(()=>[e(pe,null,{default:l(()=>[e(fe,{class:"mt-0"},{default:l(()=>[e(Ve,null,{default:l(()=>r[17]||(r[17]=[E("General Settings")])),_:1}),e(ce,null,{default:l(()=>[e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(z,{class:"pa-0",fluid:!0},{default:l(()=>[e(x,null,{default:l(()=>[e(T,{cols:"12",sm:"6"},{default:l(()=>[e(N,{modelValue:a.value.Name,"onUpdate:modelValue":r[0]||(r[0]=i=>a.value.Name=i),label:"Internal name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"6"},{default:l(()=>[e(N,{modelValue:a.value.Heading,"onUpdate:modelValue":r[1]||(r[1]=i=>a.value.Heading=i),label:"Form Heading",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(me,{modelValue:a.value.Description,"onUpdate:modelValue":r[2]||(r[2]=i=>a.value.Description=i),label:"Pre-form Text",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"6"},{default:l(()=>[e(X,{modelValue:a.value.Type,"onUpdate:modelValue":r[3]||(r[3]=i=>a.value.Type=i),label:"Type",variant:"outlined",items:y(sl),"hide-details":""},null,8,["modelValue","items"])]),_:1}),e(T,{cols:"12",sm:"6"},{default:l(()=>[e(N,{modelValue:a.value.NotificationEmail,"onUpdate:modelValue":r[4]||(r[4]=i=>a.value.NotificationEmail=i),label:"Notification Email",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"6",class:"d-none"},{default:l(()=>[e(N,{modelValue:a.value.State.Stage,"onUpdate:modelValue":r[5]||(r[5]=i=>a.value.State.Stage=i),modelModifiers:{number:!0},label:"Stage",variant:"outlined","hide-details":"",type:"number"},null,8,["modelValue"])]),_:1}),e(T,{cols:"6"},{default:l(()=>[e(W,{modelValue:a.value.State.New,"onUpdate:modelValue":r[6]||(r[6]=i=>a.value.State.New=i),label:"Allow New Entries"},null,8,["modelValue"])]),_:1}),e(T,{cols:"6"},{default:l(()=>[e(W,{modelValue:a.value.State.Edit,"onUpdate:modelValue":r[7]||(r[7]=i=>a.value.State.Edit=i),label:"Allow Editing Submissions"},null,8,["modelValue"])]),_:1}),e(T,{cols:"6"},{default:l(()=>[e(W,{modelValue:a.value.State.Independent,"onUpdate:modelValue":r[8]||(r[8]=i=>a.value.State.Independent=i),label:"Independent of Registration Form"},null,8,["modelValue"])]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(Q,{label:"Required Tags",variant:"outlined",modelValue:a.value.RequiredTags,"onUpdate:modelValue":r[9]||(r[9]=i=>a.value.RequiredTags=i),convention:y(s),organisation:y(s).OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user must have to see this form. (Any one)"},null,8,["modelValue","convention","organisation"])]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(Ye,{label:"Required Groups",variant:"outlined",modelValue:a.value.RequiredGroupMemberships,"onUpdate:modelValue":r[10]||(r[10]=i=>a.value.RequiredGroupMemberships=i),convention:y(s),organisation:y(s).OrganisationUUID,chips:"",clearable:"",hint:"Groups that a user must be in to see this form. (Any one)"},null,8,["modelValue","convention","organisation"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a.value?(f(),b(st,{key:0,modelValue:a.value,"onUpdate:modelValue":r[11]||(r[11]=i=>a.value=i),convention:y(s),style:{"border-radius":"0"}},null,8,["modelValue","convention"])):R("",!0),t.value?(f(),b(rt,{key:1,modelValue:t.value,"onUpdate:modelValue":r[12]||(r[12]=i=>t.value=i),form:a.value,"onUpdate:form":r[13]||(r[13]=i=>a.value=i),admin:!0,convention:y(s),title:"Form Preview",preview:!0,"card-class":"pa-0"},null,8,["modelValue","form","convention"])):R("",!0)]),_:1},8,["modelValue","item"]))}}),vt=(g,v)=>{const u=C(!1),s=C(!1),p=C(g),d=C(-1),o=C(v),n=C(v),t=ae(()=>d.value===-1?"New Form":"Edit Form"),a=()=>{p.value=g},m=D=>{d.value=p.value.indexOf(D),o.value=Object.assign({},D),u.value=!0},V=D=>{d.value=p.value.indexOf(D),o.value=Object.assign({},D),s.value=!0},U=()=>{s.value=!1,be(()=>{o.value=Object.assign({},n.value),d.value=-1}).then()},r=()=>{p.value.splice(d.value,1),U()},i=()=>{u.value=!1,be(()=>{o.value=Object.assign({},n.value),d.value=-1}).then()},c=()=>{d.value>-1?Object.assign(p.value[d.value],o.value):p.value.push(o.value),i()};return Z(u,D=>{D||i()}),Z(s,D=>{D||U()}),{collection:p,defaultItem:n,dialog:u,dialogDelete:s,editedItem:o,formTitle:t,reset:a,editItem:m,deleteItem:V,deleteItemConfirm:r,close:i,save:c}},pt=O({__name:"FormEditor",props:{modelValue:{required:!0},modelModifiers:{}},emits:q(["refresh"],["update:modelValue"]),setup(g){const v=M(g,"modelValue"),u=B(),s=C([{key:"Name",title:"Form Name",align:"start",sortable:!0},{key:"Type",title:"Type",align:"start",sortable:!0},{key:"actions",title:"Actions",sortable:!1}]),p=C([]),d=C([]);u.getConventionFields(v.value.ConventionUUID).then(A=>{p.value=A}),u.getConventionForms(v.value.ConventionUUID).then(A=>{d.value=A});const o={ID:0,FormUUID:L(),ConventionID:v.value.ID,ConventionUUID:v.value.ConventionUUID,ParentID:0,ParentUUID:Ce,Name:"",Heading:"",Description:"",Type:rl.FORM_TYPE_ADDITIONAL,Sections:[],State:{ID:0,FormStateUUID:L(),FormID:0,FormUUID:Ce,New:!1,Edit:!1,Stage:0,Independent:!1},RequiredGroupMemberships:[],RequiredTags:[],NotificationEmail:""};o.State.FormUUID=o.FormUUID;const{collection:n,defaultItem:t,dialog:a,dialogDelete:m,editedItem:V,editItem:U,deleteItem:r,deleteItemConfirm:i,save:c}=vt(d,o);n.value.forEach(A=>{A.Sections.forEach(I=>{var k;(k=I.Fields)==null||k.forEach(h=>{h.Field=p.value.find(j=>j.ID===h.FieldID)})})});const D=A=>{u.deleteForm(A.FormUUID).then(I=>{I&&r(A)})};return(A,I)=>(f(),b(Xe,{headers:s.value,items:y(n),"sort-by":[{key:"calories",order:"asc"}],class:"elevation-1"},{top:l(()=>[e(de,{color:"primary"},{default:l(()=>[e(se,null,{default:l(()=>I[4]||(I[4]=[E("Form Editor")])),_:1}),e(We,{class:"mx-4",inset:!0,vertical:!0}),e(oe),e(P,{dark:"",class:"mb-2","prepend-icon":"mdi:mdi-pencil",onClick:I[0]||(I[0]=k=>{V.value=Object.assign({},y(t)),a.value=!0})},{default:l(()=>I[5]||(I[5]=[E(" New Item ")])),_:1}),e(we,{modelValue:y(m),"onUpdate:modelValue":I[1]||(I[1]=k=>Ie(m)?m.value=k:null),onDelete:y(i)},null,8,["modelValue","onDelete"])]),_:1}),y(a)?(f(),b(mt,{key:0,title:y(V).Name?`Edit Form - ${y(V).Name}`:"Create New Form",modelValue:y(a),"onUpdate:modelValue":I[2]||(I[2]=k=>Ie(a)?a.value=k:null),form:y(V),"onUpdate:form":[I[3]||(I[3]=k=>Ie(V)?V.value=k:null),y(c)],convention:v.value},null,8,["title","modelValue","form","onUpdate:form","convention"])):R("",!0)]),"item.actions":l(({item:k})=>[e(J,{size:"small",class:"me-2",onClick:h=>y(U)(k)},{default:l(()=>I[6]||(I[6]=[E(" mdi:mdi-pencil ")])),_:2},1032,["onClick"]),e(J,{size:"small",onClick:h=>D(k)},{default:l(()=>I[7]||(I[7]=[E(" mdi:mdi-delete ")])),_:2},1032,["onClick"])]),_:1},8,["headers","items"]))}}),ft=O({__name:"LinkedFields",props:{convention:{}},emits:["update:convention"],async setup(g,{emit:v}){let u,s;const p=g,{getLinkedFields:d,saveLinkedFields:o,linkedFieldsKey:n}=al(),a=ve(p,v,void 0,void 0,"convention"),m=C(([u,s]=Ae(()=>d(a.value.ConventionUUID)),u=await u,s(),u)),V=C(!1),U=async()=>{try{V.value=!0,m.value&&await o(a.value.ConventionUUID,m.value)}catch(c){console.error(c)}V.value=!1},r=C([]),i=([u,s]=Ae(()=>pl(a.value.ConventionUUID)),u=await u,s(),u);return i&&(i.forEach(c=>c.Sections.forEach(D=>D.Fields&&r.value.push(...D.Fields.map(A=>{var k;return{title:`${c.Name} - ${D.Name} - ${(k=A.Field)==null?void 0:k.Name}`,value:A.SectionFieldUUID,object:A}})))),r.value.sort(ll("title"))),(c,D)=>(f(),b(Ze,{method:"post",action:`/api/convention/${y(a).ConventionUUID}/config/${y(n)}`,onSubmit:ie(U,["prevent"]),class:"pa-sm-4"},{default:l(()=>[D[6]||(D[6]=F("h2",null,"Linked Fields",-1)),D[7]||(D[7]=F("p",null," This defines which fields are used by the registration search system. ",-1)),e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(X,{modelValue:m.value.badge_name,"onUpdate:modelValue":D[0]||(D[0]=A=>m.value.badge_name=A),label:"Main Badge Name",items:r.value,"item-title":"title","item-value":"value","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(X,{modelValue:m.value.forename,"onUpdate:modelValue":D[1]||(D[1]=A=>m.value.forename=A),label:"Forename",items:r.value,"item-title":"title","item-value":"value","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(X,{modelValue:m.value.surname,"onUpdate:modelValue":D[2]||(D[2]=A=>m.value.surname=A),label:"Surname",items:r.value,"item-title":"title","item-value":"value","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(X,{modelValue:m.value.dob,"onUpdate:modelValue":D[3]||(D[3]=A=>m.value.dob=A),label:"Date of Birth",items:r.value,"item-title":"title","item-value":"value","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(X,{modelValue:m.value.address,"onUpdate:modelValue":D[4]||(D[4]=A=>m.value.address=A),label:"Address",items:r.value,"item-title":"title","item-value":"value","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(T,{class:"text-right"},{default:l(()=>[e(P,{type:"submit",color:"success"},_e({default:l(()=>[D[5]||(D[5]=E(" Save "))]),_:2},[V.value?{name:"prepend",fn:l(()=>[e(Be,{size:"20",indeterminate:""})]),key:"0"}:void 0]),1024)]),_:1})]),_:1})]),_:1},8,["action"]))}}),Vt={class:"mt-4"},ct=O({__name:"Stripe",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],async setup(g){let v,u;const{getStripeConfig:s,saveStripeConfig:p,stripeConfigKey:d}=fl(),o=B(),n=M(g,"modelValue"),t=C(([v,u]=Ae(()=>s(n.value.ConventionUUID)),v=await v,u(),v)),a=C(!1),m=async()=>{try{a.value=!0,t.value&&await p(n.value.ConventionUUID,t.value)}catch(U){console.error(U)}a.value=!1},V=U=>{try{navigator.clipboard.writeText(U).catch(()=>{})}catch{}};return(U,r)=>(f(),b(Ze,{method:"post",action:`/api/convention/${n.value.ConventionUUID}/config/${y(d)}`,onSubmit:ie(m,["prevent"]),class:"pa-sm-4"},{default:l(()=>[r[10]||(r[10]=F("h2",null,"Stripe Configuration",-1)),e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(N,{label:"Private Key","hide-details":"",modelValue:t.value.private_key,"onUpdate:modelValue":r[0]||(r[0]=i=>t.value.private_key=i)},null,8,["modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(N,{label:"Public Key","hide-details":"",modelValue:t.value.public_key,"onUpdate:modelValue":r[1]||(r[1]=i=>t.value.public_key=i)},null,8,["modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(N,{label:"Webhook ID","hide-details":"",modelValue:t.value.webhook_id,"onUpdate:modelValue":r[2]||(r[2]=i=>t.value.webhook_id=i)},null,8,["modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(N,{label:"Webhook Key","hide-details":"",modelValue:t.value.webhook_secret,"onUpdate:modelValue":r[3]||(r[3]=i=>t.value.webhook_secret=i)},null,8,["modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(N,{label:"Support Email Address","hide-details":"",modelValue:t.value.support_email,"onUpdate:modelValue":r[4]||(r[4]=i=>t.value.support_email=i)},null,8,["modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(me,{label:"Payment Information","hide-details":"",modelValue:t.value.payment_information_html,"onUpdate:modelValue":r[5]||(r[5]=i=>t.value.payment_information_html=i)},null,8,["modelValue"])]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[r[7]||(r[7]=F("p",{class:"font-weight-bold"}," WebHook URI ",-1)),r[8]||(r[8]=F("p",null,[F("small",null,"Setup a Stripe WebHook using this URI and add all payment_intent events.")],-1)),F("p",Vt,[e(Vl,{text:"Click to Copy"},{activator:l(({props:i})=>[F("span",ge({class:"cursor-pointer",onClick:r[6]||(r[6]=c=>V(`${y(o).getEndPoint()}/stripe/hook/${n.value.ConventionUUID}`))},i),[E($(y(o).getEndPoint())+"/stripe/hook/"+$(n.value.ConventionUUID)+" ",1),e(J,{icon:"mdi:mdi-clipboard-outline"})],16)]),_:1})])]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(T,{class:"text-right"},{default:l(()=>[e(P,{type:"submit",color:"success"},_e({default:l(()=>[r[9]||(r[9]=E(" Save "))]),_:2},[a.value?{name:"prepend",fn:l(()=>[e(Be,{size:"20",indeterminate:""})]),key:"0"}:void 0]),1024)]),_:1})]),_:1})]),_:1},8,["action"]))}}),Ut=O({__name:"PaymentProcessor",props:{convention:{required:!0},conventionModifiers:{}},emits:["update:convention"],setup(g){const v=M(g,"convention"),u=C(""),s=C(),p=C([{id:L(),title:"Stripe",component:ne(ct),model:v}]);return(d,o)=>(f(),_(S,null,[u.value?(f(),b(Ul,{key:0,type:"error"},{default:l(()=>[e(cl,null,{default:l(()=>o[2]||(o[2]=[E("Error Encountered")])),_:1}),E(" "+$(u.value),1)]),_:1})):R("",!0),e(Pe,{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=n=>s.value=n),"bg-color":"secondary","show-arrows":""},{default:l(()=>[(f(!0),_(S,null,K(p.value,(n,t)=>(f(),b(Ne,{key:t,text:n.title,value:n.id},null,8,["text","value"]))),128))]),_:1},8,["modelValue"]),e($e,{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=n=>s.value=n)},{default:l(()=>[(f(!0),_(S,null,K(p.value,(n,t)=>(f(),b(Re,{key:t,value:n.id},{default:l(()=>[e(re,{class:"pa-2"},{default:l(()=>[(f(),b(Ke(n.component),{modelValue:n.model,"onUpdate:modelValue":a=>n.model=a},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])],64))}}),ca=O({__name:"ConventionEditorView",emits:["delete","pageTitle","refresh"],setup(g,{emit:v}){const u=v,s=el(),p=B(),o=C({ID:0,ConventionUUID:Ce,Accommodation:[],Description:"",DetailLink:"",Extras:[],Interests:[],Logo:"",Name:"",OrganisationID:0,OrganisationUUID:"",Slug:"",Tickets:[],Visible:!1}),n=C(!1),t=C(`
Are you sure you wish to delete this convention? All data relating to it will be
removed including all registrations and payment information. This action can
not be undone. To confirm type "I UNDERSTAND" in the box below.
`),a=C(),m=C(),V=C([{id:"general",title:"General",component:void 0,model:null},{id:"configuration",title:"Main Configuration",component:void 0,model:null},{id:"linked",title:"Linked Fields",component:void 0,model:null},{id:"payments",title:"Payment Processor",component:void 0,model:null}]),U=C([{id:L(),title:"Accommodation",component:ne(Bl),model:o},{id:L(),title:"Additional Purchases",component:ne(Il),model:o},{id:L(),title:"Fields",component:ne(lt),model:o},{id:L(),title:"Forms",component:ne(pt),model:o},{id:L(),title:"Interests",component:ne(Cl),model:o},{id:L(),title:"Tickets",component:ne(Ol),model:o},{id:L(),title:"Venues",component:ne(Kl),model:o}]),r=i=>{p.deleteConvention(o.value.ConventionUUID).then(c=>{c?i&&(i("Convention Deleted"),u("delete")):i&&i("Failed to Delete Convention"),setTimeout(()=>{n.value=!1},2e3)}).catch(()=>{i&&(i("Failed to Delete Organisation"),n.value=!1)})};return u("pageTitle","Convention Editor"),p.getConvention(s.params.convention.toString()).then(i=>{i?(o.value=i,u("pageTitle",`Convention Editor - ${o.value.Name}`)):u("pageTitle","Convention Editor - New Convention")}),(i,c)=>(f(),b(le,null,{default:l(()=>[e(Pe,{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=D=>a.value=D),"bg-color":"primary","show-arrows":"","selected-class":"bg-secondary","hide-slider":""},{default:l(()=>[(f(!0),_(S,null,K(V.value,(D,A)=>(f(),b(Ne,{key:A,text:D.title,value:D.id},null,8,["text","value"]))),128))]),_:1},8,["modelValue"]),e($e,{modelValue:a.value,"onUpdate:modelValue":c[8]||(c[8]=D=>a.value=D)},{default:l(()=>[(f(!0),_(S,null,K(V.value,(D,A)=>(f(),b(Re,{key:A,value:D.id},{default:l(()=>[a.value===D.id?(f(),_(S,{key:0},[D.id==="general"?(f(),_(S,{key:0},[e(vl,{embed:!0,convention:o.value,"onUpdate:convention":c[1]||(c[1]=I=>o.value=I),onDelete:c[2]||(c[2]=I=>n.value=!0),title:`${o.value.Name} General Settings`},null,8,["convention","title"]),e(we,{modelValue:n.value,"onUpdate:modelValue":c[3]||(c[3]=I=>n.value=I),"confirmation-text":"I UNDERSTAND",message:t.value,title:"Delete Convention",subtitle:"A quick way to make enemies",onDelete:r},null,8,["modelValue","message"])],64)):D.id==="configuration"?(f(),_(S,{key:1},[o.value&&o.value.ConventionUUID!==y(Ce)?(f(),b(Pe,{key:0,modelValue:m.value,"onUpdate:modelValue":c[4]||(c[4]=I=>m.value=I),"bg-color":"secondary","show-arrows":""},{default:l(()=>[(f(!0),_(S,null,K(U.value,(I,k)=>(f(),b(Ne,{key:k,text:I.title,value:I.id},null,8,["text","value"]))),128))]),_:1},8,["modelValue"])):R("",!0),e($e,{modelValue:m.value,"onUpdate:modelValue":c[5]||(c[5]=I=>m.value=I)},{default:l(()=>[(f(!0),_(S,null,K(U.value,(I,k)=>(f(),b(Re,{key:k,value:I.id},{default:l(()=>[e(re,{class:"pa-2"},{default:l(()=>[(f(),b(Ke(I.component),{modelValue:I.model,"onUpdate:modelValue":h=>I.model=h},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue"])],64)):D.id==="linked"?(f(),b(Le,{key:2},{default:l(()=>[e(ft,{convention:o.value,"onUpdate:convention":c[6]||(c[6]=I=>o.value=I)},null,8,["convention"])]),_:1})):D.id==="payments"?(f(),b(Le,{key:3},{default:l(()=>[e(Ut,{convention:o.value,"onUpdate:convention":c[7]||(c[7]=I=>o.value=I)},null,8,["convention"])]),_:1})):R("",!0)],64)):R("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}))}});export{ca as default};
