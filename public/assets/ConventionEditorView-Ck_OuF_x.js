import{s as w}from"./index-fwfMqYug.js";import{i as O,M as q,N as M,r as b,k as H,n as f,q as C,v as l,f as e,x as k,F as D,A as N,c as te,D as _,G as S,H as A,Q as K,y as $,P as B,z as ue,m as Ce,w as X,W as Ee,X as be,Y as Ae,Z as ge,O as $e,V as Ue,C as Ze,s as oe,_ as Ke,U as Qe,S as Le}from"./index-FxmlW5zV.js";import{m as Oe,a as Me,s as Ge,p as el,F as he,b as Y,_ as Be,c as ll}from"./FormRenderer.vue_vue_type_style_index_0_lang-CN-PfUfb.js";import{_ as Z,I as tl,a as Ye}from"./EditOrderedItems.vue_vue_type_script_setup_true_lang-Bdrcue9T.js";import{_ as Q}from"./SaveButton.vue_vue_type_script_setup_true_lang-B8W48rek.js";import{V as ie,a as de}from"./VToolbar-Ok8wwxH0.js";import{V as R,d as J,e as z,p as al}from"./VContainer-DI__1DxU.js";import{V as ae}from"./scopeId-DIwfd5MI.js";import{V as De}from"./VToolbarItems-Chz_e5SQ.js";import{c as Te,e as se}from"./VCard-DojOZbAm.js";import{V as F}from"./VTextField-DRCp0z1p.js";import{_ as He}from"./SelectGroups.vue_vue_type_script_setup_true_lang-DviHEkAG.js";import{V as _e,a as ne,d as le,b as xe}from"./VList-C1UxxvK8.js";import{V as x,a as T}from"./VRow-lGjmVsai.js";import{V as ye}from"./VDialog-yRsS2B-K.js";import{v as L}from"./v4-CQkTLCs1.js";import{V as ve,a as pe,b as fe,c as ce}from"./VExpansionPanels-BGInVVsj.js";import{V as Ve}from"./VTextarea-D4C-8lXE.js";import{T as G,a as ol}from"./ticket-DqurB3v3.js";import{V as nl}from"./VAutocomplete-BhZCr6rv.js";import{V as re}from"./filter-lJuFbPbI.js";import{V as W}from"./VCheckbox-By7xPPyB.js";import{V as je,a as ze}from"./VChip-B2JV4aHF.js";import{V as ul,a as ee}from"./VTable-q67WtlrN.js";import{_ as we}from"./DeleteDialog.vue_vue_type_script_setup_true_lang-PumkJ2r3.js";import{u as me}from"./useModel-BbBtGxsQ.js";import{_ as qe}from"./ModelDialog.vue_vue_type_script_setup_true_lang-CHXn1ybG.js";import{V as Je}from"./VDivider-ZcqsG1Jq.js";import{V as We}from"./VDataTable-CJMQxeyQ.js";import{a as il,F as dl}from"./form-Cqw16b_M.js";import{b as sl}from"./forwardRefs-eETTs2OE.js";import{E as rl}from"./EditConventionDialog-PJcNAx90.js";import{V as ml}from"./VTooltip-CUzKju-Y.js";import{V as vl}from"./VForm-B_aSgFQH.js";import{a as pl,V as fl}from"./VAlert-BOpB1Fc3.js";import{V as Fe,a as Ne,b as Re,c as Pe}from"./VTabs-D_Ja2bsR.js";import"./submission-DAi9v6uc.js";import"./copyToClipboard-BtcEYe2-.js";import"./useStoreAPI-BTglxX10.js";import"./VFileInput-Bt7c_lwT.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VCheckboxBtn-DiqW-hDf.js";import"./userData-BcsneAKF.js";import"./VOverlay-CvyUcxRh.js";import"./layout-D4idIlmp.js";import"./createSimpleFunctional-CHcR6aXl.js";import"./form-CgSGftDi.js";var ke=(I=>(I.PER_ROOM="PER_ROOM",I.PER_PERSON="PER_PERSON",I))(ke||{});const cl=O({__name:"EditConventionExtraOptions",props:q({convention:{}},{modelValue:{},modelModifiers:{}}),emits:q(["close"],["update:modelValue"]),setup(I,{emit:m}){const u=m,d=M(I,"modelValue"),r=b(H(d.value)),i=()=>{d.value=r.value,u("close")};return(a,n)=>(f(),C(se,null,{default:l(()=>[e(ie,{dark:"",color:"primary"},{default:l(()=>[e(R,{icon:"",dark:"",onClick:n[0]||(n[0]=t=>u("close"))},{default:l(()=>[e(J,null,{default:l(()=>n[6]||(n[6]=[k("mdi:mdi-close")])),_:1})]),_:1}),e(de,null,{default:l(()=>n[7]||(n[7]=[k("Edit Option Choice")])),_:1}),e(ae),e(De,null,{default:l(()=>[e(R,{variant:"text",onClick:i},{default:l(()=>n[8]||(n[8]=[k(" Apply ")])),_:1})]),_:1})]),_:1}),e(Te,{class:"pa-0"},{default:l(()=>[e(z,null,{default:l(()=>[e(F,{label:D(w).formLabelName,type:"text",variant:"outlined",modelValue:r.value.Name,"onUpdate:modelValue":n[1]||(n[1]=t=>r.value.Name=t)},null,8,["label","modelValue"]),e(F,{label:D(w).formLabelDescription,type:"text",variant:"outlined",modelValue:r.value.Description,"onUpdate:modelValue":n[2]||(n[2]=t=>r.value.Description=t)},null,8,["label","modelValue"]),e(F,{label:D(w).formLabelPrice,type:"text",variant:"outlined","prepend-icon":D(w).currencyIcon,modelValue:r.value.Price,"onUpdate:modelValue":n[3]||(n[3]=t=>r.value.Price=t),modelModifiers:{number:!0},hint:"Adds additional charges for selecting this option"},null,8,["label","prepend-icon","modelValue"]),e(Z,{modelValue:r.value.Tags,"onUpdate:modelValue":n[4]||(n[4]=t=>r.value.Tags=t),convention:a.convention,hint:"Tags acquired by selecting this option & any choice within it."},null,8,["modelValue","convention"]),r.value.Choices?(f(),C(Z,{key:0,modelValue:r.value.Choices,"onUpdate:modelValue":n[5]||(n[5]=t=>r.value.Choices=t),convention:a.convention,hint:"Sub-options (tags) that a user may choose from."},null,8,["modelValue","convention"])):N("",!0)]),_:1})]),_:1})]),_:1}))}}),Vl=O({__name:"EditConventionExtra",props:q({convention:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(I){const m=M(I,"modelValue"),u=b(H(m.value)),d=b(!1),r=b(0),i=B(),a=b([""]),n=b([]),t=b([]);I.convention&&(i.getConventionTags(I.convention.ConventionUUID).then(s=>{t.value=s.sort((V,g)=>V.Title.localeCompare(g.Title))}),i.getOrganisationTags(I.convention.OrganisationUUID).then(s=>{n.value=s.sort((V,g)=>V.Title.localeCompare(g.Title))}));const o=te(()=>[...n.value,...t.value]),v=({callback:s})=>{i.saveExtra(u.value).then(V=>{V?(m.value=V,s&&s("Extra Saved")):s&&s("Failed to Save Extra")}).catch(()=>{s&&s("Failed to Save Extra")})},p=s=>{var V;s.Options||(s.Options=[]),s.Options.push({ID:0,OptionUUID:L(),ExtraID:s.ID,ExtraUUID:s.ExtraUUID,Order:((V=s.Options)==null?void 0:V.length)+1,Name:"",Description:"",Price:0,Choices:[],Tags:[]})},U=(s,V)=>{s.Options&&s.Options.splice(V,1)},c=s=>{if(s.Choices&&s.Choices.length>0)return s.Choices.map(V=>{const g=o.value.find(P=>P.TagUUID===V.TagUUID);if(g)return g.Title}).join(", ")};return(s,V)=>(f(),_(A,null,[e(z,{class:"px-0"},{default:l(()=>[e(F,{label:D(w).formLabelName,type:"text",variant:"outlined",modelValue:u.value.Name,"onUpdate:modelValue":V[0]||(V[0]=g=>u.value.Name=g)},null,8,["label","modelValue"]),e(F,{label:D(w).formLabelDescription,type:"text",variant:"outlined",modelValue:u.value.Description,"onUpdate:modelValue":V[1]||(V[1]=g=>u.value.Description=g)},null,8,["label","modelValue"]),e(Z,{modelValue:u.value.AppliesTags,"onUpdate:modelValue":V[2]||(V[2]=g=>u.value.AppliesTags=g),convention:s.convention,organisation:s.convention.OrganisationUUID,hint:"Tags a user acquires by selecting any option within this addon purchase."},null,8,["modelValue","convention","organisation"]),e(Z,{label:"Required Tags",variant:"outlined",modelValue:u.value.RequiredTags,"onUpdate:modelValue":V[3]||(V[3]=g=>u.value.RequiredTags=g),convention:s.convention,organisation:s.convention.OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user must have to see this form. (Any one)"},null,8,["modelValue","convention","organisation"]),e(He,{label:"Required Groups",variant:"outlined",modelValue:u.value.RequiredGroupMemberships,"onUpdate:modelValue":V[4]||(V[4]=g=>u.value.RequiredGroupMemberships=g),convention:s.convention,organisation:s.convention.OrganisationUUID,chips:"",clearable:"",hint:"Groups that a user must be in to see this form. (Any one)"},null,8,["modelValue","convention","organisation"]),V[11]||(V[11]=S("h3",null,"Options",-1)),e(_e,{opened:a.value,"onUpdate:opened":V[5]||(V[5]=g=>a.value=g)},{default:l(()=>[(f(!0),_(A,null,K(u.value.Options,(g,P)=>(f(),_(A,{key:g.ID},[g?(f(),C(ne,{key:0,"prepend-icon":"mdi:mdi-ticket-percent",title:`${g.Name} ${g.Price&&g.Price>0?`(${D(w).currencySymbol}${g.Price})`:""}`},{append:l(()=>[e(R,{color:"red",icon:"mdi:mdi-close",size:"x-small",class:"mr-1",onClick:y=>U(u.value,P)},null,8,["onClick"]),e(R,{color:"primary",icon:"mdi:mdi-pencil",size:"x-small",onClick:y=>{d.value=!0,r.value=P}},null,8,["onClick"])]),default:l(()=>[g.Choices&&g.Choices.length>0?(f(),C(le,{key:0},{default:l(()=>[k(" Options: "+$(c(g)),1)]),_:2},1024)):N("",!0)]),_:2},1032,["title"])):N("",!0)],64))),128))]),_:1},8,["opened"]),e(R,{color:"primary",onClick:V[6]||(V[6]=g=>p(u.value))},{default:l(()=>V[10]||(V[10]=[k("Add Option")])),_:1}),e(x,null,{default:l(()=>[e(T,{class:"text-right"},{default:l(()=>[e(Q,{onClick:v})]),_:1})]),_:1})]),_:1}),e(ye,{modelValue:d.value,"onUpdate:modelValue":V[9]||(V[9]=g=>d.value=g),scrollable:""},{default:l(()=>[e(cl,{modelValue:u.value.Options[r.value],"onUpdate:modelValue":V[7]||(V[7]=g=>u.value.Options[r.value]=g),convention:s.convention,onClose:V[8]||(V[8]=g=>d.value=!1)},null,8,["modelValue","convention"])]),_:1},8,["modelValue"])],64))}}),Ul=O({__name:"EditConventionExtras",props:q({convention:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:q(["close"],["update:modelValue"]),setup(I,{emit:m}){const u=m,d=M(I,"modelValue"),r=B(),i=()=>{const t={ID:0,ExtraUUID:L(),ConventionID:I.convention.ID,ConventionUUID:I.convention.ConventionUUID,Order:d.value.length+1,Name:"New Extra",Description:"",AppliesTags:[],RequiredTags:[],RequiredGroupMemberships:[],Options:[],Tags:[]};r.saveExtra(t).then(o=>{o&&d.value.push(o)})},a=t=>{r.deleteExtra(d.value[t].ExtraUUID).then(o=>{o&&d.value.splice(t,1)})},n=(...t)=>{t.forEach(o=>{o>=0&&o<d.value.length&&r.saveExtra(d.value[o])})};return(t,o)=>(f(),C(se,null,{default:l(()=>[e(ie,{dark:"",color:"primary"},{default:l(()=>[e(de,null,{default:l(()=>o[1]||(o[1]=[k("Edit Extras")])),_:1}),e(ae),e(De,null,{default:l(()=>[e(R,{variant:"text",onClick:i},{default:l(()=>o[2]||(o[2]=[k(" Add ")])),_:1}),e(R,{icon:"",dark:"",onClick:o[0]||(o[0]=v=>u("close"))},{default:l(()=>[e(J,null,{default:l(()=>o[3]||(o[3]=[k("mdi:mdi-close")])),_:1})]),_:1})]),_:1})]),_:1}),e(Te,{class:"pa-0"},{default:l(()=>[e(ve,null,{default:l(()=>[(f(!0),_(A,null,K(d.value,(v,p)=>(f(),C(pe,{key:v.ID,class:"mt-0"},{default:l(()=>[e(fe,null,{actions:l(({expanded:U})=>[e(R,{icon:"mdi:mdi-close",size:"x-small",color:"red",class:"mr-1",onClick:c=>a(p)},null,8,["onClick"]),e(J,{class:"align-self-center text-h5",icon:U?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:l(()=>[e(R,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:ue(U=>{D(Oe)(v,d.value),n(p,p-1)},["stop"])},null,8,["onClick"]),e(R,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:ue(U=>{D(Me)(v,d.value),n(p,p+1)},["stop"])},null,8,["onClick"]),k(" "+$(v.Name)+" ",1)]),_:2},1024),e(ce,{class:"px-0"},{default:l(()=>[e(Vl,{convention:t.convention,modelValue:d.value[p],"onUpdate:modelValue":U=>d.value[p]=U},null,8,["convention","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Dl=O({__name:"Extras",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(I){const m=M(I,"modelValue"),u=b([]),d=B(),r=b([""]),i=b(!1),a=t=>{if(t.Choices&&t.Choices.length>0)return t.Choices.map(o=>o.Title).join(", ")},n=()=>{i.value=!1};return d==null||d.getConventionExtras(m.value.ConventionUUID||"").then(t=>{t&&(u.value=t)}),(t,o)=>(f(),_(A,null,[e(z,{fluid:!0,class:"px-0"},{default:l(()=>[e(x,null,{default:l(()=>[e(T,null,{default:l(()=>o[4]||(o[4]=[S("h3",null,"Additional Purchases",-1)])),_:1}),e(T,{class:"text-right"},{default:l(()=>[e(R,{color:"primary",onClick:o[0]||(o[0]=v=>i.value=!0)},{default:l(()=>o[5]||(o[5]=[k("Edit")])),_:1})]),_:1})]),_:1})]),_:1}),o[6]||(o[6]=S("p",null,"These are global ticket addons that are not tied to any particular ticket type.",-1)),e(_e,{opened:r.value,"onUpdate:opened":o[1]||(o[1]=v=>r.value=v)},{default:l(()=>[(f(!0),_(A,null,K(u.value,v=>(f(),C(xe,{key:v.ID,value:v.ID},{activator:l(({props:p})=>[e(ne,Ce({ref_for:!0},p,{"prepend-icon":"mdi:mdi-group",title:v.Name}),null,16,["title"])]),default:l(()=>[v.Options?(f(!0),_(A,{key:0},K(v.Options,p=>(f(),C(ne,{key:p.ID,"prepend-icon":"mdi:mdi-ticket-percent",title:`${p.Name} ${p.Price&&p.Price>0?`(${D(w).currencySymbol}${p.Price})`:""}`},{default:l(()=>[p.Choices&&p.Choices.length>0?(f(),C(le,{key:0},{default:l(()=>[k(" Options: "+$(a(p)),1)]),_:2},1024)):N("",!0)]),_:2},1032,["title"]))),128)):N("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"]),e(ye,{modelValue:i.value,"onUpdate:modelValue":o[3]||(o[3]=v=>i.value=v),scrollable:!0,persistent:!0,fullscreen:!0},{default:l(()=>[e(Ul,{modelValue:u.value,"onUpdate:modelValue":o[2]||(o[2]=v=>u.value=v),convention:m.value,onClose:n},null,8,["modelValue","convention"])]),_:1},8,["modelValue"])],64))}}),Tl=O({__name:"EditConventionInterest",props:q({convention:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(I){const m=M(I,"modelValue"),u=b(H(m.value)),d=B(),r=({callback:i})=>{d.saveInterest(u.value).then(a=>{a?(m.value=a,i&&i("Interest Saved")):i&&i("Failed to Save Interest")}).catch(()=>{i&&i("Failed to Save Interest")})};return(i,a)=>(f(),C(z,{class:"px-0"},{default:l(()=>[e(F,{label:D(w).formLabelName,type:"text",variant:"outlined",modelValue:u.value.Name,"onUpdate:modelValue":a[0]||(a[0]=n=>u.value.Name=n)},null,8,["label","modelValue"]),e(Ve,{label:D(w).formLabelDescription,type:"text",variant:"outlined",modelValue:u.value.Description,"onUpdate:modelValue":a[1]||(a[1]=n=>u.value.Description=n)},null,8,["label","modelValue"]),N("",!0),e(Z,{modelValue:u.value.AppliesTags,"onUpdate:modelValue":a[3]||(a[3]=n=>u.value.AppliesTags=n),convention:i.convention,organisation:i.convention.OrganisationUUID,hint:"Tags that a user acquires by selecting this interest."},null,8,["modelValue","convention","organisation"]),e(x,null,{default:l(()=>[e(T,{class:"text-right"},{default:l(()=>[e(Q,{onClick:r})]),_:1})]),_:1})]),_:1}))}}),yl=O({__name:"EditConventionInterests",props:q({convention:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:q(["close"],["update:modelValue"]),setup(I,{emit:m}){const u=m,d=M(I,"modelValue"),r=B(),i=()=>{const t={ID:0,InterestUUID:L(),ConventionID:I.convention.ID,ConventionUUID:I.convention.ConventionUUID,Order:d.value.length+1,Name:"New Interest",Description:"",Price:0,AppliesTags:[]};r.saveInterest(t).then(o=>{o&&d.value.push(o)})},a=t=>{r.deleteInterest(d.value[t].InterestUUID).then(o=>{o&&d.value.splice(t,1)})},n=(...t)=>{t.forEach(o=>{o>=0&&o<d.value.length&&r.saveInterest(d.value[o])})};return(t,o)=>(f(),C(se,null,{default:l(()=>[e(ie,{dark:"",color:"primary"},{default:l(()=>[e(de,null,{default:l(()=>o[1]||(o[1]=[k("Edit Interests")])),_:1}),e(ae),e(De,null,{default:l(()=>[e(R,{variant:"text",onClick:i},{default:l(()=>o[2]||(o[2]=[k(" Add ")])),_:1}),e(R,{icon:"",dark:"",onClick:o[0]||(o[0]=v=>u("close"))},{default:l(()=>[e(J,null,{default:l(()=>o[3]||(o[3]=[k("mdi:mdi-close")])),_:1})]),_:1})]),_:1})]),_:1}),e(Te,{class:"pa-0"},{default:l(()=>[e(ve,null,{default:l(()=>[(f(!0),_(A,null,K(d.value,(v,p)=>(f(),C(pe,{key:v.ID,class:"mt-0"},{default:l(()=>[e(fe,null,{actions:l(({expanded:U})=>[e(Q,{class:"mr-1",color:"red",icon:"mdi:mdi-close",size:"x-small",onClick:c=>a(p)},null,8,["onClick"]),e(J,{class:"align-self-center text-h5",icon:U?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:l(()=>[e(R,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:ue(U=>{D(Oe)(v,d.value),n(p,p-1)},["stop"])},null,8,["onClick"]),e(R,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:ue(U=>{D(Me)(v,d.value),n(p,p+1)},["stop"])},null,8,["onClick"]),k(" "+$(v.Name)+" ",1)]),_:2},1024),e(ce,{class:"px-0"},{default:l(()=>[e(Tl,{convention:t.convention,modelValue:d.value[p],"onUpdate:modelValue":U=>d.value[p]=U},null,8,["convention","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Il=O({__name:"Interests",props:{modelValue:{required:!0},modelModifiers:{}},emits:q(["refresh"],["update:modelValue"]),setup(I){const m=M(I,"modelValue"),u=B(),d=b([]);u.getConventionInterests(m.value.ConventionUUID).then(a=>{Ge(a),d.value=a});const r=b([""]),i=b(!1);return(a,n)=>(f(),_(A,null,[e(z,{fluid:!0,class:"px-0"},{default:l(()=>[e(x,null,{default:l(()=>[e(T,null,{default:l(()=>n[5]||(n[5]=[S("h3",null,"Interests",-1)])),_:1}),e(T,{class:"text-right"},{default:l(()=>[e(R,{color:"primary",onClick:n[0]||(n[0]=t=>i.value=!0)},{default:l(()=>n[6]||(n[6]=[k("Edit")])),_:1})]),_:1})]),_:1})]),_:1}),n[7]||(n[7]=S("p",null,"Attendees can tag themselves for particular things.",-1)),e(_e,{opened:r.value,"onUpdate:opened":n[1]||(n[1]=t=>r.value=t)},{default:l(()=>[(f(!0),_(A,null,K(d.value,t=>(f(),C(ne,{key:t.ID,"prepend-icon":"mdi:mdi-checkbox-marked-outline",title:`${t.Name} ${t.Price&&t.Price>0?`(${D(w).currencySymbol}${t.Price})`:""}`},{default:l(()=>[t.Description?(f(),C(le,{key:0},{default:l(()=>[k($(t.Description),1)]),_:2},1024)):N("",!0)]),_:2},1032,["title"]))),128))]),_:1},8,["opened"]),e(ye,{modelValue:i.value,"onUpdate:modelValue":n[4]||(n[4]=t=>i.value=t),scrollable:!0,fullscreen:!0,persistent:!0},{default:l(()=>[e(yl,{onClose:n[2]||(n[2]=t=>i.value=!1),convention:m.value,modelValue:d.value,"onUpdate:modelValue":n[3]||(n[3]=t=>d.value=t)},null,8,["convention","modelValue"])]),_:1},8,["modelValue"])],64))}}),Ie=O({__name:"SelectTickets",props:q({chips:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},hint:{default:"Tickets that belong to this group."},label:{default:"Tickets"},persistentHint:{type:Boolean,default:!1},tickets:{default:()=>[]},variant:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(I){const m=M(I,"modelValue"),u=r=>r.Type===G.TICKET_TYPE_GROUP?"mdi:mdi-group":r.Type===G.TICKET_TYPE_TICKET?r.RequiresAccommodation?"mdi:mdi-home":r.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket":r.Type===G.TICKET_TYPE_TICKET_COMPONENT?"mdi:mdi-cog-outline":r.Type===G.TICKET_TYPE_ADD_ON?"mdi:mdi-home-plus":"mdi:mdi-help",d=te(()=>I.tickets.map(r=>({title:r.Name,value:m.value.find(i=>i&&i.TicketUUID===r.TicketUUID)||r,props:{appendIcon:u(r)}})));return(r,i)=>(f(),_("div",null,[e(nl,{label:r.label,variant:r.variant||"filled",items:d.value,"item-title":"title","item-value":"value","item-props":"props",modelValue:m.value,"onUpdate:modelValue":i[0]||(i[0]=a=>m.value=a),hint:r.hint,chips:r.chips,clearable:r.clearable,multiple:"","persistent-hint":r.persistentHint},null,8,["label","variant","items","modelValue","hint","chips","clearable","persistent-hint"])]))}}),gl=O({__name:"EditConventionTicket",props:q({accommodation:{default:()=>[]},convention:{},tickets:{default:()=>[]}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(I){const m=M(I,"modelValue"),u=b(H(m.value)),d=B(),r=te(()=>I.tickets.filter(o=>o.Type===G.TICKET_TYPE_TICKET)),i=te(()=>I.tickets.filter(o=>o.Type===G.TICKET_TYPE_ADD_ON)),a=te(()=>I.tickets.filter(o=>o.Type===G.TICKET_TYPE_TICKET_COMPONENT)),n=o=>I.accommodation.filter(v=>v.Costs.find(p=>p.DateStart===o.DateStart&&p.DateEnd===o.DateEnd)),t=({callback:o})=>{d.saveTicket(u.value).then(v=>{v?(u.value.ID=v.ID,u.value.TicketUUID=v.TicketUUID,m.value=u.value,o&&o("Ticket Saved")):o&&o("Failed to Save Ticket")}).catch(()=>{o&&o("Failed to Save Ticket")})};return(o,v)=>(f(),C(z,{class:"px-0",fluid:""},{default:l(()=>[e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(re,{label:"Ticket Type",variant:"outlined",modelValue:u.value.Type,"onUpdate:modelValue":v[0]||(v[0]=p=>u.value.Type=p),items:D(ol),"item-title":"title","item-value":"value","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(F,{label:D(w).formLabelName,type:"text",variant:"outlined",modelValue:u.value.Name,"onUpdate:modelValue":v[1]||(v[1]=p=>u.value.Name=p),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(F,{label:D(w).formLabelDescription,type:"text",variant:"outlined",modelValue:u.value.Description,"onUpdate:modelValue":v[2]||(v[2]=p=>u.value.Description=p),"hide-details":""},null,8,["label","modelValue"])]),_:1}),u.value.Type!==D(G).TICKET_TYPE_GROUP?(f(),_(A,{key:0},[e(T,{cols:"12"},{default:l(()=>[e(W,{label:D(w).formLabelRequiresAccommodation,modelValue:u.value.RequiresAccommodation,"onUpdate:modelValue":v[3]||(v[3]=p=>u.value.RequiresAccommodation=p),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(F,{label:D(w).formLabelDateStart,type:"date",variant:"outlined",modelValue:u.value.DateStart,"onUpdate:modelValue":v[4]||(v[4]=p=>u.value.DateStart=p),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(F,{label:D(w).formLabelDateEnd,type:"date",variant:"outlined",modelValue:u.value.DateEnd,"onUpdate:modelValue":v[5]||(v[5]=p=>u.value.DateEnd=p),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(F,{label:D(w).formLabelPrice,type:"text",variant:"outlined","prepend-inner-icon":D(w).currencyIcon,modelValue:u.value.Price,"onUpdate:modelValue":v[6]||(v[6]=p=>u.value.Price=p),modelModifiers:{number:!0},"persistent-hint":"",hint:"Adds additional charges for selecting this ticket"},null,8,["label","prepend-inner-icon","modelValue"])]),_:1})],64)):(f(),C(T,{key:1,cols:"12"},{default:l(()=>[e(Ie,{label:"Tickets",variant:"outlined",tickets:r.value,modelValue:u.value.Tickets,"onUpdate:modelValue":v[7]||(v[7]=p=>u.value.Tickets=p),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Tickets that belong to this group."},null,8,["tickets","modelValue"])]),_:1})),e(T,{cols:"12"},{default:l(()=>[e(Z,{label:"Applied Tags",variant:"outlined",modelValue:u.value.AppliesTags,"onUpdate:modelValue":v[8]||(v[8]=p=>u.value.AppliesTags=p),convention:o.convention,organisation:o.convention.OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user acquires by selecting this ticket."},null,8,["modelValue","convention","organisation"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(Z,{label:"Required Tags",variant:"outlined",modelValue:u.value.RequiredTags,"onUpdate:modelValue":v[9]||(v[9]=p=>u.value.RequiredTags=p),convention:o.convention,organisation:o.convention.OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user must have to see this ticket."},null,8,["modelValue","convention","organisation"])]),_:1}),u.value.Type===D(G).TICKET_TYPE_TICKET?(f(),_(A,{key:2},[e(T,{cols:"12"},{default:l(()=>[e(F,{label:"Components Required",type:"number",variant:"outlined",modelValue:u.value.ComponentsRequired,"onUpdate:modelValue":v[10]||(v[10]=p=>u.value.ComponentsRequired=p),modelModifiers:{number:!0},"persistent-hint":"",hint:"How many components must be selected."},null,8,["modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(Ie,{label:"Components",variant:"outlined",tickets:a.value,modelValue:u.value.TicketComponents,"onUpdate:modelValue":v[11]||(v[11]=p=>u.value.TicketComponents=p),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Components that are part of this ticket (and others)."},null,8,["tickets","modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(Ie,{label:"Addons",variant:"outlined",tickets:i.value,modelValue:u.value.AddonTickets,"onUpdate:modelValue":v[12]||(v[12]=p=>u.value.AddonTickets=p),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Optional ticket addons that apply for this ticket."},null,8,["tickets","modelValue"])]),_:1})],64)):N("",!0),e(T,{cols:"12"},{default:l(()=>[e(Ie,{label:"Disables Tickets",variant:"outlined",tickets:o.tickets,modelValue:u.value.DisablesTickets,"onUpdate:modelValue":v[13]||(v[13]=p=>u.value.DisablesTickets=p),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Tickets that are mutually exclusive and can't be selected if this one is."},null,8,["tickets","modelValue"])]),_:1})]),_:1}),n(u.value).length?(f(),C(x,{key:0,class:"align-center",dense:!0},{default:l(()=>[e(T,{class:"flex-grow-0 flex-shrink-1 text-no-wrap font-italic"},{default:l(()=>v[14]||(v[14]=[S("p",{title:"Automatically calculated",class:"text-grey-lighten-1"},"Applicable Accommodation:",-1)])),_:1}),e(T,{class:"flex-grow-1"},{default:l(()=>[e(je,null,{default:l(()=>[(f(!0),_(A,null,K(n(u.value),p=>(f(),C(ze,{key:p.ID,title:"Automatically calculated",disabled:!0},{default:l(()=>[k($(p.Name),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):N("",!0),e(x,null,{default:l(()=>[e(T,{class:"text-right"},{default:l(()=>[e(Q,{onClick:t})]),_:1})]),_:1})]),_:1}))}}),Cl={class:"pr-2"},bl={class:"mb-2"},kl={key:0,class:"text-grey-darken-1 font-italic"},El={key:1,class:"text-red"},_l={key:0,class:"text-grey-darken-1 font-italic"},Sl={key:1,class:"text-red"},Al={key:0,class:"text-grey-darken-1 font-italic"},xl={key:1,class:"text-red"},Fl={class:"text-grey-darken-1"},Nl=O({__name:"EditConventionTickets",props:q({accommodation:{default:()=>[]},convention:{}},{modelValue:{default:[]},modelModifiers:{}}),emits:q(["close"],["update:modelValue"]),setup(I,{emit:m}){const u=M(I,"modelValue"),d=m,r=B(),i=()=>{u.value.push({ID:0,TicketUUID:L(),ConventionID:I.convention.ID,ConventionUUID:I.convention.ConventionUUID,Order:u.value.length+1,Name:"New Ticket",Type:G.TICKET_TYPE_GROUP,Description:"",DateStart:"",DateEnd:"",Price:0,Tickets:[],RequiresAccommodation:!1,AppliesTags:[],RequiredTags:[],RequiredGroupMemberships:[],TicketComponents:[],ComponentsRequired:0,AddonTickets:[],DisablesTickets:[]})},a=t=>{r.deleteTicket(u.value[t].TicketUUID).then(o=>{o&&u.value.splice(t,1)})},n=t=>t.Type===G.TICKET_TYPE_GROUP?"mdi:mdi-group":t.Type===G.TICKET_TYPE_TICKET?t.RequiresAccommodation?"mdi:mdi-home":t.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket":t.Type===G.TICKET_TYPE_TICKET_COMPONENT?"mdi:mdi-cog-outline":t.Type===G.TICKET_TYPE_ADD_ON?"mdi:mdi-home-plus":"mdi:mdi-help";return(t,o)=>(f(),C(se,null,{default:l(()=>[e(ie,{dark:"",color:"primary"},{default:l(()=>[e(de,null,{default:l(()=>o[1]||(o[1]=[k("Edit Tickets")])),_:1}),e(ae),e(De,null,{default:l(()=>[e(R,{variant:"text",onClick:i},{default:l(()=>o[2]||(o[2]=[k(" Add Ticket ")])),_:1}),e(R,{icon:"",dark:"",onClick:o[0]||(o[0]=v=>d("close"))},{default:l(()=>[e(J,null,{default:l(()=>o[3]||(o[3]=[k("mdi:mdi-close")])),_:1})]),_:1})]),_:1})]),_:1}),e(Te,{class:"pa-0"},{default:l(()=>[e(ve,null,{default:l(()=>[(f(!0),_(A,null,K(u.value,(v,p)=>(f(),C(pe,{key:v.ID,class:"mt-0"},{default:l(()=>[e(fe,{class:"py-2"},{actions:l(({expanded:U})=>[e(Q,{class:"mr-1",color:"red",icon:"mdi:mdi-close",size:"x-small",onClick:c=>a(p)},null,8,["onClick"]),e(J,{class:"align-self-center text-h5",icon:U?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:l(()=>[e(R,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:ue(U=>D(Oe)(v,u.value),["stop"])},null,8,["onClick"]),e(R,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:ue(U=>D(Me)(v,u.value),["stop"])},null,8,["onClick"]),S("div",Cl,[e(J,{icon:n(v)},null,8,["icon"])]),S("div",null,[S("p",bl,[k($(v.Name)+" ",1),v.Type===D(G).TICKET_TYPE_TICKET?(f(),_(A,{key:0},[u.value.find(U=>U.Type===D(G).TICKET_TYPE_GROUP&&U.Tickets.find(c=>c&&c.TicketUUID===v.TicketUUID))?(f(),_("span",kl," ("+$(u.value.filter(U=>U.Type===D(G).TICKET_TYPE_GROUP&&U.Tickets.find(c=>c&&c.TicketUUID===v.TicketUUID)).map(U=>U.Name).join(", "))+") ",1)):(f(),_("span",El," (Ticket does not belong to any categories.) "))],64)):N("",!0),v.Type===D(G).TICKET_TYPE_ADD_ON?(f(),_(A,{key:1},[u.value.find(U=>U.Type===D(G).TICKET_TYPE_TICKET&&U.AddonTickets.find(c=>c&&c.TicketUUID===v.TicketUUID))?(f(),_("span",_l," ("+$(u.value.filter(U=>U.Type===D(G).TICKET_TYPE_TICKET&&U.AddonTickets.find(c=>c&&c.TicketUUID===v.TicketUUID)).map(U=>U.Name).join(", "))+") ",1)):(f(),_("span",Sl," (Ticket addon must be associated to at least one ticket.) "))],64)):N("",!0),v.Type===D(G).TICKET_TYPE_TICKET_COMPONENT?(f(),_(A,{key:2},[u.value.find(U=>U.Type===D(G).TICKET_TYPE_TICKET&&U.TicketComponents.find(c=>c&&c.TicketUUID===v.TicketUUID))?(f(),_("span",Al," ("+$(u.value.filter(U=>U.Type===D(G).TICKET_TYPE_TICKET&&U.TicketComponents.find(c=>c&&c.TicketUUID===v.TicketUUID)).map(U=>U.Name).join(", "))+") ",1)):(f(),_("span",xl," (Component has not been assigned to any tickets.) "))],64)):N("",!0)]),S("p",Fl,[v.Type===D(G).TICKET_TYPE_GROUP?(f(),_(A,{key:0},[k("Category")],64)):v.Type===D(G).TICKET_TYPE_TICKET?(f(),_(A,{key:1},[o[4]||(o[4]=k(" Ticket ")),v.ComponentsRequired>0?(f(),_(A,{key:0},[k(" ("+$(v.ComponentsRequired)+" component"+$(v.ComponentsRequired>1?"s":"")+" required) ",1)],64)):N("",!0)],64)):N("",!0),v.Type===D(G).TICKET_TYPE_TICKET_COMPONENT?(f(),_(A,{key:2},[k("Component")],64)):N("",!0),v.Type===D(G).TICKET_TYPE_ADD_ON?(f(),_(A,{key:3},[k("Addon")],64)):N("",!0)])])]),_:2},1024),e(ce,{class:"px-0"},{default:l(()=>[e(gl,{accommodation:t.accommodation,convention:t.convention,tickets:u.value,modelValue:u.value[p],"onUpdate:modelValue":U=>u.value[p]=U},null,8,["accommodation","convention","tickets","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Rl=O({__name:"Tickets",props:{modelValue:{required:!0},modelModifiers:{}},emits:q(["refresh"],["update:modelValue"]),setup(I){var p;const m=M(I,"modelValue"),u=B(),d=b([]),r=b([]);u.getConventionTickets(((p=m.value)==null?void 0:p.ConventionUUID)||"").then(U=>{Ge(U),d.value=U});const i=b([""]),a=b(!1),n=U=>U.AddonTickets&&U.AddonTickets.map(c=>d.value&&d.value.find(s=>s.ID===c.ID)),t=U=>U.TicketComponents&&U.TicketComponents.map(c=>d.value&&d.value.find(s=>s.ID===c.ID)),o=U=>"",v=U=>r.value.filter(c=>c.Costs.find(s=>s.DateStart===U.DateStart&&s.DateEnd===U.DateEnd)).map(c=>c.Name).join(", ");return(U,c)=>(f(),_(A,null,[e(z,{fluid:!0,class:"px-0"},{default:l(()=>[e(x,null,{default:l(()=>[e(T,null,{default:l(()=>c[5]||(c[5]=[S("h3",null,"Tickets",-1)])),_:1}),e(T,{class:"text-right"},{default:l(()=>[e(R,{color:"primary",onClick:c[0]||(c[0]=s=>a.value=!0)},{default:l(()=>c[6]||(c[6]=[k("Edit")])),_:1})]),_:1})]),_:1})]),_:1}),c[7]||(c[7]=S("p",null,"Ticket options, along with all sub-types and options applicable to them.",-1)),e(_e,{opened:i.value,"onUpdate:opened":c[1]||(c[1]=s=>i.value=s)},{default:l(()=>[(f(!0),_(A,null,K(d.value.filter(s=>s.Type===D(G).TICKET_TYPE_GROUP),s=>(f(),C(xe,{key:s.ID,value:s.ID},{activator:l(({props:V})=>[e(ne,Ce({ref_for:!0},V,{"prepend-icon":"mdi:mdi-group",title:s.Name}),null,16,["title"])]),default:l(()=>[(f(!0),_(A,null,K(d.value.filter(V=>s.Tickets.find(g=>g&&V&&g.TicketUUID===V.TicketUUID)),V=>(f(),_(A,{key:V.ID},[V.AddonTickets&&V.AddonTickets.length?(f(),C(xe,{key:0,value:V.ID},{activator:l(({props:g})=>[e(ne,Ce({ref_for:!0},g,{"prepend-icon":V.RequiresAccommodation?"mdi:mdi-home":V.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",title:`${V.Name} ${V.Price>0?`(${D(w).currencySymbol}${V.Price})`:""}`}),{default:l(()=>[V.ComponentsRequired>0?(f(),C(le,{key:0},{default:l(()=>[k(" Options: "+$(t(V).map(P=>P&&P.Name).join(", ")),1)]),_:2},1024)):N("",!0),V.RequiresAccommodation&&v(V)?(f(),C(le,{key:1},{default:l(()=>[k(" Accommodation: "+$(v(V)),1)]),_:2},1024)):N("",!0)]),_:2},1040,["prepend-icon","title"])]),default:l(()=>[(f(!0),_(A,null,K(n(V),g=>(f(),_(A,{key:g},[g?(f(),C(ne,{key:0,title:`${g.Name} ${g.Price>0?`(${D(w).currencySymbol}${g.Price})`:""}`,"prepend-icon":"mdi:mdi-home-plus"},{default:l(()=>[g.RequiredTags&&g.RequiredTags.length>0?(f(),C(le,{key:0},{default:l(()=>[k(" Required Tags: "+$(g.RequiredTags.join(", ")),1)]),_:2},1024)):N("",!0),g.RequiredGroupMemberships&&g.RequiredGroupMemberships.length>0?(f(),C(le,{key:1},{default:l(()=>[k(" Required Groups: "+$(o(g.RequiredGroupMemberships)),1)]),_:2},1024)):N("",!0),v(g)?(f(),C(le,{key:2},{default:l(()=>[k(" Accommodation: "+$(v(g)),1)]),_:2},1024)):N("",!0)]),_:2},1032,["title"])):N("",!0)],64))),128))]),_:2},1032,["value"])):(f(),C(ne,{key:1,"prepend-icon":V.RequiresAccommodation?"mdi:mdi-home":V.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",title:`${V.Name} ${V.Price>0?`(${D(w).currencySymbol}${V.Price})`:""}`},{default:l(()=>[V.ComponentsRequired>0?(f(),C(le,{key:0},{default:l(()=>[k(" Options: "+$(t(V).map(g=>g&&g.Name).join(", ")),1)]),_:2},1024)):N("",!0)]),_:2},1032,["prepend-icon","title"]))],64))),128))]),_:2},1032,["value"]))),128))]),_:1},8,["opened"]),e(ye,{modelValue:a.value,"onUpdate:modelValue":c[4]||(c[4]=s=>a.value=s),scrollable:!0,fullscreen:!0,persistent:!0},{default:l(()=>[e(Nl,{onClose:c[2]||(c[2]=s=>a.value=!1),modelValue:d.value,"onUpdate:modelValue":c[3]||(c[3]=s=>d.value=s),accommodation:r.value,convention:m.value},null,8,["modelValue","accommodation","convention"])]),_:1},8,["modelValue"])],64))}}),Pl=O({__name:"VenueRoomCost",props:{modelValue:{required:!0},modelModifiers:{}},emits:q(["deleted"],["update:modelValue"]),setup(I,{emit:m}){const u=m,d=M(I,"modelValue"),r=[{title:"Per Room",value:"PER_ROOM"},{title:"Per Person",value:"PER_PERSON"}],i=()=>{u("deleted")};return(a,n)=>(f(),C(x,{dense:""},{default:l(()=>[e(T,{cols:"12",sm:"4",md:"2",lg:"2"},{default:l(()=>[e(F,{label:D(w).formLabelDateStart,type:"date",variant:"outlined",modelValue:d.value.DateStart,"onUpdate:modelValue":n[0]||(n[0]=t=>d.value.DateStart=t)},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"12",sm:"4",md:"2",lg:"2"},{default:l(()=>[e(F,{label:D(w).formLabelDateEnd,type:"date",variant:"outlined",modelValue:d.value.DateEnd,"onUpdate:modelValue":n[1]||(n[1]=t=>d.value.DateEnd=t)},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"6",sm:"4",md:"2",lg:"2"},{default:l(()=>[e(F,{label:D(w).formLabelAvailability,type:"number",variant:"outlined",modelValue:d.value.Availability,"onUpdate:modelValue":n[2]||(n[2]=t=>d.value.Availability=t),modelModifiers:{number:!0}},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"6",sm:"4",md:"2",lg:"2"},{default:l(()=>[e(F,{label:D(w).formLabelPrice,type:"number","prepend-inner-icon":"mdi:mdi-currency-gbp",variant:"outlined",modelValue:d.value.Price,"onUpdate:modelValue":n[3]||(n[3]=t=>d.value.Price=t),modelModifiers:{number:!0}},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"6",sm:"4",md:"3",lg:"3"},{default:l(()=>[e(re,{label:D(w).formLabelPriceType,variant:"outlined",modelValue:d.value.Type,"onUpdate:modelValue":n[4]||(n[4]=t=>d.value.Type=t),items:r,"item-value":"value","item-title":"title"},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"6",sm:"4",md:"1",class:"text-right"},{default:l(()=>[e(R,{color:"red",icon:"mdi:mdi-minus",onClick:i})]),_:1})]),_:1}))}}),$l={class:"d-flex flex-wrap justify-space-between",style:{gap:"1rem"}},Ol=O({__name:"VenueRoom",props:{modelValue:{required:!0},modelModifiers:{}},emits:q(["deleted"],["update:modelValue"]),setup(I,{emit:m}){const u=B(),d=m,r=b(w),i=M(I,"modelValue"),a=b(H(i.value)),n=b(!1),t=c=>{switch(c.Type){case ke.PER_PERSON:return r.value.enumPER_PERSON;case ke.PER_ROOM:return r.value.enumPER_ROOM}return"Unknown"},o=()=>{a.value.Costs||(a.value.Costs=[]),a.value.Costs.push({ID:0,CostUUID:L(),Availability:0,DateStart:"",DateEnd:"",Price:0,Type:"PER_ROOM"})},v=c=>{a.value.Costs.splice(c,1)},p=({callback:c})=>{const s=()=>{c&&c("Failed to Delete Room")},V=()=>{c&&c("Room Deleted")};u.deleteRoom(a.value.RoomUUID).then(g=>{g?(V(),d("deleted",a.value)):s()}).catch(()=>{s()})},U=()=>{u.saveRoom(a.value).then(()=>{i.value=a.value,n.value=!1})};return(c,s)=>(f(),_(A,null,[e(z,{fluid:"",class:"pa-1 pa-sm-2"},{default:l(()=>[S("h4",null,$(a.value.Name),1),S("p",null,$(a.value.Notes),1),S("p",null,[s[7]||(s[7]=S("strong",null,"Capacity:",-1)),k(" "+$(a.value.MinimumCapacity)+" ",1),a.value.MinimumCapacity!=a.value.MaximumCapacity?(f(),_(A,{key:0},[k(" - "+$(a.value.MaximumCapacity),1)],64)):N("",!0)]),e(ul,{density:"compact"},{default:l(()=>[s[8]||(s[8]=S("thead",null,[S("tr",null,[S("th",null,"Date"),S("th",null,"Price"),S("th",null,"Availability")])],-1)),S("tbody",null,[(f(!0),_(A,null,K(a.value.Costs,V=>(f(),_("tr",{key:`venue-room-${a.value.ID}-cost-${V.ID}`},[S("td",null,$(V.DateStart)+" - "+$(V.DateEnd),1),S("td",null,$(r.value.currencySymbol)+$(V.Price)+" "+$(t(V)),1),S("td",null,$(V.Availability),1)]))),128))])]),_:1}),S("div",$l,[e(R,{color:"primary","prepend-icon":"mdi:mdi-playlist-edit",onClick:s[0]||(s[0]=V=>n.value=!0)},{default:l(()=>s[9]||(s[9]=[k("Edit Room")])),_:1}),e(Q,{color:"red-darken-3","prepend-icon":"mdi:mdi-minus",onClick:p},{default:l(()=>s[10]||(s[10]=[k("Delete Room")])),_:1})])]),_:1}),e(ye,{scrollable:"",modelValue:n.value,"onUpdate:modelValue":s[6]||(s[6]=V=>n.value=V),width:"auto"},{default:l(()=>[e(se,null,{default:l(()=>[e(ie,{dark:"",color:"primary"},{default:l(()=>[e(R,{icon:"",dark:"",onClick:s[1]||(s[1]=V=>n.value=!1)},{default:l(()=>[e(J,null,{default:l(()=>s[11]||(s[11]=[k("mdi:mdi-close")])),_:1})]),_:1}),e(de,null,{default:l(()=>[k("Room Details ("+$(a.value.Name)+")",1)]),_:1}),e(ae),e(De,null,{default:l(()=>[e(R,{variant:"text",onClick:U},{default:l(()=>s[12]||(s[12]=[k(" Save ")])),_:1})]),_:1})]),_:1}),e(Te,null,{default:l(()=>[e(ee,null,{default:l(()=>[e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(F,{label:r.value.formLabelName,type:"text",variant:"outlined",modelValue:a.value.Name,"onUpdate:modelValue":s[2]||(s[2]=V=>a.value.Name=V)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(T,null,{default:l(()=>[e(Ve,{label:r.value.formLabelNotes,variant:"outlined",modelValue:a.value.Notes,"onUpdate:modelValue":s[3]||(s[3]=V=>a.value.Notes=V)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(T,{cols:"12",sm:"6"},{default:l(()=>[e(F,{type:"number",label:r.value.formLabelMinimumCapacity,variant:"outlined",modelValue:a.value.MinimumCapacity,"onUpdate:modelValue":s[4]||(s[4]=V=>a.value.MinimumCapacity=V),modelModifiers:{number:!0}},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"12",sm:"6"},{default:l(()=>[e(F,{type:"number",label:r.value.formLabelMaximumCapacity,variant:"outlined",modelValue:a.value.MaximumCapacity,"onUpdate:modelValue":s[5]||(s[5]=V=>a.value.MaximumCapacity=V),modelModifiers:{number:!0}},null,8,["label","modelValue"])]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(T,null,{default:l(()=>s[13]||(s[13]=[S("h4",null," Availability & Costs (To Organisation) ",-1)])),_:1})]),_:1}),(f(!0),_(A,null,K(a.value.Costs,(V,g)=>(f(),_(A,{key:`venue-room-${a.value.ID}-cost-${V.ID}`},[a.value.Costs&&a.value.Costs[g]?(f(),C(Pl,{key:0,modelValue:a.value.Costs[g],"onUpdate:modelValue":P=>a.value.Costs[g]=P,onDeleted:P=>v(g)},null,8,["modelValue","onUpdate:modelValue","onDeleted"])):N("",!0)],64))),128)),e(R,{color:"primary","prepend-icon":"mdi:mdi-plus",onClick:o},{default:l(()=>s[14]||(s[14]=[k("Add Row")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),Ml=O({__name:"Venue",props:{modelValue:{required:!0},modelModifiers:{}},emits:q(["deleted"],["update:modelValue"]),setup(I,{emit:m}){const u=B(),d=m,r=M(I,"modelValue"),i=b(H(r.value)),a=b([]),n=b(!1),t=b(!1);u.getVenueRooms(i.value.VenueUUID).then(c=>{a.value=c}),X(i.value,()=>{t.value=!0});const o=({callback:c})=>{n.value=!0,u.saveVenue(i.value).then(()=>{n.value=!1,t.value=!1,r.value=i.value,c&&c("Venue Saved")}).catch(()=>{n.value=!1,c&&c("Failed to Saved Venue")})},v=({callback:c})=>{n.value=!0,u.deleteVenue(i.value.VenueUUID).then(s=>{n.value=!1,s?c&&(c("Venue Deleted"),d("deleted")):c&&c("Failed to Delete Venue")}).catch(()=>{c&&(c("Failed to Delete Venue"),n.value=!1)})},p=()=>{const c={ID:0,RoomUUID:L(),VenueID:i.value.ID,VenueUUID:i.value.VenueUUID,Order:a.value.length+1,Name:"New Room",Notes:"",MaximumCapacity:1,MinimumCapacity:1,Costs:[]};u.saveRoom(c).then(s=>{s&&a.value.push(s)})},U=(c,s)=>{u.deleteRoom(a.value[s].RoomUUID).then(V=>{V&&a.value.splice(s,1)})};return(c,s)=>(f(),C(pe,null,{default:l(()=>[e(fe,null,{default:l(()=>[k($(i.value.Name),1)]),_:1}),e(ce,null,{default:l(()=>[e(x,{"no-gutters":""},{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(F,{label:D(w).formLabelName,name:"name",variant:"outlined",modelValue:i.value.Name,"onUpdate:modelValue":s[0]||(s[0]=V=>i.value.Name=V)},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(Ve,{label:D(w).formLabelDescription,name:"description",variant:"outlined",modelValue:i.value.Description,"onUpdate:modelValue":s[1]||(s[1]=V=>i.value.Description=V)},null,8,["label","modelValue"])]),_:1}),e(T,{class:"text-right",cols:"12"},{default:l(()=>[e(Q,{class:"mr-2",color:"red-darken-3",label:"Delete",onClick:v}),e(Q,{enabled:t.value,timeout:"7",onClick:o},null,8,["enabled"])]),_:1})]),_:1}),s[3]||(s[3]=S("h3",null,"Rooms",-1)),(f(!0),_(A,null,K(a.value,(V,g)=>(f(),C(ee,{variant:"elevation",elevation:"6",key:`venue-room-${V.ID}`},{default:l(()=>[a.value&&a.value[g]?(f(),C(Ol,{key:0,modelValue:a.value[g],"onUpdate:modelValue":P=>a.value[g]=P,onDeleted:P=>U(P,g)},null,8,["modelValue","onUpdate:modelValue","onDeleted"])):N("",!0)]),_:2},1024))),128)),e(ee,{class:"ma-2"},{default:l(()=>[e(R,{color:"primary","prepend-icon":"mdi:mdi-plus",onClick:p},{default:l(()=>s[2]||(s[2]=[k("Add Room")])),_:1})]),_:1})]),_:1})]),_:1}))}}),wl=O({__name:"VenuesEditorView",props:{modelValue:{required:!0},modelModifiers:{}},emits:q(["close","pageTitle","refresh"],["update:modelValue"]),setup(I,{emit:m}){const u=B(),d=m,r=M(I,"modelValue");d("pageTitle","Venues");const i=b([]);u.getConventionVenues(r.value.ConventionUUID).then(t=>{i.value=t});const a=()=>{const t={ID:0,VenueUUID:L(),ConventionID:r.value.ID,ConventionUUID:r.value.ConventionUUID,Order:i.value.length+1,Name:"New Venue",Description:"",Rooms:[]};u.saveVenue(t).then(o=>{o&&i.value.push(o)})},n=t=>{i.value.splice(t,1)};return(t,o)=>(f(),_(A,null,[e(z,{fluid:"",class:"px-0"},{default:l(()=>[e(x,null,{default:l(()=>[e(T,null,{default:l(()=>o[0]||(o[0]=[S("h3",null,"Venues",-1)])),_:1})]),_:1})]),_:1}),o[2]||(o[2]=S("p",null," Venues and the rooms they supply to the organisation, this is internal data not seen by attendees. ",-1)),o[3]||(o[3]=S("p",null," Attendee options are configured via the accommodation tab. ",-1)),e(ee,null,{default:l(()=>[e(ve,{variant:"accordion"},{default:l(()=>[(f(!0),_(A,null,K(i.value,(v,p)=>(f(),C(Ml,{key:`venues-${v.ID}`,modelValue:i.value[p],"onUpdate:modelValue":U=>i.value[p]=U,onDeleted:U=>n(p)},null,8,["modelValue","onUpdate:modelValue","onDeleted"]))),128))]),_:1}),e(ee,{class:"pa-2"},{default:l(()=>[e(R,{color:"primary",onClick:a},{default:l(()=>o[1]||(o[1]=[k("Add Venue")])),_:1})]),_:1})]),_:1})],64))}}),ql=O({__name:"AccommodationCost",props:q({convention:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:q(["deleted"],["update:modelValue"]),setup(I,{emit:m}){const u=m,d=M(I,"modelValue"),r=b([]);B().getConventionTickets(I.convention.ConventionUUID).then(o=>{o&&(r.value=o)});const a=[{title:"Per Room",value:"PER_ROOM"},{title:"Per Person",value:"PER_PERSON"}],n=()=>{u("deleted")},t=te(()=>r.value.filter(o=>(o.Type===G.TICKET_TYPE_TICKET||o.Type===G.TICKET_TYPE_ADD_ON)&&o.RequiresAccommodation&&o.DateStart===d.value.DateStart&&o.DateEnd===d.value.DateEnd));return(o,v)=>(f(),_(A,null,[e(x,{class:"align-center",dense:""},{default:l(()=>[e(T,{class:"flex-grow-0 flex-shrink-1 text-no-wrap font-italic"},{default:l(()=>v[4]||(v[4]=[S("p",{title:"Automatically calculated",class:"text-grey-lighten-1"},"Applicable Tickets:",-1)])),_:1}),e(T,{class:"flex-grow-1"},{default:l(()=>[e(je,null,{default:l(()=>[(f(!0),_(A,null,K(t.value,p=>(f(),C(ze,{key:p.ID,title:"Automatically calculated",disabled:""},{default:l(()=>[k($(p.Name),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(x,{dense:""},{default:l(()=>[e(T,{cols:"12",sm:"6",md:"3"},{default:l(()=>[e(F,{label:D(w).formLabelDateStart,type:"date",variant:"outlined",modelValue:d.value.DateStart,"onUpdate:modelValue":v[0]||(v[0]=p=>d.value.DateStart=p)},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"12",sm:"6",md:"3"},{default:l(()=>[e(F,{label:D(w).formLabelDateEnd,type:"date",variant:"outlined",modelValue:d.value.DateEnd,"onUpdate:modelValue":v[1]||(v[1]=p=>d.value.DateEnd=p)},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"5",sm:"6",md:"3"},{default:l(()=>[e(F,{label:D(w).formLabelPrice,type:"number","prepend-inner-icon":"mdi:mdi-currency-gbp",variant:"outlined",modelValue:d.value.Price,"onUpdate:modelValue":v[2]||(v[2]=p=>d.value.Price=p),modelModifiers:{number:!0}},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"5",sm:"4",md:"2"},{default:l(()=>[e(re,{label:D(w).formLabelPriceType,variant:"outlined",modelValue:d.value.Type,"onUpdate:modelValue":v[3]||(v[3]=p=>d.value.Type=p),items:a,"item-value":"value","item-title":"title"},null,8,["label","modelValue"])]),_:1}),e(T,{cols:"2",sm:"2",md:"1",class:"text-right"},{default:l(()=>[e(R,{color:"red",icon:"mdi:mdi-minus",onClick:n})]),_:1})]),_:1})],64))}}),Ll=O({__name:"Accommodation",props:q({convention:{},venues:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:q(["deleted"],["update:modelValue"]),setup(I,{emit:m}){const u=B(),d=m,r=M(I,"modelValue"),i=b(H(r.value)),a=te(()=>I.venues.map(p=>p.Rooms.map(U=>({title:` ${p.Name} - ${U.Name}`,value:U}))).flat()),n=()=>{i.value.Costs||(i.value.Costs=[]),i.value.Costs.push({ID:0,CostUUID:L(),Availability:0,DateStart:"",DateEnd:"",Price:0,Type:ke.PER_ROOM})},t=p=>{i.value.Costs.splice(p,1)},o=({callback:p})=>{u.deleteAccommodation(i.value.AccommodationUUID).then(U=>{U?p&&(p("Accommodation Deleted"),d("deleted")):p&&p("Failed to Delete Accommodation")}).catch(()=>{p&&p("Failed to Delete Accommodation")})},v=({callback:p})=>{u.saveAccommodation(i.value).then(U=>{U?(i.value.ID=U.ID,r.value=U,p&&p("Accommodation Saved")):p&&p("Failed to Save Accommodation")}).catch(()=>{p&&p("Failed to Save Accommodation")})};return(p,U)=>(f(),C(pe,null,{default:l(()=>[e(fe,null,{default:l(()=>[k($(i.value.Name),1)]),_:1}),e(ce,null,{default:l(()=>[e(ee,null,{default:l(()=>[e(x,null,{default:l(()=>[e(T,null,{default:l(()=>[e(F,{modelValue:i.value.Name,"onUpdate:modelValue":U[0]||(U[0]=c=>i.value.Name=c),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(T,null,{default:l(()=>[U[3]||(U[3]=S("h4",null," Room Pool ",-1)),U[4]||(U[4]=S("p",{class:"mb-4"}," Hotel rooms that can be used for this accommodation option. ",-1)),e(re,{clearable:!0,modelValue:i.value.Pool,"onUpdate:modelValue":U[1]||(U[1]=c=>i.value.Pool=c),items:a.value,label:"Select",multiple:"",hint:"Pick appropriate rooms","persistent-hint":"",variant:"outlined","item-title":"title","item-value":"value",eager:!0},null,8,["modelValue","items"]),U[5]||(U[5]=S("p",null," Pool total: ",-1)),S("p",null,[e(Z,{label:"Required Tags",variant:"outlined",modelValue:i.value.RequiredTags,"onUpdate:modelValue":U[2]||(U[2]=c=>i.value.RequiredTags=c),convention:p.convention,organisation:p.convention.OrganisationUUID,chips:!0,clearable:!0,hint:"Tags that a user must have to select this accommodation."},null,8,["modelValue","convention","organisation"])]),U[6]||(U[6]=S("h4",null," Accommodation Costs ",-1)),U[7]||(U[7]=S("p",{class:"mb-4"}," How much the attendee is charged by the convention for the accommodation. ",-1)),i.value.Costs?(f(!0),_(A,{key:0},K(i.value.Costs,(c,s)=>(f(),C(ql,{key:`venue-room-${i.value.ID}-cost-${c.ID}`,convention:p.convention,modelValue:i.value.Costs[s],"onUpdate:modelValue":V=>i.value.Costs[s]=V,onDeleted:V=>t(s)},null,8,["convention","modelValue","onUpdate:modelValue","onDeleted"]))),128)):N("",!0)]),_:1})]),_:1}),e(x,{"no-gutters":""},{default:l(()=>[e(T,{class:"text-left"},{default:l(()=>[e(R,{color:"primary","prepend-icon":"mdi:mdi-plus",onClick:n},{default:l(()=>U[8]||(U[8]=[k("Add Row")])),_:1})]),_:1}),e(T,{class:"text-right"},{default:l(()=>[e(Q,{class:"mr-2",color:"red-darken-3",label:"Delete",onClick:o}),e(Q,{onClick:v})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),Kl=O({__name:"AccommodationEditorView",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(I){const m=B(),u=M(I,"modelValue"),d=b([]),r=b([]);m.getConventionAccommodation(u.value.ConventionUUID).then(n=>{n&&(d.value=n)}),m.getConventionVenues(u.value.ConventionUUID).then(n=>{n&&(r.value=n)});const i=()=>{const n={ID:0,AccommodationUUID:L(),ConventionID:u.value.ID,ConventionUUID:u.value.ConventionUUID,Order:d.value.length+1,Name:"New Accommodation Option",Pool:[],Costs:[],RequiredTags:[]};m.saveAccommodation(n).then(t=>{t&&d.value.push(t)})},a=n=>{d.value.splice(n,1)};return(n,t)=>(f(),_(A,null,[e(z,{fluid:!0,class:"px-0"},{default:l(()=>[e(x,null,{default:l(()=>[e(T,null,{default:l(()=>t[0]||(t[0]=[S("h3",null,"Accommodation",-1)])),_:1})]),_:1})]),_:1}),t[2]||(t[2]=S("p",null," Accommodation options presented to attendees, these are effectively virtual room types which are linked to the available room pools created in the venues tab. ",-1)),t[3]||(t[3]=S("p",null," Use the venues tab to configure internal data about the venues and room supply. ",-1)),e(ee,null,{default:l(()=>[e(ve,{variant:"accordion"},{default:l(()=>[(f(!0),_(A,null,K(d.value,(o,v)=>(f(),C(Ll,{key:o.AccommodationUUID,convention:u.value,venues:r.value,modelValue:d.value[v],"onUpdate:modelValue":p=>d.value[v]=p,onDeleted:p=>a(v)},null,8,["convention","venues","modelValue","onUpdate:modelValue","onDeleted"]))),128))]),_:1}),e(ee,{class:"pa-2"},{default:l(()=>[e(R,{color:"primary",onClick:i},{default:l(()=>t[1]||(t[1]=[k("Add Accommodation")])),_:1})]),_:1})]),_:1})],64))}}),Gl=O({__name:"EditFieldDialogExtras",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(I){const m=M(I,"modelValue"),u=Ee.getInstance(),d=b([]),r=b([]);return u==null||u.getConventionExtras(m.value.ConventionUUID).then(i=>{d.value=i;const a=m.value.Values.find(n=>n.Title==="SelectedExtras");if(a)try{r.value=JSON.parse(a.Value)}catch{}}),X(r,()=>{const i=m.value.Values.find(a=>a.Title==="SelectedExtras");if(i)i.Value=JSON.stringify(r.value);else{const a={ID:0,FieldValueUUID:L(),FieldID:m.value.ID,FieldUUID:m.value.FieldUUID,Title:"SelectedExtras",Value:JSON.stringify(r.value)};m.value.Values.push(a)}}),(i,a)=>(f(!0),_(A,null,K(d.value,n=>(f(),C(W,{key:n.ExtraUUID,modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=t=>r.value=t),label:n.Name,value:n.ExtraUUID,name:m.value.Name,"hide-details":""},null,8,["modelValue","label","value","name"]))),128))}}),hl=O({__name:"EditFieldDialogInterests",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(I){const m=M(I,"modelValue"),u=Ee.getInstance(),d=b([]),r=b([]);return u==null||u.getConventionInterests(m.value.ConventionUUID).then(i=>{d.value=i;const a=m.value.Values.find(n=>n.Title==="SelectedInterests");if(a)try{r.value=JSON.parse(a.Value)}catch{}}),X(r,()=>{const i=m.value.Values.find(a=>a.Title==="SelectedInterests");if(i)i.Value=JSON.stringify(r.value);else{const a={ID:0,FieldValueUUID:L(),FieldID:m.value.ID,FieldUUID:m.value.FieldUUID,Title:"SelectedInterests",Value:JSON.stringify(r.value)};m.value.Values.push(a)}}),(i,a)=>(f(!0),_(A,null,K(d.value,n=>(f(),C(W,{key:n.InterestUUID,modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=t=>r.value=t),label:n.Name,value:n.InterestUUID,name:m.value.Name,"hide-details":""},null,8,["modelValue","label","value","name"]))),128))}}),Bl=O({__name:"EditFieldDialogTickets",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(I){const m=M(I,"modelValue"),u=Ee.getInstance(),d=b([]),r=b([]);return u==null||u.getConventionTickets(m.value.ConventionUUID).then(i=>{d.value=i;const a=m.value.Values.find(n=>n.Title==="SelectedTickets");if(a)try{r.value=JSON.parse(a.Value)}catch{}}),X(r,()=>{const i=m.value.Values.find(a=>a.Title==="SelectedTickets");if(i)i.Value=JSON.stringify(r.value);else{const a={ID:0,FieldValueUUID:L(),FieldID:m.value.ID,FieldUUID:m.value.FieldUUID,Title:"SelectedTickets",Value:JSON.stringify(r.value)};m.value.Values.push(a)}}),(i,a)=>(f(!0),_(A,null,K(d.value.filter(n=>n&&n.Type===D(G).TICKET_TYPE_GROUP),n=>(f(),C(W,{key:n.TicketUUID,modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=t=>r.value=t),label:n.Name,value:n.TicketUUID,name:m.value.Name,"hide-details":""},null,8,["modelValue","label","value","name"]))),128))}}),Yl=O({__name:"EditFieldDialogAccommodation",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(I){const m=M(I,"modelValue"),u=Ee.getInstance(),d=b([]),r=b(m.value.Values.map(n=>n.Value)),i=b({sharing:!1});try{const n=JSON.parse(m.value.Data);n&&(i.value=n)}catch{}const a=()=>{m.value.Data=JSON.stringify(i.value),m.value.Values=r.value.map(n=>{var t,o,v;return{ID:0,FieldValueUUID:L(),FieldID:((t=m.value)==null?void 0:t.ID)||0,FieldUUID:((o=m.value)==null?void 0:o.FieldUUID)||"",Title:((v=d.value.find(p=>p.AccommodationUUID==n))==null?void 0:v.Name)||"",Value:n}})};return u==null||u.getConventionAccommodation(m.value.ConventionUUID).then(n=>{n&&(d.value=n)}),(n,t)=>(f(),_(A,null,[t[2]||(t[2]=S("h5",null,"Display Options",-1)),e(W,{label:"Show Sharing Options",modelValue:i.value.sharing,"onUpdate:modelValue":t[0]||(t[0]=o=>i.value.sharing=o),"hide-details":"",onChange:a},null,8,["modelValue"]),t[3]||(t[3]=S("h5",null,"Accommodation Choices",-1)),(f(!0),_(A,null,K(d.value,o=>(f(),C(W,{key:o.ID,modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=v=>r.value=v),label:o.Name,value:o.AccommodationUUID,"hide-details":"",onChange:a},null,8,["modelValue","label","value"]))),128))],64))}}),Hl=O({__name:"EditFieldDialogAge",props:q({convention:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(I){var v,p,U;const m=M(I,"modelValue"),u=new Date,d=u.getFullYear(),r=(u.getMonth()+1).toLocaleString(navigator.language,{minimumIntegerDigits:2}),i=u.getDate().toLocaleString(navigator.language,{minimumIntegerDigits:2}),a=b(parseInt(((v=m.value.Values.find(c=>c.Title==="MIN_AGE"))==null?void 0:v.Value)||"18")),n=b(((p=m.value.Values.find(c=>c.Title==="BEFORE_DATE"))==null?void 0:p.Value)||`${d}-${r}-${i}`),t=b(((U=m.value.Values.find(c=>c.Title==="UNDER_AGE_APPLY_TAG"))==null?void 0:U.Value)||""),o=()=>{var c,s,V,g,P,y;m.value.Values=[{ID:0,FieldValueUUID:L(),FieldID:((c=m.value)==null?void 0:c.ID)||0,FieldUUID:((s=m.value)==null?void 0:s.FieldUUID)||"",Title:"MIN_AGE",Value:a.value.toString()},{ID:0,FieldValueUUID:L(),FieldID:((V=m.value)==null?void 0:V.ID)||0,FieldUUID:((g=m.value)==null?void 0:g.FieldUUID)||"",Title:"BEFORE_DATE",Value:n.value},{ID:0,FieldValueUUID:L(),FieldID:((P=m.value)==null?void 0:P.ID)||0,FieldUUID:((y=m.value)==null?void 0:y.FieldUUID)||"",Title:"UNDER_AGE_APPLY_TAG",Value:t.value}]};return o(),(c,s)=>(f(),C(z,{class:"pl-0 pr-0",fluid:!0},{default:l(()=>[e(x,null,{default:l(()=>[e(T,{cols:"12",sm:"6"},{default:l(()=>[e(F,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=V=>a.value=V),modelModifiers:{number:!0},type:"number",label:"Minimum Age",variant:"outlined",onChange:o},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"6"},{default:l(()=>[e(F,{modelValue:n.value,"onUpdate:modelValue":s[1]||(s[1]=V=>n.value=V),type:"date",label:"Date to attain minimum age by",variant:"outlined",onChange:o},null,8,["modelValue"])]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(T,null,{default:l(()=>[e(Z,{modelValue:t.value,"onUpdate:modelValue":s[2]||(s[2]=V=>t.value=V),convention:c.convention,chips:!0,clearable:!0,variant:"outlined",label:`Tags applied to users under ${a.value} at time of data entry`,onChange:o},null,8,["modelValue","convention","label"])]),_:1})]),_:1})]),_:1}))}}),jl=O({__name:"EditFieldDialogHTML",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(I){const m=M(I,"modelValue"),u=b({html:""});try{const r=JSON.parse(m.value.Data);r&&(u.value=r)}catch{}const d=()=>{m.value.Data=JSON.stringify(u.value)};return(r,i)=>(f(),C(Ve,{variant:"outlined",label:"Raw HTML",modelValue:u.value.html,"onUpdate:modelValue":i[0]||(i[0]=a=>u.value.html=a),onKeydown:d,onChange:d},null,8,["modelValue"]))}}),zl=O({__name:"EditFieldDialogBadgeImage",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(I){const m=M(I,"modelValue"),u=b({charge:0,free:0,height:0,label:!1,maximum:0,tags:[],width:0});try{u.value=el(m.value.Data)}catch{}const d=()=>{m.value.Data=JSON.stringify(u.value)};return(r,i)=>(f(),_(A,null,[i[7]||(i[7]=S("h5",{class:"my-2"},"Tags & Labels",-1)),e(x,null,{default:l(()=>[e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(Z,{label:"Badge Tags",variant:"outlined",modelValue:u.value.tags,"onUpdate:modelValue":i[0]||(i[0]=a=>u.value.tags=a),convention:m.value.ConventionUUID,chips:"",clearable:"",hint:"Tags that apply to this badge.","input-type":D(tl).UUID_ARRAY,onChange:d},null,8,["modelValue","convention","input-type"])]),_:1}),e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(W,{modelValue:u.value.label,"onUpdate:modelValue":i[1]||(i[1]=a=>u.value.label=a),label:"Allow Custom Label",variant:"outlined","hide-details":"",onChange:d},null,8,["modelValue"])]),_:1})]),_:1}),i[8]||(i[8]=S("h5",{class:"my-2"},"Dimensions",-1)),e(x,null,{default:l(()=>[e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(F,{modelValue:u.value.width,"onUpdate:modelValue":i[2]||(i[2]=a=>u.value.width=a),modelModifiers:{number:!0},label:"Width",variant:"outlined","hide-details":"",type:"number",step:"10",min:"0",onChange:d},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(F,{modelValue:u.value.height,"onUpdate:modelValue":i[3]||(i[3]=a=>u.value.height=a),modelModifiers:{number:!0},label:"Height",variant:"outlined","hide-details":"",type:"number",step:"10",min:"0",onChange:d},null,8,["modelValue"])]),_:1})]),_:1}),i[9]||(i[9]=S("h5",{class:"my-2"},"Limits",-1)),e(x,null,{default:l(()=>[e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(F,{modelValue:u.value.maximum,"onUpdate:modelValue":i[4]||(i[4]=a=>u.value.maximum=a),modelModifiers:{number:!0},label:"Maximum Badges",hint:"Zero = Unlimited",variant:"outlined",type:"number",min:"0",onChange:d},null,8,["modelValue"])]),_:1})]),_:1}),i[10]||(i[10]=S("h5",{class:"my-2"},"Costs",-1)),e(x,null,{default:l(()=>[e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(F,{modelValue:u.value.charge,"onUpdate:modelValue":i[5]||(i[5]=a=>u.value.charge=a),modelModifiers:{number:!0},label:"Charge Per Badge",prefix:D(w).currencySymbol,variant:"outlined","hide-details":"",type:"number",min:"0",onChange:d},null,8,["modelValue","prefix"])]),_:1}),e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(F,{modelValue:u.value.free,"onUpdate:modelValue":i[6]||(i[6]=a=>u.value.free=a),modelModifiers:{number:!0},label:"Free Badges",variant:"outlined","hide-details":"",type:"number",min:"0",onChange:d},null,8,["modelValue"])]),_:1})]),_:1})],64))}}),Jl={key:0},Wl={key:1},Xl=O({__name:"EditFieldDialog",props:q({convention:{},field:{},title:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:q(["update:field"],["update:modelValue"]),setup(I,{emit:m}){const u=I,{convention:d,title:r=""}=u,i=m,a=M(I,"modelValue"),n=me(u,i,void 0,void 0,"field"),t=b(H(n.value)),o=b(""),v=b(t.value.Type);X(n,()=>{t.value=H(n.value)});const p=()=>{a.value=!1},U=()=>{t.value=H(n.value)},c=()=>{n.value=t.value},s=()=>{t.value.Values.push({ID:0,FieldValueUUID:L(),FieldID:t.value.ID,FieldUUID:t.value.FieldUUID,Title:"",Value:""})},V=P=>{t.value.Values.splice(P,1)},g=()=>{o.value="",t.value.Values=[]};return X(v,(P,y)=>{P!==y&&(t.value.Type=P,g())}),(P,y)=>(f(),C(qe,{modelValue:a.value,"onUpdate:modelValue":y[16]||(y[16]=E=>a.value=E),onReset:U,onSave:c,title:D(r),color:"primary",persistent:!0,fullscreen:!0},{default:l(()=>[e(z,{class:"pa-0",fluid:!0},{default:l(()=>[e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(z,{class:"pa-0",fluid:!0},{default:l(()=>[e(x,null,{default:l(()=>[e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(F,{modelValue:t.value.Name,"onUpdate:modelValue":y[0]||(y[0]=E=>t.value.Name=E),label:"Internal name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(F,{modelValue:t.value.Label,"onUpdate:modelValue":y[1]||(y[1]=E=>t.value.Label=E),label:"Label",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(F,{modelValue:t.value.Hint,"onUpdate:modelValue":y[2]||(y[2]=E=>t.value.Hint=E),label:"Hint",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(F,{modelValue:t.value.Placeholder,"onUpdate:modelValue":y[3]||(y[3]=E=>t.value.Placeholder=E),label:"Placeholder",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(re,{modelValue:v.value,"onUpdate:modelValue":y[4]||(y[4]=E=>v.value=E),label:"Type",variant:"outlined",items:D(he),"hide-details":""},null,8,["modelValue","items"])]),_:1}),t.value.Type===D(Y).SELECT||t.value.Type===D(Y).CHECKBOX||t.value.Type===D(Y).BADGE_IMAGE?(f(),C(T,{key:0,cols:"12",sm:"6",md:"4",class:"py-0"},{default:l(()=>[t.value.Type===D(Y).SELECT||t.value.Type===D(Y).CHECKBOX?(f(),C(W,{key:0,modelValue:t.value.Multiple,"onUpdate:modelValue":y[5]||(y[5]=E=>t.value.Multiple=E),label:"Multiple Items",hint:"Can select multiple items from list","hide-details":"",density:"compact"},null,8,["modelValue"])):t.value.Type===D(Y).BADGE_IMAGE?(f(),C(W,{key:1,modelValue:t.value.Multiple,"onUpdate:modelValue":y[6]||(y[6]=E=>t.value.Multiple=E),label:"Custom Fields",hint:"Enable additional badge fields","hide-details":""},null,8,["modelValue"])):N("",!0),t.value.Type===D(Y).SELECT?(f(),C(W,{key:2,modelValue:t.value.Autofill,"onUpdate:modelValue":y[7]||(y[7]=E=>t.value.Autofill=E),label:"Searchable List","hide-details":"",density:"compact"},null,8,["modelValue"])):N("",!0)]),_:1})):N("",!0)]),_:1}),t.value.Type===D(Y).BADGE_IMAGE?(f(),C(x,{key:0},{default:l(()=>[e(T,null,{default:l(()=>[y[17]||(y[17]=S("h4",null,"Badge Image Options",-1)),e(zl,{modelValue:t.value,"onUpdate:modelValue":y[8]||(y[8]=E=>t.value=E)},null,8,["modelValue"])]),_:1})]),_:1})):N("",!0),t.value.Type===D(Y).SELECT||t.value.Type===D(Y).CHECKBOX&&t.value.Multiple||t.value.Type===D(Y).RADIO||t.value.Type===D(Y).BADGE_IMAGE&&t.value.Multiple?(f(),C(x,{key:1},{default:l(()=>[e(T,null,{default:l(()=>[t.value.Type===D(Y).BADGE_IMAGE?(f(),_("h4",Jl,"Custom Fields")):(f(),_("h4",Wl,"Values")),e(z,{fluid:!0,class:"px-0"},{default:l(()=>[(f(!0),_(A,null,K(t.value.Values,(E,h)=>(f(),C(x,{key:E.ID},{default:l(()=>[e(T,{cols:"12",sm:"5",md:"6"},{default:l(()=>[e(F,{modelValue:E.Title,"onUpdate:modelValue":j=>E.Title=j,label:"Display",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(T,{cols:"9",sm:"5",md:"5"},{default:l(()=>[e(F,{modelValue:E.Value,"onUpdate:modelValue":j=>E.Value=j,label:"Internal Value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(T,{cols:"3",sm:"2",md:"1",class:"d-flex align-center"},{default:l(()=>[e(R,{icon:"mdi:mdi-window-close",size:"small",color:"red",onClick:j=>V(h)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),e(x,null,{default:l(()=>[e(T,null,{default:l(()=>[e(R,{"prepend-icon":"mdi:mdi-plus",color:"primary",onClick:s},{default:l(()=>y[18]||(y[18]=[k("Add Item")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):t.value.Type===D(Y).ACCOMMODATION?(f(),C(x,{key:2},{default:l(()=>[e(T,null,{default:l(()=>[y[19]||(y[19]=S("h4",null,"Accommodation",-1)),e(Yl,{modelValue:t.value,"onUpdate:modelValue":y[9]||(y[9]=E=>t.value=E)},null,8,["modelValue"])]),_:1})]),_:1})):t.value.Type===D(Y).AGE?(f(),C(x,{key:3},{default:l(()=>[e(T,null,{default:l(()=>[y[20]||(y[20]=S("h4",null,"Age",-1)),e(Hl,{modelValue:t.value,"onUpdate:modelValue":y[10]||(y[10]=E=>t.value=E),convention:D(d)},null,8,["modelValue","convention"])]),_:1})]),_:1})):t.value.Type===D(Y).EXTRAS?(f(),C(x,{key:4},{default:l(()=>[e(T,null,{default:l(()=>[y[21]||(y[21]=S("h4",null,"Additional Purchases",-1)),e(Gl,{modelValue:t.value,"onUpdate:modelValue":y[11]||(y[11]=E=>t.value=E)},null,8,["modelValue"])]),_:1})]),_:1})):t.value.Type===D(Y).HTML?(f(),C(x,{key:5},{default:l(()=>[e(T,null,{default:l(()=>[e(jl,{modelValue:t.value,"onUpdate:modelValue":y[12]||(y[12]=E=>t.value=E)},null,8,["modelValue"])]),_:1})]),_:1})):t.value.Type===D(Y).INTERESTS?(f(),C(x,{key:6},{default:l(()=>[e(T,null,{default:l(()=>[y[22]||(y[22]=S("h4",null,"Available Interests",-1)),e(hl,{modelValue:t.value,"onUpdate:modelValue":y[13]||(y[13]=E=>t.value=E)},null,8,["modelValue"])]),_:1})]),_:1})):t.value.Type===D(Y).TICKET?(f(),C(x,{key:7},{default:l(()=>[e(T,null,{default:l(()=>[y[23]||(y[23]=S("h4",null,"Tickets",-1)),e(Bl,{modelValue:t.value,"onUpdate:modelValue":y[14]||(y[14]=E=>t.value=E)},null,8,["modelValue"])]),_:1})]),_:1})):N("",!0)]),_:1})]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(ee,{elevation:"5",class:"pa-2",color:"text-center"},{default:l(()=>[y[24]||(y[24]=S("h4",{class:"mb-3"},"Field Preview",-1)),e(Be,{admin:!0,field:t.value,convention:D(d),modelValue:o.value,"onUpdate:modelValue":y[15]||(y[15]=E=>o.value=E)},null,8,["field","convention","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),actions:l(()=>[e(R,{color:"blue-darken-1",variant:"text",onClick:p},{default:l(()=>y[25]||(y[25]=[k(" Cancel ")])),_:1}),e(R,{color:"blue-darken-1",variant:"text",onClick:U},{default:l(()=>y[26]||(y[26]=[k(" Reset ")])),_:1}),e(ae),e(R,{color:"blue-darken-1",variant:"text",onClick:c},{default:l(()=>y[27]||(y[27]=[k(" Save ")])),_:1})]),_:1},8,["modelValue","title"]))}}),Zl=O({__name:"FieldEditor",props:{modelValue:{required:!0},modelModifiers:{}},emits:q(["refresh"],["update:modelValue"]),setup(I){const m=M(I,"modelValue"),u=B(),d=b(!1),r=b(!1),i=b([{key:"Label",title:"Label",align:"start",sortable:!0},{key:"Name",title:"Internal Name",align:"start",sortable:!0},{key:"Type",title:"Type",align:"start",sortable:!0},{key:"actions",title:"Actions",sortable:!1}]),a=b([]);u.getConventionFields(m.value.ConventionUUID).then(E=>{E&&(a.value=E)});const n=b(-1),t=b({ID:0,FieldUUID:L(),ConventionID:m.value.ID,ConventionUUID:m.value.ConventionUUID,Autofill:!1,Hint:"",Label:"",Multiple:!1,Name:"",Placeholder:"",Type:"TEXT",Values:[],Data:""}),o=te(()=>n.value===-1?"New Field":"Edit Field"),v=()=>({ID:0,FieldUUID:L(),ConventionID:m.value.ID,ConventionUUID:m.value.ConventionUUID,Autofill:!1,Hint:"",Label:"",Multiple:!1,Name:"",Placeholder:"",Type:"TEXT",Values:[],Data:""}),p=b(v()),U=()=>{p.value.FieldUUID=L(),t.value=Object.assign({},v()),n.value=-1,d.value=!0},c=E=>{n.value=a.value.indexOf(E),t.value=Object.assign({},E),d.value=!0},s=E=>{n.value=a.value.indexOf(E),t.value=Object.assign({},E),r.value=!0},V=()=>{u.deleteField(t.value.FieldUUID).then(E=>{E&&(a.value.splice(n.value,1),P())})},g=()=>{d.value=!1,be(()=>{t.value=Object.assign({},p.value),n.value=-1})},P=()=>{r.value=!1,be(()=>{t.value=Object.assign({},p.value),n.value=-1})},y=()=>{u.saveField(t.value).then(E=>{E&&(n.value>-1?Object.assign(a.value[n.value],E):a.value.push(E),g())})};return(E,h)=>(f(),C(We,{headers:i.value,items:a.value,"sort-by":[{key:"calories",order:"asc"}],class:"elevation-1"},{top:l(()=>[e(ie,{color:"primary"},{default:l(()=>[e(de,null,{default:l(()=>h[3]||(h[3]=[k("Field Editor")])),_:1}),e(Je,{class:"mx-4",inset:!0,vertical:!0}),e(ae),e(R,{dark:"",class:"mb-2","prepend-icon":"mdi:mdi-pencil",onClick:U},{default:l(()=>h[4]||(h[4]=[k(" New Item ")])),_:1}),e(we,{modelValue:r.value,"onUpdate:modelValue":h[0]||(h[0]=j=>r.value=j),onDelete:V},null,8,["modelValue"])]),_:1}),d.value?(f(),C(Xl,{key:0,modelValue:d.value,"onUpdate:modelValue":h[1]||(h[1]=j=>d.value=j),field:t.value,"onUpdate:field":[h[2]||(h[2]=j=>t.value=j),y],title:o.value,convention:m.value},null,8,["modelValue","field","title","convention"])):N("",!0)]),"item.actions":l(({item:j})=>[e(J,{size:"small",class:"me-2",onClick:Xe=>c(j)},{default:l(()=>h[5]||(h[5]=[k(" mdi:mdi-pencil ")])),_:2},1032,["onClick"]),e(J,{size:"small",onClick:Xe=>s(j)},{default:l(()=>h[6]||(h[6]=[k(" mdi:mdi-delete ")])),_:2},1032,["onClick"])]),_:1},8,["headers","items"]))}}),Ql=(I,m)=>{const u=me(I,m),d=me(I,m,void 0,void 0,"item"),r=b(H(d.value));return X(d,()=>{r.value=H(d.value)}),{state:u,model:d,close:()=>{u.value=!1},reset:()=>{d.value=H(r.value)},save:()=>{m("save")}}},et=O({__name:"EditItemDialog",props:{item:{},modelValue:{type:Boolean},title:{},cardClass:{}},emits:["update:modelValue","update:item","save"],setup(I,{emit:m}){const u=I,d=m,{state:r,model:i,close:a,reset:n,save:t}=Ql(u,d);return(o,v)=>(f(),C(qe,{modelValue:D(r),"onUpdate:modelValue":v[0]||(v[0]=p=>ge(r)?r.value=p:null),onReset:D(n),onSave:D(t),title:o.title,color:"primary","card-class":o.cardClass,fullscreen:!0,persistent:!0},{toolbarButtons:l(()=>[Ae(o.$slots,"toolbarButtons")]),actions:l(()=>[e(R,{color:"blue-darken-1",variant:"text",onClick:D(a)},{default:l(()=>v[1]||(v[1]=[k(" Cancel ")])),_:1},8,["onClick"]),e(R,{color:"blue-darken-1",variant:"text",onClick:D(n)},{default:l(()=>v[2]||(v[2]=[k(" Reset ")])),_:1},8,["onClick"]),e(ae),e(R,{color:"blue-darken-1",variant:"text",onClick:D(t)},{default:l(()=>v[3]||(v[3]=[k(" Save ")])),_:1},8,["onClick"])]),default:l(()=>[Ae(o.$slots,"default")]),_:3},8,["modelValue","onReset","onSave","title","card-class"]))}}),lt={class:"pa-0 border-0 ma-0"},tt={class:"pa-0 border-0 ma-0"},at=O({__name:"EditFormField",props:q({convention:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(I){const m=M(I,"modelValue"),u=B(),d=b([]),r=b([]),i=b(""),a=n=>{var t;m.value.Field=(t=r.value.find(o=>o.value===n))==null?void 0:t.field};return u.getConventionFields(I.convention.ConventionUUID).then(n=>{n&&(d.value=n,r.value=n.map(t=>({title:`${t.Label} (${(he.find(o=>o.value===t.Type)||{title:""}).title})`,value:t.FieldUUID,field:t})),a(m.value.FieldUUID))}),(n,t)=>(f(),C(x,null,{default:l(()=>[e(T,{cols:"12",md:"6"},{default:l(()=>[S("fieldset",lt,[t[5]||(t[5]=S("legend",{class:"mb-2"},"Field Settings",-1)),e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(re,{modelValue:m.value.FieldUUID,"onUpdate:modelValue":[t[0]||(t[0]=o=>m.value.FieldUUID=o),a],items:r.value,"item-title":"title","item-value":"value",label:"Field",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(T,{cols:"6",sm:"4"},{default:l(()=>[e(F,{modelValue:m.value.MinLength,"onUpdate:modelValue":t[1]||(t[1]=o=>m.value.MinLength=o),modelModifiers:{number:!0},label:"Min Length",type:"number",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(T,{cols:"6",sm:"4"},{default:l(()=>[e(F,{modelValue:m.value.MaxLength,"onUpdate:modelValue":t[2]||(t[2]=o=>m.value.MaxLength=o),modelModifiers:{number:!0},label:"Max Length",type:"number",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"4"},{default:l(()=>[e(W,{modelValue:m.value.Required,"onUpdate:modelValue":t[3]||(t[3]=o=>m.value.Required=o),modelModifiers:{boolean:!0},label:"Required","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),m.value.FieldUUID&&m.value.Field?(f(),C(T,{key:0,cols:"12",md:"6"},{default:l(()=>[S("fieldset",tt,[t[6]||(t[6]=S("legend",{class:"text-blue-accent-2 mb-2"},"Field Preview",-1)),m.value.Field?(f(),C(Be,{key:0,admin:!0,field:m.value.Field,"persistent-hint":!0,required:m.value.Required,convention:n.convention,modelValue:i.value,"onUpdate:modelValue":t[4]||(t[4]=o=>i.value=o)},null,8,["field","required","convention","modelValue"])):N("",!0)])]),_:1})):N("",!0)]),_:1}))}}),ot={class:"d-none d-sm-block"},nt=O({__name:"EditFormSectionFields",props:q({convention:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(I){const m=M(I,"modelValue"),u=()=>{var d;return{ID:0,SectionFieldUUID:L(),SectionID:m.value.ID,SectionUUID:m.value.SectionUUID,FieldID:0,FieldUUID:"",Order:(((d=m.value.Fields)==null?void 0:d.length)||0)+1,MinLength:0,MaxLength:0,Required:!1,Value:""}};return(d,r)=>m.value.Fields!==void 0?(f(),C(Ye,{key:0,modelValue:m.value.Fields,"onUpdate:modelValue":r[0]||(r[0]=i=>m.value.Fields=i),closeable:!1,title:"Fields","new-item":u,class:"mt-4",label:"name","label-parent":"Field","slot-name-prefix":"field"},$e({_:2},[K(m.value.Fields,(i,a)=>({name:`field_${a}_title`,fn:l(()=>[i.Field?(f(),_(A,{key:0},[k($(i.Field.Label)+" ("+$(i.Field.Name)+") ",1),S("template",ot,[k(" ["+$(i.Field.Type)+"] ",1)])],64)):(f(),_(A,{key:1},[k("New Field")],64))])})),K(m.value.Fields,(i,a)=>({name:`field_${a}`,fn:l(()=>[e(at,{modelValue:m.value.Fields[a],"onUpdate:modelValue":n=>m.value.Fields[a]=n,convention:d.convention,style:{margin:"0 -24px"}},null,8,["modelValue","onUpdate:modelValue","convention"])])}))]),1032,["modelValue"])):N("",!0)}}),ut=O({__name:"EditFormSections",props:q({convention:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(I){const m=M(I,"modelValue"),u=()=>{const d={ID:0,SectionUUID:L(),FormID:m.value.ID,FormUUID:m.value.FormUUID,Order:0,Name:"New Section",Heading:"",Description:"",Fields:[],DefaultValue:"",State:{ID:0,SectionStateUUID:L(),SectionID:0,SectionUUID:"",Edit:!0}};return d.State.SectionID=d.ID,d.State.SectionUUID=d.SectionUUID,d};return(d,r)=>(f(),C(Ye,{modelValue:m.value.Sections,"onUpdate:modelValue":r[0]||(r[0]=i=>m.value.Sections=i),"new-item":u,closeable:!1,title:"Sections","slot-name-prefix":"section"},$e({_:2},[K(m.value.Sections,(i,a)=>({name:`section_${a}`,fn:l(()=>[e(x,null,{default:l(()=>[e(T,{cols:"12",sm:"6"},{default:l(()=>[e(F,{modelValue:i.Name,"onUpdate:modelValue":n=>i.Name=n,label:"Internal Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(T,{cols:"12",sm:"6"},{default:l(()=>[e(F,{modelValue:i.Heading,"onUpdate:modelValue":n=>i.Heading=n,label:"Section Heading",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(Ve,{modelValue:i.Description,"onUpdate:modelValue":n=>i.Description=n,label:"Section Text",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),i.Fields?(f(),C(nt,{key:0,modelValue:m.value.Sections[a],"onUpdate:modelValue":n=>m.value.Sections[a]=n,convention:d.convention},null,8,["modelValue","onUpdate:modelValue","convention"])):N("",!0)])}))]),1032,["modelValue"]))}}),it=O({__name:"FormRendererPopup",props:q({admin:{type:Boolean},convention:{},form:{},title:{},cardClass:{},preview:{type:Boolean}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:q(["update:form"],["update:modelValue"]),setup(I,{emit:m}){const u=I,{admin:d=!1,convention:r,title:i="",cardClass:a=""}=u,n=m,t=M(I,"modelValue"),o=me(u,n,void 0,void 0,"form"),v=b(H(o.value));X(o,()=>{v.value=H(o.value)});const p=()=>{t.value=!1};return(U,c)=>(f(),C(qe,{modelValue:t.value,"onUpdate:modelValue":c[1]||(c[1]=s=>t.value=s),title:D(i),color:"primary","card-class":D(a)},{toolbarButtons:l(()=>[Ae(U.$slots,"toolbarButtons")]),actions:l(()=>[e(R,{color:"blue-darken-1",variant:"text",onClick:p},{default:l(()=>c[2]||(c[2]=[k(" Close ")])),_:1})]),default:l(()=>[e(ll,{modelValue:v.value,"onUpdate:modelValue":c[0]||(c[0]=s=>v.value=s),admin:D(d),convention:D(r),preview:U.preview},null,8,["modelValue","admin","convention","preview"])]),_:3},8,["modelValue","title","card-class"]))}}),dt=O({__name:"EditFormDialog",props:q({convention:{},form:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:q(["update:form"],["update:modelValue"]),setup(I,{emit:m}){const u=I,{convention:d}=u,r=M(I,"modelValue"),i=m,a=B(),n=me(u,i,void 0,void 0,"form"),t=b(!1),o=b(H(n.value));X(n,()=>{o.value=H(n.value)});const v=()=>{a.saveForm(o.value).then(U=>{U&&(n.value=U,r.value=!1)})},p=()=>{t.value=!0};return(U,c)=>(f(),C(et,{modelValue:r.value,"onUpdate:modelValue":c[14]||(c[14]=s=>r.value=s),item:o.value,"onUpdate:item":c[15]||(c[15]=s=>o.value=s),onSave:v,"card-class":"pa-0"},{toolbarButtons:l(()=>[e(sl,null,{default:l(()=>[e(R,{"prepend-icon":"mdi:mdi-developer-board",onClick:p},{default:l(()=>c[16]||(c[16]=[S("template",{class:"d-none d-sm-inline"},[k("Preview")],-1)])),_:1})]),_:1})]),default:l(()=>[e(ve,null,{default:l(()=>[e(pe,{class:"mt-0"},{default:l(()=>[e(fe,null,{default:l(()=>c[17]||(c[17]=[k("General Settings")])),_:1}),e(ce,null,{default:l(()=>[e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(z,{class:"pa-0",fluid:!0},{default:l(()=>[e(x,null,{default:l(()=>[e(T,{cols:"12",sm:"6"},{default:l(()=>[e(F,{modelValue:o.value.Name,"onUpdate:modelValue":c[0]||(c[0]=s=>o.value.Name=s),label:"Internal name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"6"},{default:l(()=>[e(F,{modelValue:o.value.Heading,"onUpdate:modelValue":c[1]||(c[1]=s=>o.value.Heading=s),label:"Form Heading",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(Ve,{modelValue:o.value.Description,"onUpdate:modelValue":c[2]||(c[2]=s=>o.value.Description=s),label:"Pre-form Text",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"6"},{default:l(()=>[e(re,{modelValue:o.value.Type,"onUpdate:modelValue":c[3]||(c[3]=s=>o.value.Type=s),label:"Type",variant:"outlined",items:D(il),"hide-details":""},null,8,["modelValue","items"])]),_:1}),e(T,{cols:"12",sm:"6"},{default:l(()=>[e(F,{modelValue:o.value.NotificationEmail,"onUpdate:modelValue":c[4]||(c[4]=s=>o.value.NotificationEmail=s),label:"Notification Email",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"6",class:"d-none"},{default:l(()=>[e(F,{modelValue:o.value.State.Stage,"onUpdate:modelValue":c[5]||(c[5]=s=>o.value.State.Stage=s),modelModifiers:{number:!0},label:"Stage",variant:"outlined","hide-details":"",type:"number"},null,8,["modelValue"])]),_:1}),e(T,{cols:"6"},{default:l(()=>[e(W,{modelValue:o.value.State.New,"onUpdate:modelValue":c[6]||(c[6]=s=>o.value.State.New=s),label:"Allow New Entries"},null,8,["modelValue"])]),_:1}),e(T,{cols:"6"},{default:l(()=>[e(W,{modelValue:o.value.State.Edit,"onUpdate:modelValue":c[7]||(c[7]=s=>o.value.State.Edit=s),label:"Allow Editing Submissions"},null,8,["modelValue"])]),_:1}),e(T,{cols:"6"},{default:l(()=>[e(W,{modelValue:o.value.State.Independent,"onUpdate:modelValue":c[8]||(c[8]=s=>o.value.State.Independent=s),label:"Independent of Registration Form"},null,8,["modelValue"])]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(Z,{label:"Required Tags",variant:"outlined",modelValue:o.value.RequiredTags,"onUpdate:modelValue":c[9]||(c[9]=s=>o.value.RequiredTags=s),convention:D(d),organisation:D(d).OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user must have to see this form. (Any one)"},null,8,["modelValue","convention","organisation"])]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(He,{label:"Required Groups",variant:"outlined",modelValue:o.value.RequiredGroupMemberships,"onUpdate:modelValue":c[10]||(c[10]=s=>o.value.RequiredGroupMemberships=s),convention:D(d),organisation:D(d).OrganisationUUID,chips:"",clearable:"",hint:"Groups that a user must be in to see this form. (Any one)"},null,8,["modelValue","convention","organisation"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o.value?(f(),C(ut,{key:0,modelValue:o.value,"onUpdate:modelValue":c[11]||(c[11]=s=>o.value=s),convention:D(d),style:{"border-radius":"0"}},null,8,["modelValue","convention"])):N("",!0),t.value?(f(),C(it,{key:1,modelValue:t.value,"onUpdate:modelValue":c[12]||(c[12]=s=>t.value=s),form:o.value,"onUpdate:form":c[13]||(c[13]=s=>o.value=s),admin:!0,convention:D(d),title:"Form Preview",preview:!0,"card-class":"pa-0"},null,8,["modelValue","form","convention"])):N("",!0)]),_:1},8,["modelValue","item"]))}}),st=(I,m)=>{const u=b(!1),d=b(!1),r=b(I),i=b(-1),a=b(m),n=b(m),t=te(()=>i.value===-1?"New Form":"Edit Form"),o=()=>{r.value=I},v=g=>{i.value=r.value.indexOf(g),a.value=Object.assign({},g),u.value=!0},p=g=>{i.value=r.value.indexOf(g),a.value=Object.assign({},g),d.value=!0},U=()=>{d.value=!1,be(()=>{a.value=Object.assign({},n.value),i.value=-1}).then()},c=()=>{r.value.splice(i.value,1),U()},s=()=>{u.value=!1,be(()=>{a.value=Object.assign({},n.value),i.value=-1}).then()},V=()=>{i.value>-1?Object.assign(r.value[i.value],a.value):r.value.push(a.value),s()};return X(u,g=>{g||s()}),X(d,g=>{g||U()}),{collection:r,defaultItem:n,dialog:u,dialogDelete:d,editedItem:a,formTitle:t,reset:o,editItem:v,deleteItem:p,deleteItemConfirm:c,close:s,save:V}},rt=O({__name:"FormEditor",props:{modelValue:{required:!0},modelModifiers:{}},emits:q(["refresh"],["update:modelValue"]),setup(I){const m=M(I,"modelValue"),u=B(),d=b([{key:"Name",title:"Form Name",align:"start",sortable:!0},{key:"Type",title:"Type",align:"start",sortable:!0},{key:"actions",title:"Actions",sortable:!1}]),r=b([]),i=b([]);u.getConventionFields(m.value.ConventionUUID).then(P=>{r.value=P}),u.getConventionForms(m.value.ConventionUUID).then(P=>{i.value=P});const a={ID:0,FormUUID:L(),ConventionID:m.value.ID,ConventionUUID:m.value.ConventionUUID,ParentID:0,ParentUUID:Ue,Name:"",Heading:"",Description:"",Type:dl.FORM_TYPE_ADDITIONAL,Sections:[],State:{ID:0,FormStateUUID:L(),FormID:0,FormUUID:Ue,New:!1,Edit:!1,Stage:0,Independent:!1},RequiredGroupMemberships:[],RequiredTags:[],NotificationEmail:""};a.State.FormUUID=a.FormUUID;const{collection:n,defaultItem:t,dialog:o,dialogDelete:v,editedItem:p,editItem:U,deleteItem:c,deleteItemConfirm:s,save:V}=st(i,a);n.value.forEach(P=>{P.Sections.forEach(y=>{var E;(E=y.Fields)==null||E.forEach(h=>{h.Field=r.value.find(j=>j.ID===h.FieldID)})})});const g=P=>{u.deleteForm(P.FormUUID).then(y=>{y&&c(P)})};return(P,y)=>(f(),C(We,{headers:d.value,items:D(n),"sort-by":[{key:"calories",order:"asc"}],class:"elevation-1"},{top:l(()=>[e(ie,{color:"primary"},{default:l(()=>[e(de,null,{default:l(()=>y[4]||(y[4]=[k("Form Editor")])),_:1}),e(Je,{class:"mx-4",inset:!0,vertical:!0}),e(ae),e(R,{dark:"",class:"mb-2","prepend-icon":"mdi:mdi-pencil",onClick:y[0]||(y[0]=E=>{p.value=Object.assign({},D(t)),o.value=!0})},{default:l(()=>y[5]||(y[5]=[k(" New Item ")])),_:1}),e(we,{modelValue:D(v),"onUpdate:modelValue":y[1]||(y[1]=E=>ge(v)?v.value=E:null),onDelete:D(s)},null,8,["modelValue","onDelete"])]),_:1}),D(o)?(f(),C(dt,{key:0,modelValue:D(o),"onUpdate:modelValue":y[2]||(y[2]=E=>ge(o)?o.value=E:null),form:D(p),"onUpdate:form":[y[3]||(y[3]=E=>ge(p)?p.value=E:null),D(V)],convention:m.value},null,8,["modelValue","form","onUpdate:form","convention"])):N("",!0)]),"item.actions":l(({item:E})=>[e(J,{size:"small",class:"me-2",onClick:h=>D(U)(E)},{default:l(()=>y[6]||(y[6]=[k(" mdi:mdi-pencil ")])),_:2},1032,["onClick"]),e(J,{size:"small",onClick:h=>g(E)},{default:l(()=>y[7]||(y[7]=[k(" mdi:mdi-delete ")])),_:2},1032,["onClick"])]),_:1},8,["headers","items"]))}}),mt=O({__name:"LinkedFields",props:{convention:{}},emits:["update:convention"],setup(I,{emit:m}){return me(I,m,void 0,void 0,"convention"),(r,i)=>null}}),vt={class:"mt-4"},Se="payment_processors_stripe",pt=O({__name:"Stripe",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],async setup(I){let m,u;const d=B(),r=M(I,"modelValue"),i=b(),a=()=>({private_key:"",public_key:"",webhook_id:"",webhook_secret:""}),n=b(!1);try{i.value=([m,u]=Ze(()=>d.getConventionConfig(r.value.ConventionUUID,Se)),m=await m,u(),m),i.value.Setting||(i.value.Setting=a())}catch{i.value={ID:0,ConventionConfigUUID:Ue,ConventionID:r.value.ID,ConventionUUID:r.value.ConventionUUID,Convention:r.value,Key:"",Setting:a()}}const t=async()=>{try{n.value=!0,await d.saveConventionConfig(r.value.ConventionUUID,Se,i.value.Setting)}catch(v){console.error(v)}n.value=!1},o=v=>{try{navigator.clipboard.writeText(v).catch(()=>{})}catch{}};return(v,p)=>(f(),C(vl,{method:"post",action:`/api/convention/${r.value.ConventionUUID}/config/${Se}`,onSubmit:ue(t,["prevent"]),class:"pa-sm-4"},{default:l(()=>[p[8]||(p[8]=S("h2",null,"Stripe Configuration",-1)),e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[e(F,{label:"Private Key","hide-details":"",modelValue:i.value.Setting.private_key,"onUpdate:modelValue":p[0]||(p[0]=U=>i.value.Setting.private_key=U)},null,8,["modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(F,{label:"Public Key","hide-details":"",modelValue:i.value.Setting.public_key,"onUpdate:modelValue":p[1]||(p[1]=U=>i.value.Setting.public_key=U)},null,8,["modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(F,{label:"Webhook ID","hide-details":"",modelValue:i.value.Setting.webhook_id,"onUpdate:modelValue":p[2]||(p[2]=U=>i.value.Setting.webhook_id=U)},null,8,["modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(F,{label:"Webhook Key","hide-details":"",modelValue:i.value.Setting.webhook_secret,"onUpdate:modelValue":p[3]||(p[3]=U=>i.value.Setting.webhook_secret=U)},null,8,["modelValue"])]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(T,{cols:"12"},{default:l(()=>[p[5]||(p[5]=S("p",{class:"font-weight-bold"}," WebHook URI ",-1)),p[6]||(p[6]=S("p",null,[S("small",null,"Setup a Stripe WebHook using this URI and add all payment_intent events.")],-1)),S("p",vt,[e(ml,{text:"Click to Copy"},{activator:l(({props:U})=>[S("span",Ce({class:"cursor-pointer",onClick:p[4]||(p[4]=c=>o(`${D(d).getEndPoint()}/stripe/hook/${r.value.ConventionUUID}`))},U),[k($(D(d).getEndPoint())+"/stripe/hook/"+$(r.value.ConventionUUID)+" ",1),e(J,{icon:"mdi:mdi-clipboard-outline"})],16)]),_:1})])]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(T,{class:"text-right"},{default:l(()=>[e(R,{type:"submit",color:"success"},$e({default:l(()=>[p[7]||(p[7]=k(" Save "))]),_:2},[n.value?{name:"prepend",fn:l(()=>[e(al,{size:"20",indeterminate:""})]),key:"0"}:void 0]),1024)]),_:1})]),_:1})]),_:1},8,["action"]))}}),ft=O({__name:"PaymentProcessor",props:{convention:{required:!0},conventionModifiers:{}},emits:["update:convention"],setup(I){const m=M(I,"convention"),u=b(""),d=b(),r=b([{id:L(),title:"Stripe",component:oe(pt),model:m}]);return(i,a)=>(f(),_(A,null,[u.value?(f(),C(fl,{key:0,type:"error"},{default:l(()=>[e(pl,null,{default:l(()=>a[2]||(a[2]=[k("Error Encountered")])),_:1}),k(" "+$(u.value),1)]),_:1})):N("",!0),e(Ne,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=n=>d.value=n),"bg-color":"secondary","show-arrows":""},{default:l(()=>[(f(!0),_(A,null,K(r.value,(n,t)=>(f(),C(Fe,{key:t,text:n.title,value:n.id},null,8,["text","value"]))),128))]),_:1},8,["modelValue"]),e(Pe,{modelValue:d.value,"onUpdate:modelValue":a[1]||(a[1]=n=>d.value=n)},{default:l(()=>[(f(!0),_(A,null,K(r.value,(n,t)=>(f(),C(Re,{key:t,value:n.id},{default:l(()=>[e(se,{class:"pa-2"},{default:l(()=>[(f(),C(Ke(n.component),{modelValue:n.model,"onUpdate:modelValue":o=>n.model=o},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])],64))}}),da=O({__name:"ConventionEditorView",emits:["delete","pageTitle","refresh"],setup(I,{emit:m}){const u=m,d=Qe(),r=B(),a=b({ID:0,ConventionUUID:Ue,Accommodation:[],Description:"",DetailLink:"",Extras:[],Interests:[],Logo:"",Name:"",OrganisationID:0,OrganisationUUID:"",Slug:"",Tickets:[],Visible:!1}),n=b(!1),t=b(`
Are you sure you wish to delete this convention? All data relating to it will be
removed including all registrations and payment information. This action can
not be undone. To confirm type "I UNDERSTAND" in the box below.
`),o=b(),v=b(),p=b([{id:"general",title:"General",component:void 0,model:null},{id:"configuration",title:"Main Configuration",component:void 0,model:null},{id:"linked",title:"Linked Fields",component:void 0,model:null},{id:"payments",title:"Payment Processor",component:void 0,model:null}]),U=b([{id:L(),title:"Accommodation",component:oe(Kl),model:a},{id:L(),title:"Additional Purchases",component:oe(Dl),model:a},{id:L(),title:"Fields",component:oe(Zl),model:a},{id:L(),title:"Forms",component:oe(rt),model:a},{id:L(),title:"Interests",component:oe(Il),model:a},{id:L(),title:"Tickets",component:oe(Rl),model:a},{id:L(),title:"Venues",component:oe(wl),model:a}]),c=s=>{r.deleteConvention(a.value.ConventionUUID).then(V=>{V?s&&(s("Convention Deleted"),u("delete")):s&&s("Failed to Delete Convention"),setTimeout(()=>{n.value=!1},2e3)}).catch(()=>{s&&(s("Failed to Delete Organisation"),n.value=!1)})};return u("pageTitle","Convention Editor"),r.getConvention(d.params.convention.toString()).then(s=>{s?(a.value=s,u("pageTitle",`Convention Editor - ${a.value.Name}`)):u("pageTitle","Convention Editor - New Convention")}),(s,V)=>(f(),C(ee,null,{default:l(()=>[e(Ne,{modelValue:o.value,"onUpdate:modelValue":V[0]||(V[0]=g=>o.value=g),"bg-color":"primary","show-arrows":"","selected-class":"bg-secondary","hide-slider":""},{default:l(()=>[(f(!0),_(A,null,K(p.value,(g,P)=>(f(),C(Fe,{key:P,text:g.title,value:g.id},null,8,["text","value"]))),128))]),_:1},8,["modelValue"]),e(Pe,{modelValue:o.value,"onUpdate:modelValue":V[8]||(V[8]=g=>o.value=g)},{default:l(()=>[(f(!0),_(A,null,K(p.value,(g,P)=>(f(),C(Re,{key:P,value:g.id},{default:l(()=>[o.value===g.id?(f(),_(A,{key:0},[g.id==="general"?(f(),_(A,{key:0},[e(rl,{embed:!0,convention:a.value,"onUpdate:convention":V[1]||(V[1]=y=>a.value=y),onDelete:V[2]||(V[2]=y=>n.value=!0),title:`${a.value.Name} General Settings`},null,8,["convention","title"]),e(we,{modelValue:n.value,"onUpdate:modelValue":V[3]||(V[3]=y=>n.value=y),"confirmation-text":"I UNDERSTAND",message:t.value,title:"Delete Convention",subtitle:"A quick way to make enemies",onDelete:c},null,8,["modelValue","message"])],64)):g.id==="configuration"?(f(),_(A,{key:1},[a.value&&a.value.ConventionUUID!==D(Ue)?(f(),C(Ne,{key:0,modelValue:v.value,"onUpdate:modelValue":V[4]||(V[4]=y=>v.value=y),"bg-color":"secondary","show-arrows":""},{default:l(()=>[(f(!0),_(A,null,K(U.value,(y,E)=>(f(),C(Fe,{key:E,text:y.title,value:y.id},null,8,["text","value"]))),128))]),_:1},8,["modelValue"])):N("",!0),e(Pe,{modelValue:v.value,"onUpdate:modelValue":V[5]||(V[5]=y=>v.value=y)},{default:l(()=>[(f(!0),_(A,null,K(U.value,(y,E)=>(f(),C(Re,{key:E,value:y.id},{default:l(()=>[e(se,{class:"pa-2"},{default:l(()=>[(f(),C(Ke(y.component),{modelValue:y.model,"onUpdate:modelValue":h=>y.model=h},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue"])],64)):g.id==="linked"?(f(),C(Le,{key:2},{default:l(()=>[e(mt,{convention:a.value,"onUpdate:convention":V[6]||(V[6]=y=>a.value=y)},null,8,["convention"])]),_:1})):g.id==="payments"?(f(),C(Le,{key:3},{default:l(()=>[e(ft,{convention:a.value,"onUpdate:convention":V[7]||(V[7]=y=>a.value=y)},null,8,["convention"])]),_:1})):N("",!0)],64)):N("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}))}});export{da as default};
