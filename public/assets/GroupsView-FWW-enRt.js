import{i as le,M as J,N as ne,n as I,q as M,v as l,f as e,r as f,k as Q,w as Z,V as S,c as de,F as j,P as ue,O as Ee,x as R,D as G,H as X,Q as me,G as U,z as Pe,y as h,A as $,R as ve,X as re,a2 as ye}from"./index-Dc0PJCAV.js";import{O as D,G as F}from"./canDo-CHtQwS4q.js";import{P as Ne}from"./permission-Ba-8wP-4.js";import{a as O,V as ee}from"./VRow-C98q8wHR.js";import{V as b}from"./VCheckbox-wdOzeniY.js";import{e as ie,V as k}from"./VContainer-skhVHdC9.js";import{_ as De}from"./DeleteDialog.vue_vue_type_script_setup_true_lang-BOoo8wIi.js";import{u as pe}from"./useModel-CUrDqfXa.js";import{_ as fe}from"./ModelDialog.vue_vue_type_script_setup_true_lang-BjyZHRqF.js";import{V as Ce}from"./VTextField-Di7Mdt7F.js";import{V as se}from"./VSelect-CU6M64tH.js";import{G as Ue,A as Ge}from"./userData-BgiVn9qc.js";import{u as Re}from"./useAvatar-fIU0Z322.js";import{a as ke,_ as Me,l as Se}from"./SaveButton.vue_vue_type_script_setup_true_lang-DrMbS0ZZ.js";import{c as Ae}from"./copyToClipboard-BtcEYe2-.js";import{_ as Le}from"./UserSelect.vue_vue_type_script_setup_true_lang-D8AHQSLv.js";import{C as _e}from"./canManageGlobalUsers-P9b4HQC5.js";import{S as he}from"./setupLogin-BTbIs6Kl.js";import{V as Fe,a as Ye,c as $e,d as je}from"./VList-BYhZqXWf.js";import{V as xe}from"./VDialog-DOdgwJ6n.js";import{e as We,a as Be,b as ze,c as qe,d as He}from"./VCard-BtDrxj2w.js";import{V as Ve}from"./scopeId-Ckyk7eJQ.js";import{V as Qe}from"./forwardRefs-BVi-1r4K.js";import{V as Xe}from"./VSheet-C3c6kEBb.js";import{V as Je}from"./VToolbar-C2vm6IUD.js";import{V as Ke}from"./VTable-oN73Rg5Z.js";import{v as K}from"./v4-CtRu48qb.js";import"./VCheckboxBtn-Ctu7zwS7.js";import"./form-C_nqeyZf.js";import"./VOverlay-CbITe18g.js";import"./VChip-Dc7cTl6U.js";import"./useStoreAPI-E23S3FdK.js";import"./layout-CfMkfkvA.js";import"./VAutocomplete-C9_Ry2n-.js";import"./filter-xF2oHn7Z.js";import"./createSimpleFunctional-Dn1He-s9.js";import"./VDivider-CvNf32pw.js";const ge=le({__name:"EditGroupPermissions",props:J({disabled:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(A){const d=ne(A,"modelValue");return(V,o)=>(I(),M(ie,null,{default:l(()=>[e(ee,null,{default:l(()=>[e(O,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:d.value.CheckIn,"onUpdate:modelValue":o[0]||(o[0]=r=>d.value.CheckIn=r),label:"Check In","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(O,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:d.value.EditConvention,"onUpdate:modelValue":o[1]||(o[1]=r=>d.value.EditConvention=r),label:"Edit Convention","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(O,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:d.value.EditOrganisation,"onUpdate:modelValue":o[2]||(o[2]=r=>d.value.EditOrganisation=r),label:"Edit Organisation","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(O,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:d.value.EditPaymentTransactions,"onUpdate:modelValue":o[3]||(o[3]=r=>d.value.EditPaymentTransactions=r),label:"Manage Registration Payments","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(O,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:d.value.EditRegistration,"onUpdate:modelValue":o[4]||(o[4]=r=>d.value.EditRegistration=r),label:"Edit Registrations","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(O,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:d.value.ManageUsers,"onUpdate:modelValue":o[5]||(o[5]=r=>d.value.ManageUsers=r),label:"Manage Users","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(O,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:d.value.ManageViews,"onUpdate:modelValue":o[6]||(o[6]=r=>d.value.ManageViews=r),label:"Manage Views","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(O,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:d.value.ViewPaymentTransactions,"onUpdate:modelValue":o[7]||(o[7]=r=>d.value.ViewPaymentTransactions=r),label:"View Payment Transactions","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(O,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:d.value.ViewRegistration,"onUpdate:modelValue":o[8]||(o[8]=r=>d.value.ViewRegistration=r),label:"View Registrations","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(O,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:d.value.ConfigureLostAndFound,"onUpdate:modelValue":o[9]||(o[9]=r=>d.value.ConfigureLostAndFound=r),label:"Configure Lost and Found","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(O,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:d.value.EditLostAndFound,"onUpdate:modelValue":o[10]||(o[10]=r=>d.value.EditLostAndFound=r),label:"Edit Lost and Found","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(O,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:d.value.ViewLostAndFound,"onUpdate:modelValue":o[11]||(o[11]=r=>d.value.ViewLostAndFound=r),label:"View Lost and Found","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(O,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:d.value.ConfigureProps,"onUpdate:modelValue":o[12]||(o[12]=r=>d.value.ConfigureProps=r),label:"Configure Props","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(O,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:d.value.EditProps,"onUpdate:modelValue":o[13]||(o[13]=r=>d.value.EditProps=r),label:"Edit Props","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(O,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:d.value.ViewProps,"onUpdate:modelValue":o[14]||(o[14]=r=>d.value.ViewProps=r),label:"View Props","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}))}}),Ze=le({__name:"EditGroupDialog",props:J({conventions:{},organisations:{},group:{},title:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:J(["update:group","save"],["update:modelValue"]),setup(A,{emit:d}){const V=A,o=ue(),{conventions:r,organisations:L,title:x=""}=V,y=d,E=ne(A,"modelValue"),T=pe(V,y,void 0,void 0,"group"),a=f(Q(T.value)),g=f(null);a.value.OwnerType===D.OWNER_TYPE_CONVENTION?g.value=r.filter(v=>v.ConventionUUID==a.value.OwnerUUID).map(v=>v.ConventionUUID).join(""):a.value.OwnerType===D.OWNER_TYPE_ORGANISATION?g.value=L.filter(v=>v.OrganisationUUID==a.value.OwnerUUID).map(v=>v.OrganisationUUID).join(""):(a.value.Type===F.GROUP_TYPE_SYSTEM||a.value.Type===F.GROUP_TYPE_ADMIN)&&(g.value=null),Z(T,()=>{a.value=Q(T.value)});const w=f({ID:0,PermissionUUID:S,GroupID:0,GroupUUID:S,CheckIn:!1,EditConvention:!1,EditOrganisation:!1,EditPaymentTransactions:!1,EditRegistration:!1,ViewPaymentTransactions:!1,ViewRegistration:!1,ManageUsers:!1,ManageViews:!1,ConfigureProps:!1,EditProps:!1,ViewProps:!1,ConfigureLostAndFound:!1,EditLostAndFound:!1,ViewLostAndFound:!1});o.getPermission(F.GROUP_TYPE_SYSTEM,S).then(v=>{w.value=v,N()}).catch(()=>{});const P=()=>{a.value=Q(T.value),N()},C=v=>{if(g.value==null)a.value.Type=F.GROUP_TYPE_ADMIN,a.value.OwnerType=null,a.value.OwnerID=null,a.value.OwnerUUID=null;else{const u=Y.value.find(c=>g.value===c.OwnerUUID);u&&(u.OwnerType==D.OWNER_TYPE_ORGANISATION?a.value.Type=F.GROUP_TYPE_ORGANISATION:u.OwnerType==D.OWNER_TYPE_CONVENTION&&(a.value.Type=F.GROUP_TYPE_CONVENTION),a.value.OwnerType=u.OwnerType,a.value.OwnerID=u.OwnerID,a.value.OwnerUUID=u.OwnerUUID)}o.saveGroup(a.value).then(u=>{u&&v&&v("Group Saved").then(()=>{T.value=u,y("save",u)})}).catch(()=>{v&&v("Failed to Save Group")})},N=()=>{const v=Y.value.find(u=>a.value.OwnerUUID===u.OwnerUUID);v?g.value=v.OwnerUUID:Y.value.length>0&&(g.value=null)},Y=de(()=>{const v=[];return w.value.ManageUsers&&v.push({Label:"System Admin",OwnerID:null,OwnerUUID:null,OwnerType:null}),v.push(...r.map(u=>({Label:`${u.Name} (Convention)`,OwnerID:u.ID,OwnerUUID:u.ConventionUUID,OwnerType:D.OWNER_TYPE_CONVENTION}))),v.push(...L.map(u=>({Label:`${u.Name} (Organisation)`,OwnerID:u.ID,OwnerUUID:u.OrganisationUUID,OwnerType:D.OWNER_TYPE_ORGANISATION}))),v});return N(),(v,u)=>(I(),M(fe,{modelValue:E.value,"onUpdate:modelValue":u[3]||(u[3]=c=>E.value=c),onReset:P,onSave:C,title:j(x),color:"primary","show-close-action":!0,"show-reset-action":!0,"show-save-action":!0,fullscreen:!0,persistent:!0},{default:l(()=>[e(ie,{class:"pa-0",fluid:!0},{default:l(()=>[e(ee,null,{default:l(()=>[e(O,{cols:"12",md:"6"},{default:l(()=>[e(Ce,{modelValue:a.value.Name,"onUpdate:modelValue":u[0]||(u[0]=c=>a.value.Name=c),label:"Name",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(O,{cols:"12",md:"6"},{default:l(()=>[e(se,{modelValue:g.value,"onUpdate:modelValue":u[1]||(u[1]=c=>g.value=c),label:"Owner",items:Y.value,"item-title":"Label","item-value":"OwnerUUID",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),e(O,{cols:"12"},{default:l(()=>[e(ge,{modelValue:a.value.Permission,"onUpdate:modelValue":u[2]||(u[2]=c=>a.value.Permission=c),disabled:!1},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title"]))}}),el={key:1},ll=["href"],al=le({__name:"EditGroupMembersDialog",props:J({group:{},title:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:J(["update:group","save"],["update:modelValue"]),setup(A,{emit:d}){const V=A,o=ue(),r=Re(),L=Ue(),{title:x=""}=V,y=d,E=ne(A,"modelValue"),T=pe(V,y,void 0,void 0,"group"),a=f(Q(T.value)),g=f(""),w=f(!1),P=f(S);(a.value.Users==null||a.value.Users.length==0)&&o.getGroupMembers(a.value.GroupUUID).then(s=>{s&&(a.value.Users=s)}).catch(()=>{a.value.Users=[]});const C=f(""),N=()=>{o.getGroupInvite(a.value.GroupUUID).then(s=>{if(s){const i=new URL(location.href);i.searchParams.set("token",s),C.value=i.toString()}})};N(),Z(T,()=>{a.value=Q(T.value)});const Y=()=>{Ae(C.value),N()},v=f(!1),u=f(-1),c=f(""),_=()=>{u.value=-1,v.value=!1},ae=s=>{u.value=s,v.value=!0},z=()=>{(!P.value||P.value===S)&&(g.value="Invalid User",w.value=!0),o.addUserToGroup(P.value,a.value.GroupUUID).then(s=>{s?(a.value=s,g.value="User added to group",w.value=!0):(g.value="Error adding user to group",w.value=!0)}).catch(s=>{g.value="Error adding user to group: "+s,w.value=!0})},q=({callback:s})=>{if(!a.value.Users){s&&(s("Failed to Remove User"),setTimeout(_,2e3));return}c.value="",u.value<0||u.value>=a.value.Users.length?(s&&s("Invalid Convention"),setTimeout(_,2e3)):o.removeUserFromGroup(a.value.Users[u.value].UserUUID,a.value.GroupUUID).then(i=>{var p;i?((p=a.value.Users)==null||p.splice(u.value,1),s&&s("User Removed")):s&&s("Failed to Remove User"),setTimeout(_,2e3)}).catch(()=>{s&&(s("Failed to Remove User"),setTimeout(_,2e3))})},H=s=>{const i=ve();o.switchUser(s).then(p=>{p&&he(p.tokens,p.user,i,!1)}).catch(p=>{console.error(p)})};return(s,i)=>(I(),M(fe,{modelValue:E.value,"onUpdate:modelValue":i[3]||(i[3]=p=>E.value=p),title:j(x),color:"primary",fullscreen:!0,persistent:!0},Ee({default:l(()=>[e(ie,{class:"pa-0",fluid:!0},{default:l(()=>[a.value.Users&&a.value.Users.length?(I(),G(X,{key:0},[e(Fe,null,{default:l(()=>[(I(!0),G(X,null,me(a.value.Users,(p,te)=>(I(),M(Ye,{key:p.UserUUID},{append:l(()=>[e(k,{color:"red-darken-3",icon:"mdi:mdi-window-close",size:"x-small",onClick:oe=>ae(te)},null,8,["onClick"])]),prepend:l(()=>[e(Qe,{src:j(r)(p.UserUUID),class:"rounded-circle mr-2",height:"32",width:"32"},null,8,["src"])]),default:l(()=>[e($e,null,{default:l(()=>[R(h(p.DisplayName)+" ",1),j(_e)(j(L))?(I(),M(k,{key:0,icon:"mdi:mdi-account-switch-outline",variant:"flat",size:"small",onClick:oe=>H(p.UserUUID)},null,8,["onClick"])):$("",!0)]),_:2},1024),e(je,null,{default:l(()=>[R(h(p.Handle?`(${p.Handle})`:""),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(xe,{modelValue:v.value,"onUpdate:modelValue":i[2]||(i[2]=p=>v.value=p),width:"auto"},{default:l(()=>[e(We,null,{default:l(()=>[e(Be,null,{default:l(()=>i[5]||(i[5]=[R(" Remove User from Group ")])),_:1}),e(ze,null,{default:l(()=>i[6]||(i[6]=[R(" User will no longer have the permissions from this group. ")])),_:1}),e(qe,null,{default:l(()=>[e(ee,null,{default:l(()=>[e(O,null,{default:l(()=>i[7]||(i[7]=[U("p",null," Are you sure you wish to remove this user? If they have permissions from another group these will still be usable. To add the user back into the group you may need to provide them with a new invite link. ",-1)])),_:1})]),_:1})]),_:1}),e(He,null,{default:l(()=>[e(k,{color:"primary",onClick:_},{default:l(()=>i[8]||(i[8]=[R("Cancel")])),_:1}),e(Ve),e(Me,{color:"red-darken-3",label:"Remove User",onClick:q})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)):(I(),G("p",el," No members "))]),_:1})]),actions:l(()=>[e(k,{variant:"text"},{default:l(()=>[U("a",{href:C.value,onClick:Pe(Y,["prevent"])},"Invite URL",8,ll)]),_:1})]),_:2},[s.group.OwnerType===j(D).OWNER_TYPE_CONVENTION&&s.group.OwnerUUID?{name:"extension",fn:l(()=>[e(ee,null,{default:l(()=>[e(O,null,{default:l(()=>[e(Le,{modelValue:P.value,"onUpdate:modelValue":i[0]||(i[0]=p=>P.value=p),convention:s.group.OwnerUUID,"null-label":"- Select User -",variant:"plain"},null,8,["modelValue","convention"])]),_:1}),e(O,{class:"pt-5"},{default:l(()=>[e(k,{onClick:z,variant:"flat",class:"mt-2",color:"success","prepend-icon":"mdi:mdi-account-plus"},{default:l(()=>i[4]||(i[4]=[R(" Add User ")])),_:1})]),_:1})]),_:1}),e(ke,{message:g.value,modelValue:w.value,"onUpdate:modelValue":i[1]||(i[1]=p=>w.value=p)},null,8,["message","modelValue"])]),key:"0"}:void 0]),1032,["modelValue","title"]))}}),tl={key:0,class:"text-center mt-5 text-red text-h5"},ol={key:1,class:"text-center mt-5"},sl={class:"d-block d-md-none mt-2"},nl={class:"d-none d-md-table-cell"},Wl=le({__name:"GroupsView",emits:["pageTitle"],setup(A,{emit:d}){d("pageTitle","Manage Groups & Permissions");const o=ue(),r=Ue(),L=ve(),x=f(!1),y=f(),E=f(),T=f([]),a=f([]),g=f([]),w=f(!1),P=f(!1),C=f(!1),N=f(""),v=new URL(location.href).searchParams.get("token")||"",u=n=>{const t=()=>{const m=sessionStorage.getItem("gjt_attempt");let W=Se.parseInt(m||"0");W<2?(sessionStorage.setItem("gjt_attempt",(W+1).toString()),setTimeout(()=>{location.reload()},2e3)):(sessionStorage.removeItem("gjt_attempt"),localStorage.removeItem("gjt_token"),N.value="There was a problem with this token, it may have expired or already been used.",setTimeout(()=>{L.push("/")},5e3))};o.validateGroupInviteToken(n).then(m=>{m?(Ge(m),localStorage.removeItem("gjt_token"),sessionStorage.setItem("reload","true"),L.push("/")):t()}).catch(()=>{t()})};v!==""?(localStorage.setItem("gjt_token",location.href),u(v)):(x.value=!0,(!r||!r.Groups.find(n=>n.Permission.ManageUsers))&&L.push("/")),Z(y,()=>{z(E.value,y.value)}),Z(E,()=>{z(E.value,y.value)});const c=n=>n.OwnerType===D.OWNER_TYPE_CONVENTION?T.value.filter(t=>t.ConventionUUID===n.OwnerUUID).map(t=>t.Name).join(""):n.OwnerType===D.OWNER_TYPE_ORGANISATION?g.value.filter(t=>t.OrganisationUUID===n.OwnerUUID).map(t=>t.Name).join(""):n.OwnerType===void 0||n.OwnerType===null?"System":"Unknown",_=n=>n.OwnerType===D.OWNER_TYPE_CONVENTION?"Convention":n.OwnerType===D.OWNER_TYPE_ORGANISATION?"Organisation":n.OwnerType===void 0||n.OwnerType===null?"Global":"Unknown",ae=()=>{o.getPermissionAccessList(Ne.PERMISSION_TYPE_MANAGE_USERS).then(n=>{T.value=n.Conventions,g.value=n.Organisations}).catch(()=>{})},z=(n=S,t=S)=>{o.getManageableGroups(n||S,t||S).then(m=>{m&&(a.value=m.sort((W,B)=>W.Name>B.Name?1:-1))}).catch(()=>{})},q=()=>{const n={ID:0,GroupUUID:K(),Type:F.GROUP_TYPE_CONVENTION,Name:"",MinimumNumbers:0,Permission:{ID:0,PermissionUUID:K(),GroupID:0,GroupUUID:K(),CheckIn:!1,EditConvention:!1,EditOrganisation:!1,EditPaymentTransactions:!1,EditRegistration:!1,ManageUsers:!1,ManageViews:!1,ViewPaymentTransactions:!1,ViewRegistration:!1,ConfigureProps:!1,EditProps:!1,ViewProps:!1,ConfigureLostAndFound:!1,EditLostAndFound:!1,ViewLostAndFound:!1},Users:[],OwnerID:null,OwnerType:null,OwnerUUID:null};return n.Permission.GroupUUID=n.GroupUUID,n},H=f(q()),s=f(-1),i=f(q()),p=de(()=>s.value===-1?"New Group":"Edit Group"),te=()=>{H.value.GroupUUID=K(),i.value=Object.assign({},q()),s.value=-1,w.value=!0},oe=n=>{s.value=a.value.indexOf(n),i.value=Object.assign({},n),P.value=!0},Oe=n=>{s.value=a.value.indexOf(n),i.value=Object.assign({},n),w.value=!0},Ie=n=>{s.value=a.value.indexOf(n),i.value=Object.assign({},n),C.value=!0},we=()=>{o.deleteGroup(i.value.GroupUUID).then(n=>{n&&(a.value.splice(s.value,1),Te())})},be=()=>{w.value=!1,re(()=>{i.value=Object.assign({},H.value),s.value=-1})},Te=()=>{C.value=!1,re(()=>{i.value=Object.assign({},H.value),s.value=-1})},ce=n=>{s.value>-1?Object.assign(a.value[s.value],n):a.value.push(n),be()};return ae(),z(E.value,y.value),(n,t)=>(I(),G("div",null,[x.value?(I(),G(X,{key:1},[e(Je,{color:"primary"},{default:l(()=>[e(se,{label:"Organisation",modelValue:E.value,"onUpdate:modelValue":t[0]||(t[0]=m=>E.value=m),items:g.value,"item-value":"OrganisationUUID","item-title":"Name",clearable:!0,"hide-details":"",class:"mr-1"},null,8,["modelValue","items"]),e(se,{label:"Convention",modelValue:y.value,"onUpdate:modelValue":t[1]||(t[1]=m=>y.value=m),items:T.value,"item-value":"ConventionUUID","item-title":"Name",clearable:!0,"hide-details":""},null,8,["modelValue","items"]),e(Ve),e(k,{dark:"",class:"mb-2","prepend-icon":"mdi:mdi-pencil",onClick:te},{default:l(()=>t[8]||(t[8]=[R(" New Group ")])),_:1}),e(De,{modelValue:C.value,"onUpdate:modelValue":t[2]||(t[2]=m=>C.value=m),onDelete:we},null,8,["modelValue"])]),_:1}),w.value?(I(),M(Ze,{key:0,modelValue:w.value,"onUpdate:modelValue":t[3]||(t[3]=m=>w.value=m),group:i.value,"onUpdate:group":t[4]||(t[4]=m=>i.value=m),onSave:ce,title:p.value,conventions:T.value,organisations:g.value},null,8,["modelValue","group","title","conventions","organisations"])):$("",!0),P.value?(I(),M(al,{key:1,modelValue:P.value,"onUpdate:modelValue":t[5]||(t[5]=m=>P.value=m),group:i.value,"onUpdate:group":t[6]||(t[6]=m=>i.value=m),title:`${i.value.Name}`},null,8,["modelValue","group","title"])):$("",!0),e(Ke,null,{default:l(()=>[t[15]||(t[15]=U("thead",null,[U("tr",null,[U("th",null,"Name"),U("th",{class:"d-none d-md-table-cell"}," Owner "),U("th",null,"Permissions"),U("th")])],-1)),U("tbody",null,[(I(!0),G(X,null,me(a.value,(m,W)=>(I(),G("tr",{key:m.GroupUUID,class:ye(W%2?"bg-grey-lighten-4":"")},[U("td",null,[R(h(m.Name)+" ",1),U("p",sl,[t[9]||(t[9]=U("strong",null,"Owner",-1)),t[10]||(t[10]=U("br",null,null,-1)),R(" "+h(c(m)),1),t[11]||(t[11]=U("br",null,null,-1)),U("small",null,"("+h(_(m))+")",1)])]),U("td",nl,[R(h(c(m)),1),t[12]||(t[12]=U("br",null,null,-1)),U("small",null,"("+h(_(m))+")",1)]),U("td",null,[m.Permission?(I(),M(ge,{key:0,modelValue:m.Permission,"onUpdate:modelValue":B=>m.Permission=B,disabled:!0},null,8,["modelValue","onUpdate:modelValue"])):$("",!0)]),U("td",null,[e(k,{icon:"mdi:mdi-account-group",size:"x-small",color:"success",class:"mb-1",onClick:B=>oe(m)},null,8,["onClick"]),t[14]||(t[14]=U("br",null,null,-1)),m.Type!==j(F).GROUP_TYPE_SYSTEM?(I(),G(X,{key:0},[e(k,{icon:"mdi:mdi-pencil",size:"x-small",color:"primary",class:"mb-1",onClick:B=>Oe(m)},null,8,["onClick"]),t[13]||(t[13]=U("br",null,null,-1)),e(k,{icon:"mdi:mdi-delete",size:"x-small",color:"error",class:"mb-1",onClick:B=>Ie(m)},null,8,["onClick"])],64)):$("",!0)])],2))),128))])]),_:1})],64)):(I(),M(Xe,{key:0,elevation:"2",class:"pa-4"},{default:l(()=>[t[7]||(t[7]=U("h1",{class:"text-center mt-5"},"Processing Invite...",-1)),N.value?(I(),G("p",tl,h(N.value),1)):$("",!0),N.value?(I(),G("p",ol,"Please contact your admin and request a new one")):$("",!0)]),_:1}))]))}});export{Wl as default};
