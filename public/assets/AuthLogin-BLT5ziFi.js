import{i as f,r as h,F as g,G as r,y as d,ay as A,H as E,U as D,P as L,R as P,n as R}from"./index-Dz-KKuQk.js";import{G as _}from"./userData-3wLL-Kql.js";import{S as k}from"./setupLogin-CK6S0xc0.js";import{E as v}from"./emailFormVariant-DbFKH7n9.js";const I=f({__name:"AuthLogin",props:{variant:{default:()=>v.COMBINED}},setup(n){const u=D(),a=h(u.params.method),i=L(),t=new URL(location.href),s=P(),c=t.searchParams.get("code")||"",m=t.searchParams.get("token")||"",l=t.searchParams.get("state")||"";return i.oAuthLogin(a.value,c,m,l).then(({created:o,tokens:e,user:p})=>{k(e,p,s,o)}),_()&&n.variant!=="ADD_CREDENTIAL"&&s.push("/"),(o,e)=>(R(),g(E,null,[r("p",null,d(A(a.value)),1),e[0]||(e[0]=r("p",null,"Authorising...",-1))],64))}});export{I as default};
