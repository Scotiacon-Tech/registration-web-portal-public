import{g as Ke,V as Ve}from"./VTextField-CYZGqgEG.js";import{p as ue,a8 as Te,d as he,u as ce,I as nt,aJ as at,c as F,r as J,ad as ut,s as N,a6 as ot,aP as it,b as rt,ah as st,U as me,aI as Le,w as Q,aH as fe,m as H,f as c,aQ as ct,aR as xe,F as ee,ai as ft,h as Ae,am as Be,a as Pe,aS as vt,av as dt,t as mt,e as ht,o as gt,J as we,aq as yt,aa as Ue,aT as He,x as Ne,aA as be,aU as Fe,aV as ke,C as de,aE as pt,aW as wt}from"./index-B6R-Aew_.js";import{u as ze}from"./form-D2XRgosz.js";import{f as De,m as je,a as qe}from"./forwardRefs-CMwBLL0X.js";import{m as Vt,e as $e,V as We,a as Se}from"./VList-RCeObXF7.js";import{b as bt,c as Je,e as Oe,d as _e,g as kt}from"./SaveButton.vue_vue_type_script_setup_true_lang-Dy-5Gd8l.js";import{b as St}from"./scopeId-BHr0vU4H.js";import{u as ge,A as Ee,a as Qe,o as Xe,b as Ct,c as xt,d as Ce,q as Pt}from"./VContainer-5F-xl_LL.js";import{V as Ye}from"./VCheckboxBtn-en88wBBO.js";import{a as Ge}from"./VChip-Bhmw1Fdc.js";const It=ue({id:String,submenu:Boolean,...Te(bt({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Je}}),["absolute"])},"VMenu"),Ze=he()({name:"VMenu",props:It(),emits:{"update:modelValue":e=>!0},setup(e,f){let{slots:t}=f;const i=ce(e,"modelValue"),{scopeId:r}=St(),{isRtl:h}=nt(),g=at(),v=F(()=>e.id||`v-menu-${g}`),n=J(),d=ut(Oe,null),P=N(new Set);ot(Oe,{register(){P.value.add(g)},unregister(){P.value.delete(g)},closeParents(u){setTimeout(()=>{var m;!P.value.size&&!e.persistent&&(u==null||(m=n.value)!=null&&m.contentEl&&!it(u,n.value.contentEl))&&(i.value=!1,d==null||d.closeParents())},40)}}),rt(()=>{d==null||d.unregister(),document.removeEventListener("focusin",w)}),st(()=>i.value=!1);async function w(u){var I,y,p;const m=u.relatedTarget,S=u.target;await me(),i.value&&m!==S&&((I=n.value)!=null&&I.contentEl)&&((y=n.value)!=null&&y.globalTop)&&![document,n.value.contentEl].includes(S)&&!n.value.contentEl.contains(S)&&((p=Le(n.value.contentEl)[0])==null||p.focus())}Q(i,u=>{u?(d==null||d.register(),fe&&document.addEventListener("focusin",w,{once:!0})):(d==null||d.unregister(),fe&&document.removeEventListener("focusin",w))},{immediate:!0});function o(u){d==null||d.closeParents(u)}function k(u){var m,S,I,y,p;if(!e.disabled)if(u.key==="Tab"||u.key==="Enter"&&!e.closeOnContentClick){if(u.key==="Enter"&&(u.target instanceof HTMLTextAreaElement||u.target instanceof HTMLInputElement&&u.target.closest("form")))return;u.key==="Enter"&&u.preventDefault(),ct(Le((m=n.value)==null?void 0:m.contentEl,!1),u.shiftKey?"prev":"next",D=>D.tabIndex>=0)||(i.value=!1,(I=(S=n.value)==null?void 0:S.activatorEl)==null||I.focus())}else e.submenu&&u.key===(h.value?"ArrowRight":"ArrowLeft")&&(i.value=!1,(p=(y=n.value)==null?void 0:y.activatorEl)==null||p.focus())}function L(u){var S;if(e.disabled)return;const m=(S=n.value)==null?void 0:S.contentEl;m&&i.value?u.key==="ArrowDown"?(u.preventDefault(),u.stopImmediatePropagation(),xe(m,"next")):u.key==="ArrowUp"?(u.preventDefault(),u.stopImmediatePropagation(),xe(m,"prev")):e.submenu&&(u.key===(h.value?"ArrowRight":"ArrowLeft")?i.value=!1:u.key===(h.value?"ArrowLeft":"ArrowRight")&&(u.preventDefault(),xe(m,"first"))):(e.submenu?u.key===(h.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(u.key))&&(i.value=!0,u.preventDefault(),setTimeout(()=>setTimeout(()=>L(u))))}const A=F(()=>H({"aria-haspopup":"menu","aria-expanded":String(i.value),"aria-owns":v.value,onKeydown:L},e.activatorProps));return ge(()=>{const u=_e.filterProps(e);return c(_e,H({ref:n,id:v.value,class:["v-menu",e.class],style:e.style},u,{modelValue:i.value,"onUpdate:modelValue":m=>i.value=m,absolute:!0,activatorProps:A.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":o,onKeydown:k},r),{activator:t.activator,default:function(){for(var m=arguments.length,S=new Array(m),I=0;I<m;I++)S[I]=arguments[I];return c(Ee,{root:"VMenu"},{default:()=>{var y;return[(y=t.default)==null?void 0:y.call(t,...S)]}})}})}),De({id:v,Î¨openChildren:P},n)}}),At=ue({renderless:Boolean,...Qe()},"VVirtualScrollItem"),Ft=he()({name:"VVirtualScrollItem",inheritAttrs:!1,props:At(),emits:{"update:height":e=>!0},setup(e,f){let{attrs:t,emit:i,slots:r}=f;const{resizeRef:h,contentRect:g}=Xe(void 0,"border");Q(()=>{var v;return(v=g.value)==null?void 0:v.height},v=>{v!=null&&i("update:height",v)}),ge(()=>{var v,n;return e.renderless?c(ee,null,[(v=r.default)==null?void 0:v.call(r,{itemRef:h})]):c("div",H({ref:h,class:["v-virtual-scroll__item",e.class],style:e.style},t),[(n=r.default)==null?void 0:n.call(r)])})}}),Tt=-1,Dt=1,Ie=100,Et=ue({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function Rt(e,f){const t=ft(),i=N(0);Ae(()=>{i.value=parseFloat(e.itemHeight||0)});const r=N(0),h=N(Math.ceil((parseInt(e.height)||t.height.value)/(i.value||16))||1),g=N(0),v=N(0),n=J(),d=J();let P=0;const{resizeRef:w,contentRect:o}=Xe();Ae(()=>{w.value=n.value});const k=F(()=>{var l;return n.value===document.documentElement?t.height.value:((l=o.value)==null?void 0:l.height)||parseInt(e.height)||0}),L=F(()=>!!(n.value&&d.value&&k.value&&i.value));let A=Array.from({length:f.value.length}),u=Array.from({length:f.value.length});const m=N(0);let S=-1;function I(l){return A[l]||i.value}const y=vt(()=>{const l=performance.now();u[0]=0;const s=f.value.length;for(let x=1;x<=s-1;x++)u[x]=(u[x-1]||0)+I(x-1);m.value=Math.max(m.value,performance.now()-l)},m),p=Q(L,l=>{l&&(p(),P=d.value.offsetTop,y.immediate(),z(),~S&&me(()=>{fe&&window.requestAnimationFrame(()=>{se(S),S=-1})}))});Be(()=>{y.clear()});function oe(l,s){const x=A[l],M=i.value;i.value=M?Math.min(i.value,s):s,(x!==s||M!==i.value)&&(A[l]=s,y())}function D(l){return l=Pe(l,0,f.value.length-1),u[l]||0}function te(l){return Mt(u,l)}let le=0,K=0,X=0;Q(k,(l,s)=>{s&&(z(),l<s&&requestAnimationFrame(()=>{K=0,z()}))});function Y(){if(!n.value||!d.value)return;const l=n.value.scrollTop,s=performance.now();s-X>500?(K=Math.sign(l-le),P=d.value.offsetTop):K=l-le,le=l,X=s,z()}function ne(){!n.value||!d.value||(K=0,X=0,z())}let ae=-1;function z(){cancelAnimationFrame(ae),ae=requestAnimationFrame(ie)}function ie(){if(!n.value||!k.value)return;const l=le-P,s=Math.sign(K),x=Math.max(0,l-Ie),M=Pe(te(x),0,f.value.length),j=l+k.value+Ie,b=Pe(te(j)+1,M+1,f.value.length);if((s!==Tt||M<r.value)&&(s!==Dt||b>h.value)){const O=D(r.value)-D(M),B=D(b)-D(h.value);Math.max(O,B)>Ie?(r.value=M,h.value=b):(M<=0&&(r.value=M),b>=f.value.length&&(h.value=b))}g.value=D(r.value),v.value=D(f.value.length)-D(h.value)}function se(l){const s=D(l);!n.value||l&&!s?S=l:n.value.scrollTop=s}const ve=F(()=>f.value.slice(r.value,h.value).map((l,s)=>({raw:l,index:s+r.value})));return Q(f,()=>{A=Array.from({length:f.value.length}),u=Array.from({length:f.value.length}),y.immediate(),z()},{deep:!0}),{calculateVisibleItems:z,containerRef:n,markerRef:d,computedItems:ve,paddingTop:g,paddingBottom:v,scrollToIndex:se,handleScroll:Y,handleScrollend:ne,handleItemResize:oe}}function Mt(e,f){let t=e.length-1,i=0,r=0,h=null,g=-1;if(e[t]<f)return t;for(;i<=t;)if(r=i+t>>1,h=e[r],h>f)t=r-1;else if(h<f)g=r,i=r+1;else return h===f?r:i;return g}const Lt=ue({items:{type:Array,default:()=>[]},renderless:Boolean,...Et(),...Qe(),...Ct()},"VVirtualScroll"),et=he()({name:"VVirtualScroll",props:Lt(),setup(e,f){let{slots:t}=f;const i=dt("VVirtualScroll"),{dimensionStyles:r}=xt(e),{calculateVisibleItems:h,containerRef:g,markerRef:v,handleScroll:n,handleScrollend:d,handleItemResize:P,scrollToIndex:w,paddingTop:o,paddingBottom:k,computedItems:L}=Rt(e,mt(e,"items"));return ht(()=>e.renderless,()=>{function A(){var S,I;const m=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";g.value===document.documentElement?(document[m]("scroll",n,{passive:!0}),document[m]("scrollend",d)):((S=g.value)==null||S[m]("scroll",n,{passive:!0}),(I=g.value)==null||I[m]("scrollend",d))}gt(()=>{g.value=kt(i.vnode.el,!0),A(!0)}),Be(A)}),ge(()=>{const A=L.value.map(u=>c(Ft,{key:u.index,renderless:e.renderless,"onUpdate:height":m=>P(u.index,m)},{default:m=>{var S;return(S=t.default)==null?void 0:S.call(t,{item:u.raw,index:u.index,...m})}}));return e.renderless?c(ee,null,[c("div",{ref:v,class:"v-virtual-scroll__spacer",style:{paddingTop:we(o.value)}},null),A,c("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:we(k.value)}},null)]):c("div",{ref:g,class:["v-virtual-scroll",e.class],onScrollPassive:n,onScrollend:d,style:[r.value,e.style]},[c("div",{ref:v,class:"v-virtual-scroll__container",style:{paddingTop:we(o.value),paddingBottom:we(k.value)}},[A])])}),{calculateVisibleItems:h,scrollToIndex:w}}});function tt(e,f){const t=N(!1);let i;function r(v){cancelAnimationFrame(i),t.value=!0,i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{t.value=!1})})}async function h(){await new Promise(v=>requestAnimationFrame(v)),await new Promise(v=>requestAnimationFrame(v)),await new Promise(v=>requestAnimationFrame(v)),await new Promise(v=>{if(t.value){const n=Q(t,()=>{n(),v()})}else v()})}async function g(v){var P,w;if(v.key==="Tab"&&((P=f.value)==null||P.focus()),!["PageDown","PageUp","Home","End"].includes(v.key))return;const n=(w=e.value)==null?void 0:w.$el;if(!n)return;(v.key==="Home"||v.key==="End")&&n.scrollTo({top:v.key==="Home"?0:n.scrollHeight,behavior:"smooth"}),await h();const d=n.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(v.key==="PageDown"||v.key==="Home"){const o=n.getBoundingClientRect().top;for(const k of d)if(k.getBoundingClientRect().top>=o){k.focus();break}}else{const o=n.getBoundingClientRect().bottom;for(const k of[...d].reverse())if(k.getBoundingClientRect().bottom<=o){k.focus();break}}}return{onScrollPassive:r,onKeydown:g}}const lt=ue({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:yt,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...Vt({itemChildren:!1})},"Select"),Ot=ue({...lt(),...Te(Ke({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...je({transition:{component:Je}})},"VSelect"),Zt=he()({name:"VSelect",props:Ot(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,f){let{slots:t}=f;const{t:i}=Ue(),r=J(),h=J(),g=J(),v=ce(e,"menu"),n=F({get:()=>v.value,set:l=>{var s;v.value&&!l&&((s=h.value)!=null&&s.Î¨openChildren.size)||(v.value=l)}}),{items:d,transformIn:P,transformOut:w}=$e(e),o=ce(e,"modelValue",[],l=>P(l===null?[null]:be(l)),l=>{const s=w(l);return e.multiple?s:s[0]??null}),k=F(()=>typeof e.counterValue=="function"?e.counterValue(o.value):typeof e.counterValue=="number"?e.counterValue:o.value.length),L=ze(e),A=F(()=>o.value.map(l=>l.value)),u=N(!1),m=F(()=>n.value?e.closeText:e.openText);let S="",I;const y=F(()=>e.hideSelected?d.value.filter(l=>!o.value.some(s=>e.valueComparator(s,l))):d.value),p=F(()=>e.hideNoData&&!y.value.length||L.isReadonly.value||L.isDisabled.value),oe=F(()=>{var l;return{...e.menuProps,activatorProps:{...((l=e.menuProps)==null?void 0:l.activatorProps)||{},"aria-haspopup":"listbox"}}}),D=J(),te=tt(D,r);function le(l){e.openOnClear&&(n.value=!0)}function K(){p.value||(n.value=!n.value)}function X(l){Fe(l)&&Y(l)}function Y(l){var j,b;if(!l.key||L.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(l.key)&&l.preventDefault(),["Enter","ArrowDown"," "].includes(l.key)&&(n.value=!0),["Escape","Tab"].includes(l.key)&&(n.value=!1),l.key==="Home"?(j=D.value)==null||j.focus("first"):l.key==="End"&&((b=D.value)==null||b.focus("last"));const s=1e3;if(e.multiple||!Fe(l))return;const x=performance.now();x-I>s&&(S=""),S+=l.key.toLowerCase(),I=x;const M=d.value.find(O=>O.title.toLowerCase().startsWith(S));if(M!==void 0){o.value=[M];const O=y.value.indexOf(M);fe&&window.requestAnimationFrame(()=>{var B;O>=0&&((B=g.value)==null||B.scrollToIndex(O))})}}function ne(l){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!l.props.disabled)if(e.multiple){const x=o.value.findIndex(j=>e.valueComparator(j.value,l.value)),M=s??!~x;if(~x){const j=M?[...o.value,l]:[...o.value];j.splice(x,1),o.value=j}else M&&(o.value=[...o.value,l])}else{const x=s!==!1;o.value=x?[l]:[],me(()=>{n.value=!1})}}function ae(l){var s;(s=D.value)!=null&&s.$el.contains(l.relatedTarget)||(n.value=!1)}function z(){var l;e.eager&&((l=g.value)==null||l.calculateVisibleItems())}function ie(){var l;u.value&&((l=r.value)==null||l.focus())}function se(l){u.value=!0}function ve(l){if(l==null)o.value=[];else if(ke(r.value,":autofill")||ke(r.value,":-webkit-autofill")){const s=d.value.find(x=>x.title===l);s&&ne(s)}else r.value&&(r.value.value="")}return Q(n,()=>{if(!e.hideSelected&&n.value&&o.value.length){const l=y.value.findIndex(s=>o.value.some(x=>e.valueComparator(x.value,s.value)));fe&&window.requestAnimationFrame(()=>{var s;l>=0&&((s=g.value)==null||s.scrollToIndex(l))})}}),Q(()=>e.items,(l,s)=>{n.value||u.value&&!s.length&&l.length&&(n.value=!0)}),ge(()=>{const l=!!(e.chips||t.chip),s=!!(!e.hideNoData||y.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),x=o.value.length>0,M=Ve.filterProps(e),j=x||!u.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return c(Ve,H({ref:r},M,{modelValue:o.value.map(b=>b.props.value).join(", "),"onUpdate:modelValue":ve,focused:u.value,"onUpdate:focused":b=>u.value=b,validationValue:o.externalValue,counterValue:k.value,dirty:x,class:["v-select",{"v-select--active-menu":n.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":o.value.length,"v-select--selection-slot":!!t.selection},e.class],style:e.style,inputmode:"none",placeholder:j,"onClick:clear":le,"onMousedown:control":K,onBlur:ae,onKeydown:Y,"aria-label":i(m.value),title:i(m.value)}),{...t,default:()=>c(ee,null,[c(Ze,H({ref:h,modelValue:n.value,"onUpdate:modelValue":b=>n.value=b,activator:"parent",contentClass:"v-select__content",disabled:p.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:z,onAfterLeave:ie},oe.value),{default:()=>[s&&c(We,H({ref:D,selected:A.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:b=>b.preventDefault(),onKeydown:X,onFocusin:se,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},te,e.listProps),{default:()=>{var b,O,B;return[(b=t["prepend-item"])==null?void 0:b.call(t),!y.value.length&&!e.hideNoData&&(((O=t["no-data"])==null?void 0:O.call(t))??c(Se,{title:i(e.noDataText)},null)),c(et,{ref:g,renderless:!0,items:y.value},{default:G=>{var V;let{item:q,index:Z,itemRef:E}=G;const a=H(q.props,{ref:E,key:Z,onClick:()=>ne(q,null)});return((V=t.item)==null?void 0:V.call(t,{item:q,index:Z,props:a}))??c(Se,H(a,{role:"option"}),{prepend:T=>{let{isSelected:C}=T;return c(ee,null,[e.multiple&&!e.hideSelected?c(Ye,{key:q.value,modelValue:C,ripple:!1,tabindex:"-1"},null):void 0,q.props.prependAvatar&&c(qe,{image:q.props.prependAvatar},null),q.props.prependIcon&&c(Ce,{icon:q.props.prependIcon},null)])}})}}),(B=t["append-item"])==null?void 0:B.call(t)]}})]}),o.value.map((b,O)=>{function B(E){E.stopPropagation(),E.preventDefault(),ne(b,!1)}const G={"onClick:close":B,onKeydown(E){E.key!=="Enter"&&E.key!==" "||(E.preventDefault(),E.stopPropagation(),B(E))},onMousedown(E){E.preventDefault(),E.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},q=l?!!t.chip:!!t.selection,Z=q?He(l?t.chip({item:b,index:O,props:G}):t.selection({item:b,index:O})):void 0;if(!(q&&!Z))return c("div",{key:b.value,class:"v-select__selection"},[l?t.chip?c(Ee,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:b.title}}},{default:()=>[Z]}):c(Ge,H({key:"chip",closable:e.closableChips,size:"small",text:b.title,disabled:b.props.disabled},G),null):Z??c("span",{class:"v-select__selection-text"},[b.title,e.multiple&&O<o.value.length-1&&c("span",{class:"v-select__selection-comma"},[Ne(",")])])])})]),"append-inner":function(){var G;for(var b=arguments.length,O=new Array(b),B=0;B<b;B++)O[B]=arguments[B];return c(ee,null,[(G=t["append-inner"])==null?void 0:G.call(t,...O),e.menuIcon?c(Ce,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),De({isFocused:u,menu:n,select:ne},r)}}),_t=(e,f,t)=>e==null||f==null?-1:e.toString().toLocaleLowerCase().indexOf(f.toString().toLocaleLowerCase()),Kt=ue({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Bt(e,f,t){var v;const i=[],r=(t==null?void 0:t.default)??_t,h=t!=null&&t.filterKeys?be(t.filterKeys):!1,g=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return i;e:for(let n=0;n<e.length;n++){const[d,P=d]=be(e[n]),w={},o={};let k=-1;if((f||g>0)&&!(t!=null&&t.noFilter)){if(typeof d=="object"){const u=h||Object.keys(P);for(const m of u){const S=pt(P,m),I=(v=t==null?void 0:t.customKeyFilter)==null?void 0:v[m];if(k=I?I(S,f,d):r(S,f,d),k!==-1&&k!==!1)I?w[m]=k:o[m]=k;else if((t==null?void 0:t.filterMode)==="every")continue e}}else k=r(d,f,d),k!==-1&&k!==!1&&(o.title=k);const L=Object.keys(o).length,A=Object.keys(w).length;if(!L&&!A||(t==null?void 0:t.filterMode)==="union"&&A!==g&&!L||(t==null?void 0:t.filterMode)==="intersection"&&(A!==g||!L))continue}i.push({index:n,matches:{...o,...w}})}return i}function Ut(e,f,t,i){const r=J([]),h=J(new Map),g=F(()=>i!=null&&i.transform?de(f).map(n=>[n,i.transform(n)]):de(f));Ae(()=>{const n=typeof t=="function"?t():de(t),d=typeof n!="string"&&typeof n!="number"?"":String(n),P=Bt(g.value,d,{customKeyFilter:{...e.customKeyFilter,...de(i==null?void 0:i.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),w=de(f),o=[],k=new Map;P.forEach(L=>{let{index:A,matches:u}=L;const m=w[A];o.push(m),k.set(m.value,u)}),r.value=o,h.value=k});function v(n){return h.value.get(n.value)}return{filteredItems:r,filteredMatches:h,getMatches:v}}function Ht(e,f,t){if(f==null)return e;if(Array.isArray(f))throw new Error("Multiple matches is not implemented");return typeof f=="number"&&~f?c(ee,null,[c("span",{class:"v-autocomplete__unmask"},[e.substr(0,f)]),c("span",{class:"v-autocomplete__mask"},[e.substr(f,t)]),c("span",{class:"v-autocomplete__unmask"},[e.substr(f+t)])]):e}const Nt=ue({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...Kt({filterKeys:["title"]}),...lt(),...Te(Ke({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...je({transition:!1})},"VAutocomplete"),el=he()({name:"VAutocomplete",props:Nt(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,f){let{slots:t}=f;const{t:i}=Ue(),r=J(),h=N(!1),g=N(!0),v=N(!1),n=J(),d=J(),P=ce(e,"menu"),w=F({get:()=>P.value,set:a=>{var V;P.value&&!a&&((V=n.value)!=null&&V.Î¨openChildren.size)||(P.value=a)}}),o=N(-1),k=F(()=>{var a;return(a=r.value)==null?void 0:a.color}),L=F(()=>w.value?e.closeText:e.openText),{items:A,transformIn:u,transformOut:m}=$e(e),{textColorClasses:S,textColorStyles:I}=Pt(k),y=ce(e,"search",""),p=ce(e,"modelValue",[],a=>u(a===null?[null]:be(a)),a=>{const V=m(a);return e.multiple?V:V[0]??null}),oe=F(()=>typeof e.counterValue=="function"?e.counterValue(p.value):typeof e.counterValue=="number"?e.counterValue:p.value.length),D=ze(e),{filteredItems:te,getMatches:le}=Ut(e,A,()=>g.value?"":y.value),K=F(()=>e.hideSelected?te.value.filter(a=>!p.value.some(V=>V.value===a.value)):te.value),X=F(()=>!!(e.chips||t.chip)),Y=F(()=>X.value||!!t.selection),ne=F(()=>p.value.map(a=>a.props.value)),ae=F(()=>{var V;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&y.value===((V=K.value[0])==null?void 0:V.title))&&K.value.length>0&&!g.value&&!v.value}),z=F(()=>e.hideNoData&&!K.value.length||D.isReadonly.value||D.isDisabled.value),ie=J(),se=tt(ie,r);function ve(a){e.openOnClear&&(w.value=!0),y.value=""}function l(){z.value||(w.value=!0)}function s(a){z.value||(h.value&&(a.preventDefault(),a.stopPropagation()),w.value=!w.value)}function x(a){var V;Fe(a)&&((V=r.value)==null||V.focus())}function M(a){var C,R,$;if(D.isReadonly.value)return;const V=r.value.selectionStart,T=p.value.length;if((o.value>-1||["Enter","ArrowDown","ArrowUp"].includes(a.key))&&a.preventDefault(),["Enter","ArrowDown"].includes(a.key)&&(w.value=!0),["Escape"].includes(a.key)&&(w.value=!1),ae.value&&["Enter","Tab"].includes(a.key)&&!p.value.some(_=>{let{value:U}=_;return U===K.value[0].value})&&E(K.value[0]),a.key==="ArrowDown"&&ae.value&&((C=ie.value)==null||C.focus("next")),["Backspace","Delete"].includes(a.key)){if(!e.multiple&&Y.value&&p.value.length>0&&!y.value)return E(p.value[0],!1);if(~o.value){const _=o.value;E(p.value[o.value],!1),o.value=_>=T-1?T-2:_}else a.key==="Backspace"&&!y.value&&(o.value=T-1)}if(e.multiple){if(a.key==="ArrowLeft"){if(o.value<0&&V>0)return;const _=o.value>-1?o.value-1:T-1;p.value[_]?o.value=_:(o.value=-1,r.value.setSelectionRange((R=y.value)==null?void 0:R.length,($=y.value)==null?void 0:$.length))}if(a.key==="ArrowRight"){if(o.value<0)return;const _=o.value+1;p.value[_]?o.value=_:(o.value=-1,r.value.setSelectionRange(0,0))}}}function j(a){if(ke(r.value,":autofill")||ke(r.value,":-webkit-autofill")){const V=A.value.find(T=>T.title===a.target.value);V&&E(V)}}function b(){var a;e.eager&&((a=d.value)==null||a.calculateVisibleItems())}function O(){var a;h.value&&(g.value=!0,(a=r.value)==null||a.focus())}function B(a){h.value=!0,setTimeout(()=>{v.value=!0})}function G(a){v.value=!1}function q(a){(a==null||a===""&&!e.multiple&&!Y.value)&&(p.value=[])}const Z=N(!1);function E(a){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!a||a.props.disabled))if(e.multiple){const T=p.value.findIndex(R=>e.valueComparator(R.value,a.value)),C=V??!~T;if(~T){const R=C?[...p.value,a]:[...p.value];R.splice(T,1),p.value=R}else C&&(p.value=[...p.value,a]);e.clearOnSelect&&(y.value="")}else{const T=V!==!1;p.value=T?[a]:[],y.value=T&&!Y.value?a.title:"",me(()=>{w.value=!1,g.value=!0})}}return Q(h,(a,V)=>{var T;a!==V&&(a?(Z.value=!0,y.value=e.multiple||Y.value?"":String(((T=p.value.at(-1))==null?void 0:T.props.title)??""),g.value=!0,me(()=>Z.value=!1)):(!e.multiple&&y.value==null&&(p.value=[]),w.value=!1,p.value.some(C=>{let{title:R}=C;return R===y.value})||(y.value=""),o.value=-1))}),Q(y,a=>{!h.value||Z.value||(a&&(w.value=!0),g.value=!a)}),Q(w,()=>{if(!e.hideSelected&&w.value&&p.value.length){const a=K.value.findIndex(V=>p.value.some(T=>V.value===T.value));fe&&window.requestAnimationFrame(()=>{var V;a>=0&&((V=d.value)==null||V.scrollToIndex(a))})}}),Q(()=>e.items,(a,V)=>{w.value||h.value&&!V.length&&a.length&&(w.value=!0)}),ge(()=>{const a=!!(!e.hideNoData||K.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),V=p.value.length>0,T=Ve.filterProps(e);return c(Ve,H({ref:r},T,{modelValue:y.value,"onUpdate:modelValue":[C=>y.value=C,q],focused:h.value,"onUpdate:focused":C=>h.value=C,validationValue:p.externalValue,counterValue:oe.value,dirty:V,onChange:j,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":w.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!Y.value,"v-autocomplete--selecting-index":o.value>-1},e.class],style:e.style,readonly:D.isReadonly.value,placeholder:V?void 0:e.placeholder,"onClick:clear":ve,"onMousedown:control":l,onKeydown:M}),{...t,default:()=>c(ee,null,[c(Ze,H({ref:n,modelValue:w.value,"onUpdate:modelValue":C=>w.value=C,activator:"parent",contentClass:"v-autocomplete__content",disabled:z.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:b,onAfterLeave:O},e.menuProps),{default:()=>[a&&c(We,H({ref:ie,selected:ne.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:C=>C.preventDefault(),onKeydown:x,onFocusin:B,onFocusout:G,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},se,e.listProps),{default:()=>{var C,R,$;return[(C=t["prepend-item"])==null?void 0:C.call(t),!K.value.length&&!e.hideNoData&&(((R=t["no-data"])==null?void 0:R.call(t))??c(Se,{title:i(e.noDataText)},null)),c(et,{ref:d,renderless:!0,items:K.value},{default:_=>{var Me;let{item:U,index:re,itemRef:W}=_;const Re=H(U.props,{ref:W,key:re,active:ae.value&&re===0?!0:void 0,onClick:()=>E(U,null)});return((Me=t.item)==null?void 0:Me.call(t,{item:U,index:re,props:Re}))??c(Se,H(Re,{role:"option"}),{prepend:ye=>{let{isSelected:pe}=ye;return c(ee,null,[e.multiple&&!e.hideSelected?c(Ye,{key:U.value,modelValue:pe,ripple:!1,tabindex:"-1"},null):void 0,U.props.prependAvatar&&c(qe,{image:U.props.prependAvatar},null),U.props.prependIcon&&c(Ce,{icon:U.props.prependIcon},null)])},title:()=>{var ye,pe;return g.value?U.title:Ht(U.title,(ye=le(U))==null?void 0:ye.title,((pe=y.value)==null?void 0:pe.length)??0)}})}}),($=t["append-item"])==null?void 0:$.call(t)]}})]}),p.value.map((C,R)=>{function $(W){W.stopPropagation(),W.preventDefault(),E(C,!1)}const _={"onClick:close":$,onKeydown(W){W.key!=="Enter"&&W.key!==" "||(W.preventDefault(),W.stopPropagation(),$(W))},onMousedown(W){W.preventDefault(),W.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},U=X.value?!!t.chip:!!t.selection,re=U?He(X.value?t.chip({item:C,index:R,props:_}):t.selection({item:C,index:R})):void 0;if(!(U&&!re))return c("div",{key:C.value,class:["v-autocomplete__selection",R===o.value&&["v-autocomplete__selection--selected",S.value]],style:R===o.value?I.value:{}},[X.value?t.chip?c(Ee,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:C.title}}},{default:()=>[re]}):c(Ge,H({key:"chip",closable:e.closableChips,size:"small",text:C.title,disabled:C.props.disabled},_),null):re??c("span",{class:"v-autocomplete__selection-text"},[C.title,e.multiple&&R<p.value.length-1&&c("span",{class:"v-autocomplete__selection-comma"},[Ne(",")])])])})]),"append-inner":function(){var _;for(var C=arguments.length,R=new Array(C),$=0;$<C;$++)R[$]=arguments[$];return c(ee,null,[(_=t["append-inner"])==null?void 0:_.call(t,...R),e.menuIcon?c(Ce,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:s,onClick:wt,"aria-label":i(L.value),title:i(L.value),tabindex:"-1"},null):void 0])}})}),De({isFocused:h,isPristine:g,menu:w,search:y,filteredItems:te,select:E},r)}});export{el as V,Zt as a,Kt as m,Ut as u};
