import{i as f,r as h,B as g,D as r,y as d,az as A,F as D,Q as E,N as B,P as L,n as P}from"./index-BYb2vsVH.js";import{G as _}from"./userData-BOpFwxCs.js";import{S as k}from"./setupLogin-RyCZs1j9.js";import{E as v}from"./emailFormVariant-DbFKH7n9.js";const G=f({__name:"AuthLogin",props:{variant:{default:()=>v.COMBINED}},setup(n){const u=E(),a=h(u.params.method),i=B(),t=new URL(location.href),s=L(),c=t.searchParams.get("code")||"",m=t.searchParams.get("token")||"",l=t.searchParams.get("state")||"";return i.oAuthLogin(a.value,c,m,l).then(({created:o,tokens:e,user:p})=>{k(e,p,s,o)}),_()&&n.variant!=="ADD_CREDENTIAL"&&s.push("/"),(o,e)=>(P(),g(D,null,[r("p",null,d(A(a.value)),1),e[0]||(e[0]=r("p",null,"Authorising...",-1))],64))}});export{G as default};
