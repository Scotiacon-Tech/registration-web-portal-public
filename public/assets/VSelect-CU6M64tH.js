import{c as Ee,V as fe}from"./VTextField-Di7Mdt7F.js";import{p as $,ab as be,d as le,u as ie,K as De,aO as Re,c as R,r as K,ag as Le,s as M,a9 as Oe,aV as Be,b as Fe,aI as Me,X as re,aN as ve,w as U,aM as G,m as H,f as v,aW as He,aX as oe,H as Y,ak as Ue,h as me,ao as ke,a as ue,ai as _e,aY as Ke,ax as Ne,t as qe,e as ze,o as $e,L as te,ar as je,ad as We,aR as Xe,x as Ye,aC as Ge,aT as ge,aU as he}from"./index-Dc0PJCAV.js";import{u as Je}from"./form-C_nqeyZf.js";import{f as Se,m as Qe,a as Ze}from"./forwardRefs-BVi-1r4K.js";import{m as et,e as tt,V as lt,a as pe}from"./VList-BYhZqXWf.js";import{a as nt,V as Pe,c as ye,b as we,g as at}from"./VOverlay-CbITe18g.js";import{u as ot}from"./scopeId-Ckyk7eJQ.js";import{u as ne,A as Te,a as xe,o as Ce,b as ut,c as st,d as Ve}from"./VContainer-skhVHdC9.js";import{V as it}from"./VCheckboxBtn-Ctu7zwS7.js";import{a as rt}from"./VChip-Dc7cTl6U.js";const ct=$({id:String,submenu:Boolean,...be(nt({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Pe}}),["absolute"])},"VMenu"),dt=le()({name:"VMenu",props:ct(),emits:{"update:modelValue":e=>!0},setup(e,m){let{slots:o}=m;const s=ie(e,"modelValue"),{scopeId:i}=ot(),{isRtl:p}=De(),y=Re(),u=R(()=>e.id||`v-menu-${y}`),l=K(),c=Le(ye,null),x=M(new Set);Oe(ye,{register(){x.value.add(y)},unregister(){x.value.delete(y)},closeParents(n){setTimeout(()=>{var d;!x.value.size&&!e.persistent&&(n==null||(d=l.value)!=null&&d.contentEl&&!Be(n,l.value.contentEl))&&(s.value=!1,c==null||c.closeParents())},40)}}),Fe(()=>{c==null||c.unregister(),document.removeEventListener("focusin",D)}),Me(()=>s.value=!1);async function D(n){var S,w,O;const d=n.relatedTarget,g=n.target;await re(),s.value&&d!==g&&((S=l.value)!=null&&S.contentEl)&&((w=l.value)!=null&&w.globalTop)&&![document,l.value.contentEl].includes(g)&&!l.value.contentEl.contains(g)&&((O=ve(l.value.contentEl)[0])==null||O.focus())}U(s,n=>{n?(c==null||c.register(),G&&document.addEventListener("focusin",D,{once:!0})):(c==null||c.unregister(),G&&document.removeEventListener("focusin",D))},{immediate:!0});function f(n){c==null||c.closeParents(n)}function P(n){var d,g,S,w,O;if(!e.disabled)if(n.key==="Tab"||n.key==="Enter"&&!e.closeOnContentClick){if(n.key==="Enter"&&(n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLInputElement&&n.target.closest("form")))return;n.key==="Enter"&&n.preventDefault(),He(ve((d=l.value)==null?void 0:d.contentEl,!1),n.shiftKey?"prev":"next",T=>T.tabIndex>=0)||(s.value=!1,(S=(g=l.value)==null?void 0:g.activatorEl)==null||S.focus())}else e.submenu&&n.key===(p.value?"ArrowRight":"ArrowLeft")&&(s.value=!1,(O=(w=l.value)==null?void 0:w.activatorEl)==null||O.focus())}function L(n){var g;if(e.disabled)return;const d=(g=l.value)==null?void 0:g.contentEl;d&&s.value?n.key==="ArrowDown"?(n.preventDefault(),n.stopImmediatePropagation(),oe(d,"next")):n.key==="ArrowUp"?(n.preventDefault(),n.stopImmediatePropagation(),oe(d,"prev")):e.submenu&&(n.key===(p.value?"ArrowRight":"ArrowLeft")?s.value=!1:n.key===(p.value?"ArrowLeft":"ArrowRight")&&(n.preventDefault(),oe(d,"first"))):(e.submenu?n.key===(p.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(n.key))&&(s.value=!0,n.preventDefault(),setTimeout(()=>setTimeout(()=>L(n))))}const A=R(()=>H({"aria-haspopup":"menu","aria-expanded":String(s.value),"aria-owns":u.value,onKeydown:L},e.activatorProps));return ne(()=>{const n=we.filterProps(e);return v(we,H({ref:l,id:u.value,class:["v-menu",e.class],style:e.style},n,{modelValue:s.value,"onUpdate:modelValue":d=>s.value=d,absolute:!0,activatorProps:A.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":f,onKeydown:P},i),{activator:o.activator,default:function(){for(var d=arguments.length,g=new Array(d),S=0;S<d;S++)g[S]=arguments[S];return v(Te,{root:"VMenu"},{default:()=>{var w;return[(w=o.default)==null?void 0:w.call(o,...g)]}})}})}),Se({id:u,ΨopenChildren:x},l)}}),ft=$({renderless:Boolean,...xe()},"VVirtualScrollItem"),vt=le()({name:"VVirtualScrollItem",inheritAttrs:!1,props:ft(),emits:{"update:height":e=>!0},setup(e,m){let{attrs:o,emit:s,slots:i}=m;const{resizeRef:p,contentRect:y}=Ce(void 0,"border");U(()=>{var u;return(u=y.value)==null?void 0:u.height},u=>{u!=null&&s("update:height",u)}),ne(()=>{var u,l;return e.renderless?v(Y,null,[(u=i.default)==null?void 0:u.call(i,{itemRef:p})]):v("div",H({ref:p,class:["v-virtual-scroll__item",e.class],style:e.style},o),[(l=i.default)==null?void 0:l.call(i)])})}}),mt=-1,gt=1,se=100,ht=$({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function pt(e,m){const o=Ue(),s=M(0);me(()=>{s.value=parseFloat(e.itemHeight||0)});const i=M(0),p=M(Math.ceil((parseInt(e.height)||o.height.value)/(s.value||16))||1),y=M(0),u=M(0),l=K(),c=K();let x=0;const{resizeRef:D,contentRect:f}=Ce();me(()=>{D.value=l.value});const P=R(()=>{var t;return l.value===document.documentElement?o.height.value:((t=f.value)==null?void 0:t.height)||parseInt(e.height)||0}),L=R(()=>!!(l.value&&c.value&&P.value&&s.value));let A=Array.from({length:m.value.length}),n=Array.from({length:m.value.length});const d=M(0);let g=-1;function S(t){return A[t]||s.value}const w=Ke(()=>{const t=performance.now();n[0]=0;const r=m.value.length;for(let b=1;b<=r-1;b++)n[b]=(n[b-1]||0)+S(b-1);d.value=Math.max(d.value,performance.now()-t)},d),O=U(L,t=>{t&&(O(),x=c.value.offsetTop,w.immediate(),B(),~g&&re(()=>{G&&window.requestAnimationFrame(()=>{ee(g),g=-1})}))});ke(()=>{w.clear()});function j(t,r){const b=A[t],k=s.value;s.value=k?Math.min(s.value,r):r,(b!==r||k!==s.value)&&(A[t]=r,w())}function T(t){return t=ue(t,0,m.value.length-1),n[t]||0}function J(t){return yt(n,t)}let N=0,_=0,W=0;U(P,(t,r)=>{r&&(B(),t<r&&requestAnimationFrame(()=>{_=0,B()}))});let q=-1;function z(){if(!l.value||!c.value)return;const t=l.value.scrollTop,r=performance.now();r-W>500?(_=Math.sign(t-N),x=c.value.offsetTop):_=t-N,N=t,W=r,window.clearTimeout(q),q=window.setTimeout(Q,500),B()}function Q(){!l.value||!c.value||(_=0,W=0,window.clearTimeout(q),B())}let Z=-1;function B(){cancelAnimationFrame(Z),Z=requestAnimationFrame(ae)}function ae(){if(!l.value||!P.value)return;const t=N-x,r=Math.sign(_),b=Math.max(0,t-se),k=ue(J(b),0,m.value.length),h=t+P.value+se,V=ue(J(h)+1,k+1,m.value.length);if((r!==mt||k<i.value)&&(r!==gt||V>p.value)){const C=T(i.value)-T(k),F=T(V)-T(p.value);Math.max(C,F)>se?(i.value=k,p.value=V):(k<=0&&(i.value=k),V>=m.value.length&&(p.value=V))}y.value=T(i.value),u.value=T(m.value.length)-T(p.value)}function ee(t){const r=T(t);!l.value||t&&!r?g=t:l.value.scrollTop=r}const a=R(()=>m.value.slice(i.value,p.value).map((t,r)=>({raw:t,index:r+i.value,key:_e(t)&&"value"in t?t.value:r+i.value})));return U(m,()=>{A=Array.from({length:m.value.length}),n=Array.from({length:m.value.length}),w.immediate(),B()},{deep:!0}),{calculateVisibleItems:B,containerRef:l,markerRef:c,computedItems:a,paddingTop:y,paddingBottom:u,scrollToIndex:ee,handleScroll:z,handleScrollend:Q,handleItemResize:j}}function yt(e,m){let o=e.length-1,s=0,i=0,p=null,y=-1;if(e[o]<m)return o;for(;s<=o;)if(i=s+o>>1,p=e[i],p>m)o=i-1;else if(p<m)y=i,s=i+1;else return p===m?i:s;return y}const wt=$({items:{type:Array,default:()=>[]},renderless:Boolean,...ht(),...xe(),...ut()},"VVirtualScroll"),Vt=le()({name:"VVirtualScroll",props:wt(),setup(e,m){let{slots:o}=m;const s=Ne("VVirtualScroll"),{dimensionStyles:i}=st(e),{calculateVisibleItems:p,containerRef:y,markerRef:u,handleScroll:l,handleScrollend:c,handleItemResize:x,scrollToIndex:D,paddingTop:f,paddingBottom:P,computedItems:L}=pt(e,qe(e,"items"));return ze(()=>e.renderless,()=>{function A(){var g,S;const d=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";y.value===document.documentElement?(document[d]("scroll",l,{passive:!0}),document[d]("scrollend",c)):((g=y.value)==null||g[d]("scroll",l,{passive:!0}),(S=y.value)==null||S[d]("scrollend",c))}$e(()=>{y.value=at(s.vnode.el,!0),A(!0)}),ke(A)}),ne(()=>{const A=L.value.map(n=>v(vt,{key:n.key,renderless:e.renderless,"onUpdate:height":d=>x(n.index,d)},{default:d=>{var g;return(g=o.default)==null?void 0:g.call(o,{item:n.raw,index:n.index,...d})}}));return e.renderless?v(Y,null,[v("div",{ref:u,class:"v-virtual-scroll__spacer",style:{paddingTop:te(f.value)}},null),A,v("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:te(P.value)}},null)]):v("div",{ref:y,class:["v-virtual-scroll",e.class],onScrollPassive:l,onScrollend:c,style:[i.value,e.style]},[v("div",{ref:u,class:"v-virtual-scroll__container",style:{paddingTop:te(f.value),paddingBottom:te(P.value)}},[A])])}),{calculateVisibleItems:p,scrollToIndex:D}}});function bt(e,m){const o=M(!1);let s;function i(u){cancelAnimationFrame(s),o.value=!0,s=requestAnimationFrame(()=>{s=requestAnimationFrame(()=>{o.value=!1})})}async function p(){await new Promise(u=>requestAnimationFrame(u)),await new Promise(u=>requestAnimationFrame(u)),await new Promise(u=>requestAnimationFrame(u)),await new Promise(u=>{if(o.value){const l=U(o,()=>{l(),u()})}else u()})}async function y(u){var x,D;if(u.key==="Tab"&&((x=m.value)==null||x.focus()),!["PageDown","PageUp","Home","End"].includes(u.key))return;const l=(D=e.value)==null?void 0:D.$el;if(!l)return;(u.key==="Home"||u.key==="End")&&l.scrollTo({top:u.key==="Home"?0:l.scrollHeight,behavior:"smooth"}),await p();const c=l.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(u.key==="PageDown"||u.key==="Home"){const f=l.getBoundingClientRect().top;for(const P of c)if(P.getBoundingClientRect().top>=f){P.focus();break}}else{const f=l.getBoundingClientRect().bottom;for(const P of[...c].reverse())if(P.getBoundingClientRect().bottom<=f){P.focus();break}}}return{onScrollPassive:i,onKeydown:y}}const kt=$({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:je,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...et({itemChildren:!1})},"Select"),St=$({...kt(),...be(Ee({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Qe({transition:{component:Pe}})},"VSelect"),Ot=le()({name:"VSelect",props:St(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,m){let{slots:o}=m;const{t:s}=We(),i=K(),p=K(),y=K(),u=ie(e,"menu"),l=R({get:()=>u.value,set:a=>{var t;u.value&&!a&&((t=p.value)!=null&&t.ΨopenChildren.size)||(u.value=a)}}),{items:c,transformIn:x,transformOut:D}=tt(e),f=ie(e,"modelValue",[],a=>x(a===null?[null]:Ge(a)),a=>{const t=D(a);return e.multiple?t:t[0]??null}),P=R(()=>typeof e.counterValue=="function"?e.counterValue(f.value):typeof e.counterValue=="number"?e.counterValue:f.value.length),L=Je(e),A=R(()=>f.value.map(a=>a.value)),n=M(!1),d=R(()=>l.value?e.closeText:e.openText);let g="",S;const w=R(()=>e.hideSelected?c.value.filter(a=>!f.value.some(t=>e.valueComparator(t,a))):c.value),O=R(()=>e.hideNoData&&!w.value.length||L.isReadonly.value||L.isDisabled.value),j=R(()=>{var a;return{...e.menuProps,activatorProps:{...((a=e.menuProps)==null?void 0:a.activatorProps)||{},"aria-haspopup":"listbox"}}}),T=K(),J=bt(T,i);function N(a){e.openOnClear&&(l.value=!0)}function _(){O.value||(l.value=!l.value)}function W(a){ge(a)&&q(a)}function q(a){var k,h;if(!a.key||L.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(a.key)&&a.preventDefault(),["Enter","ArrowDown"," "].includes(a.key)&&(l.value=!0),["Escape","Tab"].includes(a.key)&&(l.value=!1),a.key==="Home"?(k=T.value)==null||k.focus("first"):a.key==="End"&&((h=T.value)==null||h.focus("last"));const t=1e3;if(e.multiple||!ge(a))return;const r=performance.now();r-S>t&&(g=""),g+=a.key.toLowerCase(),S=r;const b=c.value.find(V=>V.title.toLowerCase().startsWith(g));if(b!==void 0){f.value=[b];const V=w.value.indexOf(b);G&&window.requestAnimationFrame(()=>{var C;V>=0&&((C=y.value)==null||C.scrollToIndex(V))})}}function z(a){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!a.props.disabled)if(e.multiple){const r=f.value.findIndex(k=>e.valueComparator(k.value,a.value)),b=t??!~r;if(~r){const k=b?[...f.value,a]:[...f.value];k.splice(r,1),f.value=k}else b&&(f.value=[...f.value,a])}else{const r=t!==!1;f.value=r?[a]:[],re(()=>{l.value=!1})}}function Q(a){var t;(t=T.value)!=null&&t.$el.contains(a.relatedTarget)||(l.value=!1)}function Z(){var a;e.eager&&((a=y.value)==null||a.calculateVisibleItems())}function B(){var a;n.value&&((a=i.value)==null||a.focus())}function ae(a){n.value=!0}function ee(a){if(a==null)f.value=[];else if(he(i.value,":autofill")||he(i.value,":-webkit-autofill")){const t=c.value.find(r=>r.title===a);t&&z(t)}else i.value&&(i.value.value="")}return U(l,()=>{if(!e.hideSelected&&l.value&&f.value.length){const a=w.value.findIndex(t=>f.value.some(r=>e.valueComparator(r.value,t.value)));G&&window.requestAnimationFrame(()=>{var t;a>=0&&((t=y.value)==null||t.scrollToIndex(a))})}}),U(()=>e.items,(a,t)=>{l.value||n.value&&!t.length&&a.length&&(l.value=!0)}),ne(()=>{const a=!!(e.chips||o.chip),t=!!(!e.hideNoData||w.value.length||o["prepend-item"]||o["append-item"]||o["no-data"]),r=f.value.length>0,b=fe.filterProps(e),k=r||!n.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return v(fe,H({ref:i},b,{modelValue:f.value.map(h=>h.props.value).join(", "),"onUpdate:modelValue":ee,focused:n.value,"onUpdate:focused":h=>n.value=h,validationValue:f.externalValue,counterValue:P.value,dirty:r,class:["v-select",{"v-select--active-menu":l.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":f.value.length,"v-select--selection-slot":!!o.selection},e.class],style:e.style,inputmode:"none",placeholder:k,"onClick:clear":N,"onMousedown:control":_,onBlur:Q,onKeydown:q,"aria-label":s(d.value),title:s(d.value)}),{...o,default:()=>v(Y,null,[v(dt,H({ref:p,modelValue:l.value,"onUpdate:modelValue":h=>l.value=h,activator:"parent",contentClass:"v-select__content",disabled:O.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Z,onAfterLeave:B},j.value),{default:()=>[t&&v(lt,H({ref:T,selected:A.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:h=>h.preventDefault(),onKeydown:W,onFocusin:ae,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},J,e.listProps),{default:()=>{var h,V,C;return[(h=o["prepend-item"])==null?void 0:h.call(o),!w.value.length&&!e.hideNoData&&(((V=o["no-data"])==null?void 0:V.call(o))??v(pe,{key:"no-data",title:s(e.noDataText)},null)),v(Vt,{ref:y,renderless:!0,items:w.value},{default:F=>{var de;let{item:I,index:X,itemRef:E}=F;const ce=H(I.props,{ref:E,key:I.value,onClick:()=>z(I,null)});return((de=o.item)==null?void 0:de.call(o,{item:I,index:X,props:ce}))??v(pe,H(ce,{role:"option"}),{prepend:Ae=>{let{isSelected:Ie}=Ae;return v(Y,null,[e.multiple&&!e.hideSelected?v(it,{key:I.value,modelValue:Ie,ripple:!1,tabindex:"-1"},null):void 0,I.props.prependAvatar&&v(Ze,{image:I.props.prependAvatar},null),I.props.prependIcon&&v(Ve,{icon:I.props.prependIcon},null)])}})}}),(C=o["append-item"])==null?void 0:C.call(o)]}})]}),f.value.map((h,V)=>{function C(E){E.stopPropagation(),E.preventDefault(),z(h,!1)}const F={"onClick:close":C,onKeydown(E){E.key!=="Enter"&&E.key!==" "||(E.preventDefault(),E.stopPropagation(),C(E))},onMousedown(E){E.preventDefault(),E.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},I=a?!!o.chip:!!o.selection,X=I?Xe(a?o.chip({item:h,index:V,props:F}):o.selection({item:h,index:V})):void 0;if(!(I&&!X))return v("div",{key:h.value,class:"v-select__selection"},[a?o.chip?v(Te,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:h.title}}},{default:()=>[X]}):v(rt,H({key:"chip",closable:e.closableChips,size:"small",text:h.title,disabled:h.props.disabled},F),null):X??v("span",{class:"v-select__selection-text"},[h.title,e.multiple&&V<f.value.length-1&&v("span",{class:"v-select__selection-comma"},[Ye(",")])])])})]),"append-inner":function(){var F;for(var h=arguments.length,V=new Array(h),C=0;C<h;C++)V[C]=arguments[C];return v(Y,null,[(F=o["append-inner"])==null?void 0:F.call(o,...V),e.menuIcon?v(Ve,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),Se({isFocused:n,menu:l,select:z},i)}});export{Ot as V,vt as a,kt as b,bt as c,dt as d,Vt as e,ht as m,pt as u};
