import{i as j,L as Q,r as v,M as H,c as ve,n as a,q as D,O as W,U as Y,Q as _e,b as $e,D as b,f as t,v as e,G as T,F as w,H as $,k as le,$ as ie,y as k,A as E,x as R,m as De,a0 as ye,P as Ue,z as ne,R as Be}from"./index-_3doXhpQ.js";import{V as ke,u as Ge}from"./debounce-1XzR0opH.js";import{C as Ve,G as we}from"./canDo-DkeZlUvj.js";import{G as Te}from"./userData-C0P92nnn.js";import{u as se}from"./useStoreAPI-CpDdaC3f.js";import{_ as Z}from"./ModelDialog.vue_vue_type_script_setup_true_lang-CBb-gyT6.js";import{_ as X}from"./UserSelect.vue_vue_type_script_setup_true_lang-DYmODzwo.js";import{V as Ye}from"./VAutocomplete-C5Dti90b.js";import{i as qe}from"./index.esm-7QB_YLGa.js";import{v as ze}from"./v4-CtRu48qb.js";import{a as C,V as z}from"./VRow-CD5Eu1Hz.js";import{V as re}from"./VTextField-DvEV70aC.js";import{V as de}from"./VTextarea-BbHc_TnC.js";import{V as Fe}from"./VForm-CcNPrL-t.js";import{V as Ne}from"./VFileInput-sOr0bu9j.js";import{V as q,d as be}from"./VBtn-BpS949DL.js";import{V as ce}from"./forwardRefs-C5Rpdz9U.js";import{V as te}from"./VContainer-DNZ1Tjea.js";import{a as oe,b as ae,c as ue,V as pe}from"./VExpansionPanels-BzjSgKjj.js";import{V as Ce,a as Ie,c as ge,d as Ee}from"./VList-C8zjtjLh.js";import{V as me}from"./scopeId-WML-naVY.js";import{h as Oe}from"./date-DgbCHIwC.js";import{V as He}from"./VSheet--2ByF3ju.js";import{a as je,d as Pe,e as Qe}from"./VTabs-JIGcACOb.js";import{V as We}from"./VToolbar-eclfyMs8.js";import{e as Ae}from"./VCard-BynEEyOy.js";import"./VDataTable-DKNe66S5.js";import"./VSelect-BZw7MWV9.js";import"./form-DOKm0nu_.js";import"./SaveButton.vue_vue_type_script_setup_true_lang-c2VzGttt.js";import"./layout-DburaH06.js";import"./VChip-3isOasPv.js";import"./VTable-CwDlnvMb.js";import"./filter-B-gXix7X.js";import"./VDivider-j7pEaUVb.js";import"./VDialog-CL7WhxWz.js";import"./createSimpleFunctional-DE7nZCO9.js";var x=(s=>(s.GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE="GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE",s.GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE="GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE",s.GENERIC_ENUM_CATEGORY_LOST_AND_FOUND_STATUS="GENERIC_ENUM_CATEGORY_LOST_AND_FOUND_STATUS",s))(x||{});const ee=[{title:"Costume Prop Clearance",value:"GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE"},{title:"Costume Prop Type",value:"GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE"},{title:"Lost and Found Status",value:"GENERIC_ENUM_CATEGORY_LOST_AND_FOUND_STATUS"}],Se=(s,A)=>s===void 0?!1:Ve(s,we.GROUP_TYPE_CONVENTION,A.ConventionUUID,A).EditProps,Le=(s,A)=>s===void 0?!1:Ve(s,we.GROUP_TYPE_CONVENTION,A.ConventionUUID,A).ConfigureProps,Re=j({__name:"GenericEnumSelect",props:Q({category:{},convention:{},label:{default:""},variant:{default:"filled"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const A=W(),U=v([]),n=H(s,"modelValue");A.getConventionGenericEnums(s.convention.ConventionUUID,s.category).then(I=>{I&&(U.value=I)});const m=ve(()=>{const I=U.value.map(g=>g).sort((g,_)=>g.Title>_.Title?1:g.Title==_.Title?0:-1);return I.unshift({ID:0,GenericEnumUUID:Y,ConventionID:0,ConventionUUID:Y,Category:s.category,Name:"",Title:`- Select ${s.label} -`,Description:""}),I});return(I,g)=>(a(),D(Ye,{label:I.label,items:m.value,"item-title":"Title","item-value":"GenericEnumUUID",variant:I.variant,"hide-details":"",modelValue:n.value,"onUpdate:modelValue":g[0]||(g[0]=_=>n.value=_)},null,8,["label","items","variant","modelValue"]))}}),Ke=["href"],he=j({__name:"CameraTether",emits:["file"],setup(s,{emit:A}){const U=W(),n=v(!0),m=_e(),I=se(),g=A,_=ze(),G=()=>{const f=m.resolve({name:"CameraView",params:{session:_}}),o=new URL(location.href);return o.pathname=f.href,o.toString()},V=()=>{n.value&&setTimeout(()=>{U.registerCameraTetherSession(_).then(f=>{f&&f.SessionUUID&&f.FileUUID?g("file",I.GetFormFileURL(f.FileUUID)):V()}).catch(f=>{console.error(f),V()})},4e3)};return V(),$e(()=>{n.value=!1}),(f,o)=>(a(),b($,null,[t(z,null,{default:e(()=>[t(C,{class:"text-center"},{default:e(()=>o[0]||(o[0]=[T("p",null," Scan the QR Code to begin the camera session. ",-1)])),_:1})]),_:1}),t(z,null,{default:e(()=>[t(C,{class:"text-center"},{default:e(()=>[t(w(qe),{value:G(),width:"200"},null,8,["value"])]),_:1})]),_:1}),t(z,null,{default:e(()=>[t(C,{class:"text-center"},{default:e(()=>[T("a",{href:G(),target:"_blank"},"Open in new tab",8,Ke)]),_:1})]),_:1})],64))}}),Je=["innerHTML"],Xe=["innerHTML"],Ze=j({__name:"EditCostumeProp",props:Q({convention:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{},costumeProp:{required:!0},costumePropModifiers:{}}),emits:Q(["new","update:costumeProp"],["update:modelValue","update:costumeProp"]),setup(s,{emit:A}){const U=H(s,"modelValue"),n=H(s,"costumeProp"),m=W(),I=se(),g=A,_=v(le(n.value)),G=v(`${I.GetCostumePropImageURL(n.value.CostumePropUUID)}?${new Date().getTime()}`),V=ie("imageFileInput"),f=ie("propImageForm"),o=v([]),i=v(!1),u=v([]);m.getConventionGenericEnums(s.convention.ConventionUUID,x.GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE).then(F=>{F&&(o.value=F)}),m.getConventionGenericEnums(s.convention.ConventionUUID,x.GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE).then(F=>{F&&(u.value=F)});const c=()=>{},O=()=>{n.value=le(_.value)},B=F=>{m.saveCostumeProp(n.value).then(d=>{d?(F&&F("Saved Costume Prop"),n.value.CostumePropUUID!=d.CostumePropUUID&&g("new",d),n.value=d,g("update:costumeProp",d),G.value?P(d.CostumePropUUID).then(()=>{setTimeout(()=>{U.value=!1},1e3)}).catch(()=>{F("Failed to Save Image")}):setTimeout(()=>{U.value=!1},1e3)):F&&F("Failed to Save Costume Prop")}).catch(()=>{F&&F("Failed to Save Costume Prop")})},M=ve(()=>!1),h=()=>{V.value&&V.value.files&&(G.value=URL.createObjectURL(V.value.files[0]))},P=async F=>{var N;const d=new FormData((N=f.value)==null?void 0:N.$el);if(d.get("Image")&&d.get("Image").size>0)return d.set("ConventionUUID",s.convention.ConventionUUID),d.set("CostumePropUUID",F),await I.SaveCostumePropImage(d)},p=F=>{if(!F)return"";let d=F;return d=d.replaceAll(`
`,"<br>"),d=d.replaceAll(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),d=d.replaceAll(/\[i](.*?)\[\/i]/g,"<em>$1</em>"),d};function S(F){i.value=!1,fetch(F).then(d=>d.blob()).then(d=>{const N=d.type.split("/")[1]||"dat",K=new File([d],`downloaded-image.${N}`,{type:d.type}),L=new DataTransfer;L.items.add(K),V.value&&(V.value.files=L.files,h())}).catch(d=>console.error("Error fetching image:",d))}return(F,d)=>(a(),D(Z,De({modelValue:U.value,"onUpdate:modelValue":d[8]||(d[8]=N=>U.value=N),title:"Add Costume Prop","show-reset-action":!1,"show-save-action":!1,"show-delete-action":!1,"show-close-action":!1,"hide-extension":!0,fullscreen:!0,persistent:!0,scrollable:!0,onReset:O,onSave:B},{[ye(M.value&&"delete")]:c}),{default:e(()=>[t(te,null,{default:e(()=>[t(z,null,{default:e(()=>[n.value.AddedBy?(a(),D(C,{key:0,cols:"12"},{default:e(()=>[T("strong",null,"Added By: "+k(n.value.AddedBy.DisplayName),1)]),_:1})):E("",!0),t(C,{cols:"12"},{default:e(()=>[t(X,{modelValue:n.value.OwnerUUID,"onUpdate:modelValue":d[0]||(d[0]=N=>n.value.OwnerUUID=N),convention:F.convention,label:"Owner",variant:"outlined","aria-required":"true",clearable:!0},null,8,["modelValue","convention"])]),_:1}),t(C,{cols:"12"},{default:e(()=>[t(Re,{modelValue:n.value.TypeUUID,"onUpdate:modelValue":d[1]||(d[1]=N=>n.value.TypeUUID=N),category:w(x).GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE,convention:F.convention,label:"Type",variant:"outlined"},null,8,["modelValue","category","convention"])]),_:1}),t(C,{cols:"12"},{default:e(()=>[t(re,{modelValue:n.value.Description,"onUpdate:modelValue":d[2]||(d[2]=N=>n.value.Description=N),label:"Description",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(C,{cols:"12"},{default:e(()=>[t(Re,{modelValue:n.value.ClearanceUUID,"onUpdate:modelValue":d[3]||(d[3]=N=>n.value.ClearanceUUID=N),category:w(x).GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE,convention:F.convention,label:"Clearance",variant:"outlined"},null,8,["modelValue","category","convention"])]),_:1}),t(C,{cols:"12"},{default:e(()=>[t(de,{modelValue:n.value.Remarks,"onUpdate:modelValue":d[4]||(d[4]=N=>n.value.Remarks=N),label:"Remarks / Information",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(C,{cols:"12"},{default:e(()=>[t(Fe,{ref:"propImageForm",enctype:"multipart/form-data"},{default:e(()=>[t(Ne,{label:"Photograph",name:"Image",variant:"outlined",ref:"imageFileInput","prepend-icon":"mdi:mdi-camera",capture:"environment",accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp",onChange:h,"hide-details":""})]),_:1})]),_:1}),t(C,{cols:"12",class:"text-center"},{default:e(()=>[t(q,{color:"primary",onClick:d[5]||(d[5]=N=>i.value=!0)},{default:e(()=>d[9]||(d[9]=[R("Use Camera on Another Device")])),_:1}),d[10]||(d[10]=T("br",null,null,-1)),d[11]||(d[11]=T("small",null,"E.g. A mobile phone",-1))]),_:1}),t(C,{cols:"12"},{default:e(()=>[G.value?(a(),D(ce,{key:0,src:G.value,class:"border profileImage my-0 mx-auto","max-height":"400","max-width":"400",cover:!1},null,8,["src"])):E("",!0)]),_:1}),n.value.ClearanceUUID!==""&&n.value.ClearanceUUID!==w(Y)?(a(),D(C,{key:1,cols:"12"},{default:e(()=>{var N,K;return[T("div",null,[T("strong",null,k((N=o.value.find(L=>L.GenericEnumUUID===n.value.ClearanceUUID))==null?void 0:N.Title),1)]),T("div",{innerHTML:p((K=o.value.find(L=>L.GenericEnumUUID===n.value.ClearanceUUID))==null?void 0:K.Description)},null,8,Je)]}),_:1})):E("",!0),n.value.TypeUUID!==""&&n.value.TypeUUID!==w(Y)?(a(),D(C,{key:2,cols:"12"},{default:e(()=>{var N;return[T("div",{innerHTML:p((N=u.value.find(K=>K.GenericEnumUUID===n.value.TypeUUID))==null?void 0:N.Description)},null,8,Xe)]}),_:1})):E("",!0)]),_:1}),t(Z,{modelValue:i.value,"onUpdate:modelValue":d[7]||(d[7]=N=>i.value=N),title:"Camera Tether","show-reset-action":!1,"show-save-action":!1,"show-delete-action":!1,"show-close-action":!1,"hide-extension":!0,scrollable:!0},{actions:e(()=>[t(q,{color:"primary",variant:"text",onClick:d[6]||(d[6]=N=>i.value=!1)},{default:e(()=>d[12]||(d[12]=[R("Close")])),_:1})]),default:e(()=>[t(he,{onFile:S})]),_:1},8,["modelValue"])]),_:1})]),_:1},16,["modelValue"]))}}),Me=j({__name:"EditGenericEnum",props:Q({convention:{},title:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{},genericEnum:{required:!0},genericEnumModifiers:{}}),emits:Q(["delete:genericEnum","new","update:genericEnum"],["update:modelValue","update:genericEnum"]),setup(s,{emit:A}){const U=H(s,"modelValue"),n=H(s,"genericEnum"),m=v(le(n.value)),I=W(),g=A,_=v([]),G=v([]),V=u=>{I.deleteGenericEnum(m.value.GenericEnumUUID).then(c=>{var O,B;c?(u&&u(`Deleted ${(O=ee.find(M=>M.value==m.value.Category))==null?void 0:O.title}`),g("delete:genericEnum",m.value),setTimeout(()=>{U.value=!1},1e3)):u&&u(`Failed to Delete ${(B=ee.find(M=>M.value==m.value.Category))==null?void 0:B.title}`)}).catch(()=>{var c;u&&u(`Failed to Delete ${(c=ee.find(O=>O.value==m.value.Category))==null?void 0:c.title}`)})},f=ve(()=>m.value.GenericEnumUUID!=Y),o=u=>{I.saveGenericEnum(m.value).then(c=>{var O,B;c?(u&&u(`Saved ${(O=ee.find(M=>M.value==m.value.Category))==null?void 0:O.title}`),g("update:genericEnum",c),setTimeout(()=>{U.value=!1},1e3)):u&&u(`Failed to Save ${(B=ee.find(M=>M.value==m.value.Category))==null?void 0:B.title}`)}).catch(()=>{var c;u&&u(`Failed to Save ${(c=ee.find(O=>O.value==m.value.Category))==null?void 0:c.title}`)})},i=()=>{m.value=le(n.value)};return I.getConventionGenericEnums(s.convention.ConventionUUID,x.GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE).then(u=>{u&&(_.value=u)}).catch(()=>{}),I.getConventionGenericEnums(s.convention.ConventionUUID,x.GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE).then(u=>{u&&(G.value=u)}).catch(()=>{}),(u,c)=>(a(),D(Z,De({modelValue:U.value,"onUpdate:modelValue":c[3]||(c[3]=O=>U.value=O),title:u.title,"show-reset-action":!1,"show-save-action":!0,"show-delete-action":!1,"show-close-action":!0,"hide-extension":!0,fullscreen:!1,persistent:!0,scrollable:!0,onReset:i,onSave:o},{[ye(f.value&&"delete")]:V}),{default:e(()=>[t(te,null,{default:e(()=>[t(z,null,{default:e(()=>[t(C,{cols:"12"},{default:e(()=>[t(re,{modelValue:m.value.Name,"onUpdate:modelValue":c[0]||(c[0]=O=>m.value.Name=O),label:"Internal Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(C,{cols:"12"},{default:e(()=>[t(re,{modelValue:m.value.Title,"onUpdate:modelValue":c[1]||(c[1]=O=>m.value.Title=O),label:"Display Title",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(C,{cols:"12"},{default:e(()=>[t(de,{modelValue:m.value.Description,"onUpdate:modelValue":c[2]||(c[2]=O=>m.value.Description=O),label:"Description",variant:"outlined"},null,8,["modelValue"]),c[4]||(c[4]=T("br",null,null,-1)),c[5]||(c[5]=T("p",null,[T("strong",null,"Description Formatting Guidance")],-1)),c[6]||(c[6]=T("dl",null,[T("dt",{class:"float-left mr-2"}," ** "),T("dd",null,[R(" Surround text with double asterisk to make text bold. E.g. **this is bold** = "),T("strong",null,"this is bold")]),T("dt",{class:"float-left mr-2"}," [i] "),T("dd",null,[R(" Surround text with [i] and [/i] to make text italic. E.g. [i]italic emphasis[/i] = "),T("em",null,"italic emphasis")])],-1))]),_:1})]),_:1})]),_:1})]),_:1},16,["modelValue","title"]))}}),et=j({__name:"ConfigCostumeProps",props:Q({convention:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const A=H(s,"modelValue"),U=W(),n=v(),m=v([]),I=v(!1),g=v([]),_=o=>{const i=()=>({ID:0,GenericEnumUUID:Y,ConventionID:s.convention.ID,ConventionUUID:s.convention.ConventionUUID,Category:o,Name:"",Title:"",Description:""});n.value=i(),I.value=!0},G=o=>{n.value=o,I.value=!0},V=o=>{let i;switch(o.Category){case x.GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE:i=m.value.findIndex(u=>u.GenericEnumUUID==o.GenericEnumUUID),i>=0&&m.value.splice(i,1);break;case x.GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE:i=g.value.findIndex(u=>u.GenericEnumUUID==o.GenericEnumUUID),i>=0&&g.value.splice(i,1);break}},f=o=>{let i;switch(o.Category){case x.GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE:i=m.value.findIndex(u=>u.GenericEnumUUID==o.GenericEnumUUID),i>=0?m.value.splice(i,1,o):m.value.push(n.value);break;case x.GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE:i=g.value.findIndex(u=>u.GenericEnumUUID==o.GenericEnumUUID),i>=0?g.value.splice(i,1,o):g.value.push(n.value);break}};return U.getConventionGenericEnums(s.convention.ConventionUUID,x.GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE).then(o=>{o&&(m.value=o)}),U.getConventionGenericEnums(s.convention.ConventionUUID,x.GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE).then(o=>{o&&(g.value=o)}),(o,i)=>(a(),D(Z,{modelValue:A.value,"onUpdate:modelValue":i[4]||(i[4]=u=>A.value=u),title:"Configure Costume Props","show-reset-action":!1,"show-save-action":!1,"show-delete-action":!1,"show-close-action":!0,"hide-extension":!0,fullscreen:!0,persistent:!0,scrollable:!0},{default:e(()=>{var u;return[t(pe,null,{default:e(()=>[t(oe,null,{default:e(()=>[t(ae,{color:"primary"},{default:e(()=>i[5]||(i[5]=[R(" Clearance Options ")])),_:1}),t(ue,null,{default:e(()=>[t(Ce,null,{default:e(()=>[(a(!0),b($,null,Ue(m.value,c=>(a(),D(Ie,{key:c.GenericEnumUUID},{append:e(()=>[t(q,{icon:"mdi:mdi-pencil-outline",color:"warning",size:"x-small",onClick:O=>G(c)},null,8,["onClick"])]),default:e(()=>[t(ge,null,{default:e(()=>[T("strong",null,k(c.Name)+" - "+k(c.Title),1)]),_:2},1024),t(Ee,null,{default:e(()=>[R(k(c.Description),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(z,null,{default:e(()=>[t(C,{class:"text-right"},{default:e(()=>[t(q,{color:"success","prepend-icon":"mdi:mdi-plus",onClick:i[0]||(i[0]=c=>_(w(x).GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE))},{default:e(()=>i[6]||(i[6]=[R(" Add Item ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(oe,null,{default:e(()=>[t(ae,{color:"primary"},{default:e(()=>i[7]||(i[7]=[R(" Item Types ")])),_:1}),t(ue,null,{default:e(()=>[t(Ce,null,{default:e(()=>[(a(!0),b($,null,Ue(g.value,c=>(a(),D(Ie,{key:c.GenericEnumUUID},{append:e(()=>[t(q,{icon:"mdi:mdi-pencil-outline",color:"warning",size:"x-small",onClick:O=>G(c)},null,8,["onClick"])]),default:e(()=>[t(ge,null,{default:e(()=>[T("strong",null,k(c.Name)+" - "+k(c.Title),1)]),_:2},1024),t(Ee,null,{default:e(()=>[R(k(c.Description),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(z,null,{default:e(()=>[t(C,{class:"text-right"},{default:e(()=>[t(q,{color:"success","prepend-icon":"mdi:mdi-plus",onClick:i[1]||(i[1]=c=>_(w(x).GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE))},{default:e(()=>i[8]||(i[8]=[R(" Add Item ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),I.value&&n.value?(a(),D(Me,{key:0,convention:o.convention,title:`Edit ${(u=w(ee).find(c=>{var O;return c.value==((O=n.value)==null?void 0:O.Category)}))==null?void 0:u.title}`,modelValue:I.value,"onUpdate:modelValue":i[2]||(i[2]=c=>I.value=c),"generic-enum":n.value,"onUpdate:genericEnum":[i[3]||(i[3]=c=>n.value=c),f],"onDelete:genericEnum":V},null,8,["convention","title","modelValue","generic-enum"])):E("",!0)]}),_:1},8,["modelValue"]))}}),tt=["href"],nt=["innerHTML"],lt=["innerHTML"],ot=j({__name:"ViewCostumeProp",props:Q({convention:{},title:{default:"View Costume Prop"}},{modelValue:{type:Boolean,required:!0},modelModifiers:{},costumeProp:{required:!0},costumePropModifiers:{}}),emits:["update:modelValue","update:costumeProp"],setup(s){const A=H(s,"modelValue"),U=H(s,"costumeProp"),n=W(),m=se(),I=v(`${m.GetCostumePropImageURL(U.value.CostumePropUUID)}?${new Date().getTime()}`),g=v([]),_=v([]);n.getConventionGenericEnums(s.convention.ConventionUUID,x.GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE).then(V=>{V&&(g.value=V)}),n.getConventionGenericEnums(s.convention.ConventionUUID,x.GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE).then(V=>{V&&(_.value=V)});const G=V=>{if(!V)return"";let f=V;return f=f.replaceAll(`
`,"<br>"),f=f.replaceAll(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),f=f.replaceAll(/\[i](.*?)\[\/i]/g,"<em>$1</em>"),f};return(V,f)=>(a(),D(Z,{modelValue:A.value,"onUpdate:modelValue":f[0]||(f[0]=o=>A.value=o),title:V.title,"show-reset-action":!1,"show-save-action":!1,"show-delete-action":!1,"show-close-action":!1,"hide-extension":!0,fullscreen:!1,persistent:!1,scrollable:!0},{default:e(()=>[t(te,null,{default:e(()=>[t(z,null,{default:e(()=>[t(C,{cols:"12"},{default:e(()=>[I.value?(a(),b("a",{key:0,href:I.value,target:"_blank",style:{cursor:"zoom-in"}},[t(ce,{src:I.value,class:"border my-0 mx-auto","max-height":"400","max-width":"400",cover:!1},null,8,["src"])],8,tt)):E("",!0)]),_:1}),t(C,{cols:"12"},{default:e(()=>[R(k(U.value.Remarks),1)]),_:1}),U.value.AddedBy?(a(),D(C,{key:0,class:"text-right",cols:"12"},{default:e(()=>[T("small",null,"Added By: "+k(U.value.AddedBy.DisplayName),1)]),_:1})):E("",!0),U.value.ClearanceUUID!==""&&U.value.ClearanceUUID!==w(Y)?(a(),D(C,{key:1,cols:"12"},{default:e(()=>{var o,i;return[T("div",null,[T("strong",null,k((o=g.value.find(u=>u.GenericEnumUUID===U.value.ClearanceUUID))==null?void 0:o.Title),1)]),T("div",{innerHTML:G((i=g.value.find(u=>u.GenericEnumUUID===U.value.ClearanceUUID))==null?void 0:i.Description)},null,8,nt)]}),_:1})):E("",!0),U.value.TypeUUID!==""&&U.value.TypeUUID!==w(Y)?(a(),D(C,{key:2,cols:"12"},{default:e(()=>{var o;return[T("div",{innerHTML:G((o=_.value.find(i=>i.GenericEnumUUID===U.value.TypeUUID))==null?void 0:o.Description)},null,8,lt)]}),_:1})):E("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue","title"]))}}),xe=(s,A)=>s===void 0?!1:Ve(s,we.GROUP_TYPE_CONVENTION,A.ConventionUUID,A).ViewProps,at=j({__name:"CostumePropsView",props:{convention:{}},setup(s){const A=W(),U=Te(),n=v(),m=v([]),I=v(1),g=v([]),_=v(!0),G=v(10),V=v(0),f=v([]),o=v(""),i=v(xe(U,s.convention)),u=v(Se(U,s.convention)),c=v(Le(U,s.convention)),O=v(!1),B=v(!1),M=v(!1),h=v({}),P=Ge(()=>{o.value=Date.now().toString()}),p=()=>{n.value={ID:0,CostumePropUUID:Y,ConventionID:s.convention.ID,ConventionUUID:s.convention.ConventionUUID,Description:"",HasPhoto:!1,Remarks:""},O.value=!0},S=r=>{n.value=r,O.value=!0},F=r=>{n.value=r,M.value=!0},d=()=>{B.value=!0},N=v([{key:"owner",title:"Attendee",sortable:!1},{key:"type",title:"Type",sortable:!1},{key:"Clearance.Title",title:"Clearance",sortable:!1},{key:"actions",title:"",sortable:!1}]),K=({page:r,itemsPerPage:l,sortBy:y})=>{_.value=!0,I.value=r,g.value=y;try{h.value.Limit=l,h.value.Offset=(r-1)*l;const J=o.value;A.searchConventionCostumeProps(s.convention.ConventionUUID,h.value).then(fe=>{fe&&J===o.value&&(V.value=fe.Total,m.value=fe.CostumeProps,_.value=!1)})}catch(J){console.error(J)}},L=r=>{const l=m.value.findIndex(y=>r.CostumePropUUID==y.CostumePropUUID);l>=0&&m.value.splice(l,1,r)};return(r,l)=>r.convention?(a(),b($,{key:0},[t(te,{fluid:!0,class:"px-1"},{default:e(()=>[u.value||c.value?(a(),D(z,{key:0},{default:e(()=>[c.value?(a(),D(C,{key:0,class:"flex-shrink-1 flex-grow-0"},{default:e(()=>[t(q,{color:"primary","prepend-icon":"mdi:mdi-cog",onClick:d},{default:e(()=>l[12]||(l[12]=[R(" Config ")])),_:1})]),_:1})):E("",!0),t(me),u.value?(a(),D(C,{key:1,class:"flex-shrink-1 flex-grow-0"},{default:e(()=>[t(q,{color:"success","prepend-icon":"mdi:mdi-plus",onClick:p},{default:e(()=>l[13]||(l[13]=[R(" Record New Item ")])),_:1})]),_:1})):E("",!0)]),_:1})):E("",!0)]),_:1}),i.value||u.value?(a(),D(ke,{key:0,page:I.value,"onUpdate:page":l[4]||(l[4]=y=>I.value=y),"items-per-page":G.value,"onUpdate:itemsPerPage":l[5]||(l[5]=y=>G.value=y),"sort-by":f.value,"onUpdate:sortBy":l[6]||(l[6]=y=>f.value=y),headers:N.value,"items-length":V.value,items:m.value,"item-value":"key",loading:_.value,search:o.value,"onUpdate:options":K},{top:e(()=>[t(pe,{class:"mb-3"},{default:e(()=>[t(oe,null,{default:e(()=>[t(ae,{color:"secondary",class:"font-weight-bold pb-0 pt-0"},{default:e(()=>[t(C,{class:"pa-0"},{default:e(()=>[l[14]||(l[14]=R(" Search Criteria ")),t(be,{class:"pl-5",icon:"mdi:mdi-credit-card-search-outline"})]),_:1}),t(C,{class:"d-none d-sm-block pa-0",cols:"0"},{default:e(()=>[t(X,{convention:r.convention,label:"Owner",clearable:!0,"hide-details":"",variant:"plain",modelValue:h.value.OwnerUUID,"onUpdate:modelValue":[l[0]||(l[0]=y=>h.value.OwnerUUID=y),w(P)],onClick:l[1]||(l[1]=ne(()=>{},["stop"])),"onClick:clear":w(P),onInput:w(P)},null,8,["convention","modelValue","onClick:clear","onInput","onUpdate:modelValue"])]),_:1}),t(me),t(C,{class:"d-none d-md-block pa-0"})]),_:1}),t(ue,{class:"pt-2"},{default:e(()=>[t(z,null,{default:e(()=>[t(C,{cols:"12",lg:"6"},{default:e(()=>[t(X,{convention:r.convention,label:"Owner",clearable:!0,"hide-details":"",variant:"outlined",modelValue:h.value.OwnerUUID,"onUpdate:modelValue":[l[2]||(l[2]=y=>h.value.OwnerUUID=y),w(P)],onClick:l[3]||(l[3]=ne(()=>{},["stop"])),"onClick:clear":w(P),onInput:w(P)},null,8,["convention","modelValue","onClick:clear","onInput","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),"item.owner":e(({item:y})=>[y.Owner?(a(),b($,{key:0},[y.Owner.Registrations&&y.Owner.Registrations.length>0?(a(),b($,{key:0},[R(" #"+k(y.Owner.Registrations[0].Reference),1)],64)):E("",!0),y.Owner.Generated&&y.Owner.Generated.badge_name?(a(),b($,{key:1},[R("  "+k(y.Owner.Generated.badge_name),1)],64)):(a(),b($,{key:2},[R("  "+k(y.Owner.DisplayName),1)],64))],64)):E("",!0)]),"item.type":e(({item:y})=>[y.Type?(a(),b($,{key:0},[R(k(y.Type.Title)+" ",1),l[15]||(l[15]=T("br",null,null,-1))],64)):E("",!0),T("small",null,k(y.Description),1)]),"item.actions":e(({item:y})=>[i.value?(a(),D(q,{key:0,icon:"mdi:mdi-magnify",size:"x-small",color:"success",onClick:J=>F(y),class:"mr-2"},null,8,["onClick"])):E("",!0),u.value?(a(),D(q,{key:1,icon:"mdi:mdi-pencil",size:"x-small",color:"warning",onClick:J=>S(y)},null,8,["onClick"])):E("",!0)]),_:1},8,["page","items-per-page","sort-by","headers","items-length","items","loading","search"])):E("",!0),O.value&&n.value?(a(),D(Ze,{key:1,convention:r.convention,modelValue:O.value,"onUpdate:modelValue":l[7]||(l[7]=y=>O.value=y),"costume-prop":n.value,"onUpdate:costumeProp":[l[8]||(l[8]=y=>n.value=y),L],onNew:w(P)},null,8,["convention","modelValue","costume-prop","onNew"])):E("",!0),M.value&&n.value?(a(),D(ot,{key:2,convention:r.convention,title:n.value.Description,modelValue:M.value,"onUpdate:modelValue":l[9]||(l[9]=y=>M.value=y),"costume-prop":n.value,"onUpdate:costumeProp":l[10]||(l[10]=y=>n.value=y)},null,8,["convention","title","modelValue","costume-prop"])):E("",!0),B.value?(a(),D(et,{key:3,convention:r.convention,modelValue:B.value,"onUpdate:modelValue":l[11]||(l[11]=y=>B.value=y)},null,8,["convention","modelValue"])):E("",!0)],64)):E("",!0)}}),ut={key:0,class:"text-success"},st={key:1,class:"text-warning"},it={key:2,class:"text-error"},rt={key:3,class:"text-error"},dt=j({__name:"EditLostAndFound",props:Q({convention:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{},lostAndFound:{required:!0},lostAndFoundModifiers:{}}),emits:Q(["new","update:lostAndFound"],["update:modelValue","update:lostAndFound"]),setup(s,{emit:A}){const U=H(s,"modelValue"),n=H(s,"lostAndFound"),m=W(),I=se(),g=A,_=v(le(n.value)),G=v(`${I.GetLostAndFoundImageURL(n.value.LostAndFoundUUID)}?${new Date().getTime()}`),V=ie("imageFileInput"),f=ie("propImageForm"),o=v(!1),i=()=>{},u=()=>{n.value=le(_.value)},c=P=>{m.saveLostAndFound(n.value).then(p=>{p?(P&&P("Saved Costume Prop"),n.value.LostAndFoundUUID!=p.LostAndFoundUUID&&g("new",p),n.value=p,g("update:lostAndFound",p),G.value?M(p.LostAndFoundUUID).then(()=>{setTimeout(()=>{U.value=!1},1e3)}).catch(()=>{P("Failed to Save Image")}):setTimeout(()=>{U.value=!1},1e3)):P&&P("Failed to Save Costume Prop")}).catch(()=>{P&&P("Failed to Save Costume Prop")})},O=ve(()=>!1),B=()=>{V.value&&V.value.files&&(G.value=URL.createObjectURL(V.value.files[0]))},M=async P=>{var S;const p=new FormData((S=f.value)==null?void 0:S.$el);if(p.get("Image")&&p.get("Image").size>0)return p.set("ConventionUUID",s.convention.ConventionUUID),p.set("LostAndFoundUUID",P),await I.SaveLostAndFoundImage(p)};function h(P){o.value=!1,fetch(P).then(p=>p.blob()).then(p=>{const S=p.type.split("/")[1]||"dat",F=new File([p],`downloaded-image.${S}`,{type:p.type}),d=new DataTransfer;d.items.add(F),V.value&&(V.value.files=d.files,B())}).catch(p=>console.error("Error fetching image:",p))}return(P,p)=>(a(),D(Z,De({modelValue:U.value,"onUpdate:modelValue":p[8]||(p[8]=S=>U.value=S),title:"Report Lost & Found","show-reset-action":!1,"show-save-action":!1,"show-delete-action":!1,"show-close-action":!1,"hide-extension":!0,fullscreen:!0,persistent:!0,scrollable:!0,onReset:u,onSave:c},{[ye(O.value&&"delete")]:i}),{default:e(()=>[t(te,null,{default:e(()=>[t(z,null,{default:e(()=>[n.value.AddedBy?(a(),D(C,{key:0,cols:"12"},{default:e(()=>[p[9]||(p[9]=T("strong",null,"Added By:",-1)),R(" "+k(n.value.AddedBy.DisplayName),1)]),_:1})):E("",!0),n.value.AddedBy?(a(),D(C,{key:1,cols:"12"},{default:e(()=>[p[10]||(p[10]=T("strong",null,"Status:",-1)),n.value.FoundByUUID&&n.value.OwnerUUID&&n.value.FoundByUUID!==w(Y)&&n.value.OwnerUUID!==w(Y)?(a(),b("span",ut," Returned ")):n.value.FoundByUUID&&n.value.FoundByUUID!==w(Y)?(a(),b("span",st," Found ")):n.value.OwnerUUID&&n.value.OwnerUUID!==w(Y)?(a(),b("span",it," Lost ")):(a(),b("span",rt," Unknown "))]),_:1})):E("",!0),t(C,{cols:"12"},{default:e(()=>[t(X,{modelValue:n.value.FoundByUUID,"onUpdate:modelValue":p[0]||(p[0]=S=>n.value.FoundByUUID=S),convention:P.convention,label:"Found By",variant:"outlined","persistent-hint":!0,hint:"If unknown enter yourself",clearable:!0},null,8,["modelValue","convention"])]),_:1}),t(C,{cols:"12"},{default:e(()=>[t(X,{modelValue:n.value.OwnerUUID,"onUpdate:modelValue":p[1]||(p[1]=S=>n.value.OwnerUUID=S),convention:P.convention,label:"Claimant (Owner)",variant:"outlined","persistent-hint":!0,hint:"The person either reporting item missing or claiming it",clearable:!0},null,8,["modelValue","convention"])]),_:1}),t(C,{cols:"12"},{default:e(()=>[t(re,{modelValue:n.value.Title,"onUpdate:modelValue":p[2]||(p[2]=S=>n.value.Title=S),label:"Title",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(C,{cols:"12"},{default:e(()=>[t(de,{modelValue:n.value.Description,"onUpdate:modelValue":p[3]||(p[3]=S=>n.value.Description=S),label:"Description",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(C,{cols:"12"},{default:e(()=>[t(de,{modelValue:n.value.Comments,"onUpdate:modelValue":p[4]||(p[4]=S=>n.value.Comments=S),label:"Comments",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(C,{cols:"12"},{default:e(()=>[t(Fe,{ref:"propImageForm",enctype:"multipart/form-data"},{default:e(()=>[t(Ne,{label:"Photograph",name:"Image",variant:"outlined",ref:"imageFileInput","prepend-icon":"mdi:mdi-camera",capture:"environment",accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp",onChange:B})]),_:1})]),_:1}),t(C,{cols:"12",class:"text-center"},{default:e(()=>[t(q,{color:"primary",onClick:p[5]||(p[5]=S=>o.value=!0)},{default:e(()=>p[11]||(p[11]=[R("Use Camera on Another Device")])),_:1}),p[12]||(p[12]=T("br",null,null,-1)),p[13]||(p[13]=T("small",null,"E.g. A mobile phone",-1))]),_:1}),t(C,{cols:"12"},{default:e(()=>[G.value?(a(),D(ce,{key:0,src:G.value,class:"border profileImage my-0 mx-auto","max-height":"400","max-width":"400",cover:!1},null,8,["src"])):E("",!0)]),_:1})]),_:1}),t(Z,{modelValue:o.value,"onUpdate:modelValue":p[7]||(p[7]=S=>o.value=S),title:"Camera Tether","show-reset-action":!1,"show-save-action":!1,"show-delete-action":!1,"show-close-action":!1,"hide-extension":!0,scrollable:!0},{actions:e(()=>[t(q,{color:"primary",variant:"text",onClick:p[6]||(p[6]=S=>o.value=!1)},{default:e(()=>p[14]||(p[14]=[R("Close")])),_:1})]),default:e(()=>[t(he,{onFile:h})]),_:1},8,["modelValue"])]),_:1})]),_:1},16,["modelValue"]))}}),mt=j({__name:"ConfigLostAndFound",props:Q({convention:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const A=H(s,"modelValue"),U=W(),n=v(),m=v([]),I=v(!1),g=f=>{const o=()=>({ID:0,GenericEnumUUID:Y,ConventionID:s.convention.ID,ConventionUUID:s.convention.ConventionUUID,Category:f,Name:"",Title:"",Description:""});n.value=o(),I.value=!0},_=f=>{n.value=f,I.value=!0},G=f=>{let o;switch(f.Category){case x.GENERIC_ENUM_CATEGORY_LOST_AND_FOUND_STATUS:o=m.value.findIndex(i=>i.GenericEnumUUID==f.GenericEnumUUID),o>=0&&m.value.splice(o,1);break}},V=f=>{let o;switch(f.Category){case x.GENERIC_ENUM_CATEGORY_LOST_AND_FOUND_STATUS:o=m.value.findIndex(i=>i.GenericEnumUUID==f.GenericEnumUUID),o>=0?m.value.splice(o,1,f):m.value.push(n.value);break}};return U.getConventionGenericEnums(s.convention.ConventionUUID,x.GENERIC_ENUM_CATEGORY_LOST_AND_FOUND_STATUS).then(f=>{f&&(m.value=f)}),(f,o)=>(a(),D(Z,{modelValue:A.value,"onUpdate:modelValue":o[3]||(o[3]=i=>A.value=i),title:"Configure Costume Props","show-reset-action":!1,"show-save-action":!1,"show-delete-action":!1,"show-close-action":!0,"hide-extension":!0,fullscreen:!0,persistent:!0,scrollable:!0},{default:e(()=>{var i;return[t(pe,null,{default:e(()=>[t(oe,null,{default:e(()=>[t(ae,{color:"primary"},{default:e(()=>o[4]||(o[4]=[R(" Item Status ")])),_:1}),t(ue,null,{default:e(()=>[t(Ce,null,{default:e(()=>[(a(!0),b($,null,Ue(m.value,u=>(a(),D(Ie,{key:u.GenericEnumUUID},{append:e(()=>[t(q,{icon:"mdi:mdi-pencil-outline",color:"warning",size:"x-small",onClick:c=>_(u)},null,8,["onClick"])]),default:e(()=>[t(ge,null,{default:e(()=>[T("strong",null,k(u.Name)+" - "+k(u.Title),1)]),_:2},1024),t(Ee,null,{default:e(()=>[R(k(u.Description),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(z,null,{default:e(()=>[t(C,{class:"text-right"},{default:e(()=>[t(q,{color:"success","prepend-icon":"mdi:mdi-plus",onClick:o[0]||(o[0]=u=>g(w(x).GENERIC_ENUM_CATEGORY_LOST_AND_FOUND_STATUS))},{default:e(()=>o[5]||(o[5]=[R(" Add Item ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),I.value&&n.value?(a(),D(Me,{key:0,convention:f.convention,title:`Edit ${(i=w(ee).find(u=>{var c;return u.value==((c=n.value)==null?void 0:c.Category)}))==null?void 0:i.title}`,modelValue:I.value,"onUpdate:modelValue":o[1]||(o[1]=u=>I.value=u),"generic-enum":n.value,"onUpdate:genericEnum":[o[2]||(o[2]=u=>n.value=u),V],"onDelete:genericEnum":G},null,8,["convention","title","modelValue","generic-enum"])):E("",!0)]}),_:1},8,["modelValue"]))}}),vt=["href"],ct=j({__name:"ViewLostAndFound",props:Q({title:{default:"View Costume Prop"}},{modelValue:{type:Boolean,required:!0},modelModifiers:{},lostAndFound:{required:!0},lostAndFoundModifiers:{}}),emits:["update:modelValue","update:lostAndFound"],setup(s){const A=H(s,"modelValue"),U=H(s,"lostAndFound"),n=se(),m=v(`${n.GetLostAndFoundImageURL(U.value.LostAndFoundUUID)}?${new Date().getTime()}`);return(I,g)=>(a(),D(Z,{modelValue:A.value,"onUpdate:modelValue":g[0]||(g[0]=_=>A.value=_),title:I.title,"show-reset-action":!1,"show-save-action":!1,"show-delete-action":!1,"show-close-action":!1,"hide-extension":!0,fullscreen:!1,persistent:!1,scrollable:!0},{default:e(()=>[t(te,null,{default:e(()=>[t(z,null,{default:e(()=>[t(C,{cols:"12"},{default:e(()=>[m.value?(a(),b("a",{key:0,href:m.value,target:"_blank",style:{cursor:"zoom-in"}},[t(ce,{src:m.value,class:"border my-0 mx-auto","max-height":"400","max-width":"400",cover:!1},null,8,["src"])],8,vt)):E("",!0)]),_:1}),t(C,{cols:"12"},{default:e(()=>[R(k(U.value.Description),1)]),_:1}),t(C,{cols:"12"},{default:e(()=>[R(k(U.value.Comments),1)]),_:1}),U.value.AddedBy?(a(),D(C,{key:0,class:"text-right",cols:"12"},{default:e(()=>[T("small",null,"Added By: "+k(U.value.AddedBy.DisplayName),1)]),_:1})):E("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue","title"]))}}),pt={key:0,class:"text-success"},ft={key:1,class:"text-warning"},Ut={key:2,class:"text-error"},Ct={key:3,class:"text-error"},It=j({__name:"LostAndFoundView",props:{convention:{}},setup(s){const A=W(),U=Te(),n=v(),m=v([]),I=v(1),g=v([]),_=v(!0),G=v(10),V=v(0),f=v([]),o=v(""),i=v(xe(U,s.convention)),u=v(Se(U,s.convention)),c=v(Le(U,s.convention)),O=v(!1),B=v(!1),M=v(!1),h=v({}),P=Ge(()=>{o.value=Date.now().toString()}),p=()=>{n.value={ID:0,LostAndFoundUUID:Y,ConventionID:s.convention.ID,ConventionUUID:s.convention.ConventionUUID,Title:"",Description:"",HasPhoto:!1,Comments:""},O.value=!0},S=L=>{n.value=L,O.value=!0},F=L=>{n.value=L,M.value=!0},d=v([{key:"owner",title:"Owner",sortable:!1},{key:"finder",title:"Found By",sortable:!1},{key:"title",title:"Title",sortable:!1},{key:"status",title:"Status",sortable:!1},{key:"timestamps",title:"Date",sortable:!1},{key:"actions",title:"",sortable:!1}]),N=({page:L,itemsPerPage:r,sortBy:l})=>{_.value=!0,I.value=L,g.value=l;try{h.value.Limit=r,h.value.Offset=(L-1)*r;const y=o.value;A.searchConventionLostAndFound(s.convention.ConventionUUID,h.value).then(J=>{J&&y===o.value&&(V.value=J.Total,m.value=J.LostAndFound,_.value=!1)})}catch(y){console.error(y)}},K=L=>{const r=m.value.findIndex(l=>L.LostAndFoundUUID==l.LostAndFoundUUID);r>=0&&m.value.splice(r,1,L)};return(L,r)=>L.convention?(a(),b($,{key:0},[t(te,{fluid:!0,class:"px-1"},{default:e(()=>[u.value||c.value?(a(),D(z,{key:0},{default:e(()=>[t(me),u.value?(a(),D(C,{key:0,class:"flex-shrink-1 flex-grow-0"},{default:e(()=>[t(q,{color:"success","prepend-icon":"mdi:mdi-plus",onClick:p},{default:e(()=>r[16]||(r[16]=[R(" Record New Item ")])),_:1})]),_:1})):E("",!0)]),_:1})):E("",!0)]),_:1}),i.value||u.value?(a(),D(ke,{key:0,page:I.value,"onUpdate:page":r[8]||(r[8]=l=>I.value=l),"items-per-page":G.value,"onUpdate:itemsPerPage":r[9]||(r[9]=l=>G.value=l),"sort-by":f.value,"onUpdate:sortBy":r[10]||(r[10]=l=>f.value=l),headers:d.value,"items-length":V.value,items:m.value,"item-value":"key",loading:_.value,search:o.value,"onUpdate:options":N},{top:e(()=>[t(pe,{class:"mb-3"},{default:e(()=>[t(oe,null,{default:e(()=>[t(ae,{color:"secondary",class:"font-weight-bold pb-0 pt-0"},{default:e(()=>[t(C,{class:"pa-0"},{default:e(()=>[r[17]||(r[17]=R(" Search Criteria ")),t(be,{class:"pl-5",icon:"mdi:mdi-credit-card-search-outline"})]),_:1}),t(C,{class:"d-none d-sm-block pa-0 pr-4",cols:"0"},{default:e(()=>[t(X,{convention:L.convention,label:"Owner",clearable:!0,"hide-details":"",variant:"plain",modelValue:h.value.OwnerUUID,"onUpdate:modelValue":[r[0]||(r[0]=l=>h.value.OwnerUUID=l),w(P)],onClick:r[1]||(r[1]=ne(()=>{},["stop"])),"onClick:clear":w(P),onInput:w(P)},null,8,["convention","modelValue","onClick:clear","onInput","onUpdate:modelValue"])]),_:1}),t(C,{class:"d-none d-sm-block pa-0 pr-4",cols:"0"},{default:e(()=>[t(X,{convention:L.convention,label:"Finder",clearable:!0,"hide-details":"",variant:"plain",modelValue:h.value.FoundByUUID,"onUpdate:modelValue":[r[2]||(r[2]=l=>h.value.FoundByUUID=l),w(P)],onClick:r[3]||(r[3]=ne(()=>{},["stop"])),"onClick:clear":w(P),onInput:w(P)},null,8,["convention","modelValue","onClick:clear","onInput","onUpdate:modelValue"])]),_:1}),t(me),t(C,{class:"d-none d-md-block pa-0"})]),_:1}),t(ue,{class:"pt-2"},{default:e(()=>[t(z,null,{default:e(()=>[t(C,{cols:"12",lg:"6"},{default:e(()=>[t(X,{convention:L.convention,label:"Owner",clearable:!0,"hide-details":"",variant:"outlined",modelValue:h.value.OwnerUUID,"onUpdate:modelValue":[r[4]||(r[4]=l=>h.value.OwnerUUID=l),w(P)],onClick:r[5]||(r[5]=ne(()=>{},["stop"])),"onClick:clear":w(P),onInput:w(P)},null,8,["convention","modelValue","onClick:clear","onInput","onUpdate:modelValue"])]),_:1}),t(C,{cols:"12",lg:"6"},{default:e(()=>[t(X,{convention:L.convention,label:"Finder",clearable:!0,"hide-details":"",variant:"outlined",modelValue:h.value.FoundByUUID,"onUpdate:modelValue":[r[6]||(r[6]=l=>h.value.FoundByUUID=l),w(P)],onClick:r[7]||(r[7]=ne(()=>{},["stop"])),"onClick:clear":w(P),onInput:w(P)},null,8,["convention","modelValue","onClick:clear","onInput","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),"item.finder":e(({item:l})=>[l.FoundBy?(a(),b($,{key:0},[l.FoundBy.Registrations&&l.FoundBy.Registrations.length>0?(a(),b($,{key:0},[R(" #"+k(l.FoundBy.Registrations[0].Reference),1)],64)):E("",!0),l.FoundBy.Generated&&l.FoundBy.Generated.badge_name?(a(),b($,{key:1},[R("  "+k(l.FoundBy.Generated.badge_name),1)],64)):(a(),b($,{key:2},[R("  "+k(l.FoundBy.DisplayName),1)],64))],64)):E("",!0)]),"item.owner":e(({item:l})=>[l.Owner?(a(),b($,{key:0},[l.Owner.Registrations&&l.Owner.Registrations.length>0?(a(),b($,{key:0},[R(" #"+k(l.Owner.Registrations[0].Reference),1)],64)):E("",!0),l.Owner.Generated&&l.Owner.Generated.badge_name?(a(),b($,{key:1},[R("  "+k(l.Owner.Generated.badge_name),1)],64)):(a(),b($,{key:2},[R("  "+k(l.Owner.DisplayName),1)],64))],64)):E("",!0)]),"item.timestamps":e(({item:l})=>[r[20]||(r[20]=T("strong",null,"Reported:",-1)),R(" "+k(w(Oe)(l.CreatedAt,{withTime:!0,withYear:!0}))+" ",1),l.UpdatedAt!=l.CreatedAt?(a(),b($,{key:0},[r[18]||(r[18]=T("br",null,null,-1)),r[19]||(r[19]=T("strong",null,"Updated:",-1)),R(" "+k(w(Oe)(l.UpdatedAt,{withTime:!0,withYear:!0})),1)],64)):E("",!0)]),"item.title":e(({item:l})=>[T("strong",null,k(l.Title),1),r[21]||(r[21]=T("br",null,null,-1)),T("small",null,k(l.Description),1)]),"item.status":e(({item:l})=>[l.FoundByUUID&&l.OwnerUUID&&l.FoundByUUID!==w(Y)&&l.OwnerUUID!==w(Y)?(a(),b("span",pt," Returned ")):l.FoundByUUID&&l.FoundByUUID!==w(Y)?(a(),b("span",ft," Found ")):l.OwnerUUID&&l.OwnerUUID!==w(Y)?(a(),b("span",Ut," Lost ")):(a(),b("span",Ct," Unknown "))]),"item.actions":e(({item:l})=>[i.value?(a(),D(q,{key:0,icon:"mdi:mdi-magnify",size:"x-small",color:"success",onClick:y=>F(l),class:"mr-2"},null,8,["onClick"])):E("",!0),u.value?(a(),D(q,{key:1,icon:"mdi:mdi-pencil",size:"x-small",color:"warning",onClick:y=>S(l)},null,8,["onClick"])):E("",!0)]),_:1},8,["page","items-per-page","sort-by","headers","items-length","items","loading","search"])):E("",!0),O.value&&n.value?(a(),D(dt,{key:1,convention:L.convention,modelValue:O.value,"onUpdate:modelValue":r[11]||(r[11]=l=>O.value=l),"lost-and-found":n.value,"onUpdate:lostAndFound":[r[12]||(r[12]=l=>n.value=l),K],onNew:w(P)},null,8,["convention","modelValue","lost-and-found","onNew"])):E("",!0),M.value&&n.value?(a(),D(ct,{key:2,title:n.value.Title,modelValue:M.value,"onUpdate:modelValue":r[13]||(r[13]=l=>M.value=l),"lost-and-found":n.value,"onUpdate:lostAndFound":r[14]||(r[14]=l=>n.value=l)},null,8,["title","modelValue","lost-and-found"])):E("",!0),B.value?(a(),D(mt,{key:3,convention:L.convention,modelValue:B.value,"onUpdate:modelValue":r[15]||(r[15]=l=>B.value=l)},null,8,["convention","modelValue"])):E("",!0)],64)):E("",!0)}}),nn=j({__name:"OperationsView",emits:["pageTitle"],setup(s,{emit:A}){var f;const U=W(),n=A,m=Be(),I=_e();Te(),n("pageTitle","Operations");const g=v(),_=v(["Costume Props","Lost and Found"]);let G=((f=m.params.convention)==null?void 0:f.toString())||"";const V=v();return G?U.getConvention(G).then(o=>{o&&(V.value=o)}).catch(()=>{I.push("/")}):I.push("/"),(o,i)=>(a(),D(He,null,{default:e(()=>[t(We,{color:"blue-darken-4"},{default:e(()=>[t(je,{modelValue:g.value,"onUpdate:modelValue":i[0]||(i[0]=u=>g.value=u),items:_.value,"show-arrows":""},null,8,["modelValue","items"])]),_:1}),t(Qe,{modelValue:g.value,"onUpdate:modelValue":i[1]||(i[1]=u=>g.value=u),disabled:!0,touch:!1},{default:e(()=>[t(Pe,{value:"Costume Props"},{default:e(()=>[g.value=="Costume Props"?(a(),D(Ae,{key:0,class:"pa-2"},{default:e(()=>[V.value?(a(),D(at,{key:0,convention:V.value},null,8,["convention"])):E("",!0)]),_:1})):E("",!0)]),_:1}),t(Pe,{value:"Lost and Found"},{default:e(()=>[g.value=="Lost and Found"?(a(),D(Ae,{key:0,class:"pa-2"},{default:e(()=>[V.value?(a(),D(It,{key:0,convention:V.value},null,8,["convention"])):E("",!0)]),_:1})):E("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{nn as default};
